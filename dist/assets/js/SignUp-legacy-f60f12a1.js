System.register(["./index-legacy-b6735175.js","./react-vendor-legacy-4587369d.js"],function(e,a){"use strict";var r,t,n,l,i;return{setters:[e=>{r=e.b,t=e.j,n=e.a},e=>{l=e.r,i=e.u}],execute:function(){e("default",function(){const[e,o]=l.useState({name:"",email:"",password:"",confirmPassword:"",role:"",department:"",year:"",section:"",phoneNumber:""}),[s,d]=l.useState(!1),[c,u]=l.useState(""),[m,b]=l.useState(""),h=i(),g=e=>{const{name:r,value:t}=e.target;o(e=>{const n={...e,[r]:t};return"department"===r&&(a.includes(t)?n.section="A":a.includes(e.department)&&!a.includes(t)&&(n.section="")),n}),c&&u(""),m&&b("")};return r("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 smooth-scroll mobile-smoothest-scroll no-mobile-anim",children:[t("style",{children:"\n        @keyframes waveButtonAnimation {\n          0%, 100% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n        }\n        .login-wave-button {\n          background: linear-gradient(90deg, var(--theme-gold-600), var(--theme-gold-300), var(--theme-gold-600), var(--theme-gold-300));\n          background-size: 300% 100%;\n          animation: waveButtonAnimation 3s ease-in-out infinite;\n          transition: all 0.3s ease;\n        }\n        .login-wave-button:hover { animation-duration: 1.5s; }\n      "}),t("div",{className:"relative z-10",children:t("div",{className:"w-full max-w-md",children:r("div",{className:"backdrop-blur-md bg-white/20 border border-white/30 p-8 rounded-3xl shadow-2xl",children:[r("div",{className:"text-center mb-8",children:[t("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:t("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),t("h1",{className:"text-3xl sm:text-4xl font-black text-white mb-2",children:"Create Account"}),t("p",{className:"text-gray-100 text-lg",children:"Sign up for your MSEC Academics account"})]}),c&&t("div",{className:"mb-6",children:t("div",{className:"backdrop-blur-sm bg-red-500/20 border border-red-400/50 p-4 border-l-4 rounded-lg",children:t("p",{className:"text-red-100 text-sm font-medium",children:c})})}),m&&t("div",{className:"mb-6",children:t("div",{className:"backdrop-blur-sm bg-green-500/20 border border-green-400/50 p-4 border-l-4 rounded-lg",children:t("p",{className:"text-green-100 text-sm font-medium",children:m})})}),r("form",{onSubmit:async a=>{if(a.preventDefault(),d(!0),u(""),!(e.name&&e.email&&e.password&&e.confirmPassword&&e.role&&e.department)){const a=[];return e.name||a.push("Full Name"),e.email||a.push("Email"),e.password||a.push("Password"),e.confirmPassword||a.push("Confirm Password"),e.role||a.push("Role"),e.department||a.push("Department"),u(`Missing required fields: ${a.join(", ")}. Please fill in all fields to continue.`),void d(!1)}if("msec.edu.in"!==e.email.toLowerCase().split("@")[1])return u("‚ùå Invalid email domain. Only MSEC institutional emails are allowed. Example: john.doe@msec.edu.in"),void d(!1);if(!("staff"!==e.role||e.year&&e.section))return u("üìã Staff members must specify: "+(e.year?"":"Academic Year (I-IV)")+(e.year||e.section?"":" and ")+(e.section?"":"Section (A/B)")),void d(!1);if(e.password!==e.confirmPassword)return u("üîí Password mismatch. The passwords you entered don't match. Please verify and try again."),void d(!1);if(e.password.length<6)return u("üîí Password too weak. Please use at least 6 characters for security."),void d(!1);try{const a={name:e.name,email:e.email,password:e.password,role:e.role,department:e.department,phoneNumber:e.phoneNumber};"staff"===e.role&&(a.year=e.year,a.section=e.section);try{const e=await n.post("/api/users",a);if(!e||!e.success)return void u(e?.error||"‚ùå Failed to create account. Please check your information and try again.")}catch(r){return void(r&&409===r.status?u("üìß This email is already registered. Try logging in instead, or use a different email."):r&&400===r.status?u(r.data&&r.data.error||"‚ùå Invalid information provided. Please check all fields and try again."):r&&r.status>=500?u("üîß Server error. Our team has been notified. Please try again in a few minutes."):u(r.message||"‚ùå Unable to create account. Please try again."))}"staff"===e.role?(b("üìã Account request submitted! Waiting for HOD approval..."),setTimeout(()=>h("/login"),2e3)):(b("‚úÖ Account created successfully! Redirecting to sign in..."),setTimeout(()=>h("/login"),900))}catch(r){console.error("Sign up error:",r),r.message.includes("fetch")?u("üåê Network error. Please check your internet connection and try again."):r.message.includes("timeout")?u("‚è±Ô∏è Request timed out. The server is taking too long to respond. Please try again."):u("‚ùå Unable to create account. "+(r.message||"Please verify all information and try again."))}finally{d(!1)}},className:"space-y-6",children:[r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Full Name"}),t("input",{name:"name",value:e.name,onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your name",required:!0})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Email Address"}),t("input",{type:"email",name:"email",value:e.email,onChange:g,pattern:".*@msec\\.edu\\.in$",title:"Please use your MSEC email address (@msec.edu.in)",className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your email",required:!0}),t("p",{className:"mt-2 text-xs text-gray-100",children:"Use your official MSEC email address"})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Role"}),r("select",{name:"role",value:e.role,onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[t("option",{value:"",className:"bg-gray-800",children:"Select Role"}),t("option",{value:"staff",className:"bg-gray-800",children:"Staff"}),t("option",{value:"hod",className:"bg-gray-800",children:"HOD"})]})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Department"}),r("select",{name:"department",value:e.department,onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[t("option",{value:"",className:"bg-gray-800",children:"Select Department"}),t("option",{value:"CSE",className:"bg-gray-800",children:"Computer Science & Engineering"}),t("option",{value:"AI_DS",className:"bg-gray-800",children:"Artificial Intelligence & Datascience"}),t("option",{value:"ECE",className:"bg-gray-800",children:"Electronics & Communication Engineering"}),t("option",{value:"IT",className:"bg-gray-800",children:"Information Technology"}),t("option",{value:"HNS",className:"bg-gray-800",children:"Humanities & Science (H&S)"}),t("option",{value:"MECH",className:"bg-gray-800",children:"Mechanical Engineering"}),t("option",{value:"CIVIL",className:"bg-gray-800",children:"Civil Engineering"}),t("option",{value:"EEE",className:"bg-gray-800",children:"Electrical & Electronics Engineering"})]})]}),"staff"===e.role&&r("div",{className:"grid grid-cols-2 gap-4",children:[r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Year"}),r("select",{name:"year",value:e.year||"",onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[t("option",{value:"",className:"bg-gray-800",children:"Select Year"}),t("option",{value:"I",className:"bg-gray-800",children:"I"}),t("option",{value:"II",className:"bg-gray-800",children:"II"}),t("option",{value:"III",className:"bg-gray-800",children:"III"}),t("option",{value:"IV",className:"bg-gray-800",children:"IV"})]})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Section"}),r("select",{name:"section",value:e.section||"",onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white "+(a.includes(e.department)?"opacity-50 cursor-not-allowed":""),required:!0,disabled:a.includes(e.department),children:[t("option",{value:"",className:"bg-gray-800",children:"Select Section"}),t("option",{value:"A",className:"bg-gray-800",children:"A"}),!a.includes(e.department)&&t("option",{value:"B",className:"bg-gray-800",children:"B"})]}),a.includes(e.department)&&r("p",{className:"mt-1 text-xs text-gray-100",children:[e.department," has a single Section A by default."]})]})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Phone Number"}),t("input",{type:"tel",name:"phoneNumber",value:e.phoneNumber,onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your number"})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Password"}),t("input",{type:"password",name:"password",value:e.password,onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Create a password",required:!0})]}),r("div",{children:[t("label",{className:"block text-sm font-bold text-white mb-3",children:"Confirm Password"}),t("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:g,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Repeat password",required:!0})]}),t("div",{className:"pt-4",children:t("button",{type:"submit",disabled:s,className:"glass-button w-full py-4 px-6 text-blue-600 text-lg font-bold rounded-2xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:t("span",{className:"truncate",children:s?"Creating account...":"Create Account"})})})]}),t("div",{className:"mt-8 text-center",children:r("p",{className:"text-gray-100 text-sm",children:["Already have an account? ",t("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline ml-1",onClick:()=>h("/login"),children:"Sign in"})]})})]})})})]})});const a=["MECH","CIVIL","EEE"]}}});
