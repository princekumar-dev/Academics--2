import{d as Pt,e as Ut,a as bt,g as kt,j as V,b as rt,F as vt,S as Lt}from"./index-ba65f9b1.js";import{g as Et,h as jt,r as dt}from"./react-vendor-ad4d5528.js";import{R as Wt}from"./RefreshButton-efbc2ae6.js";import{u as Zt,P as $t}from"./usePullToRefresh-466afb4d.js";function zt(it){throw new Error('Could not dynamically require "'+it+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(it,lt){(function(_){it.exports=_()})(function(){return function _(W,x,h){function l(b,w){if(!x[b]){if(!W[b]){var p=typeof zt=="function"&&zt;if(!w&&p)return p(b,!0);if(n)return n(b,!0);var y=new Error("Cannot find module '"+b+"'");throw y.code="MODULE_NOT_FOUND",y}var s=x[b]={exports:{}};W[b][0].call(s.exports,function(u){var r=W[b][1][u];return l(r||u)},s,s.exports,_,W,x,h)}return x[b].exports}for(var n=typeof zt=="function"&&zt,c=0;c<h.length;c++)l(h[c]);return l}({1:[function(_,W,x){var h=_("./utils"),l=_("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(c){for(var b,w,p,y,s,u,r,d=[],o=0,f=c.length,v=f,E=h.getTypeOf(c)!=="string";o<c.length;)v=f-o,p=E?(b=c[o++],w=o<f?c[o++]:0,o<f?c[o++]:0):(b=c.charCodeAt(o++),w=o<f?c.charCodeAt(o++):0,o<f?c.charCodeAt(o++):0),y=b>>2,s=(3&b)<<4|w>>4,u=1<v?(15&w)<<2|p>>6:64,r=2<v?63&p:64,d.push(n.charAt(y)+n.charAt(s)+n.charAt(u)+n.charAt(r));return d.join("")},x.decode=function(c){var b,w,p,y,s,u,r=0,d=0,o="data:";if(c.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var f,v=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===n.charAt(64)&&v--,c.charAt(c.length-2)===n.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=l.uint8array?new Uint8Array(0|v):new Array(0|v);r<c.length;)b=n.indexOf(c.charAt(r++))<<2|(y=n.indexOf(c.charAt(r++)))>>4,w=(15&y)<<4|(s=n.indexOf(c.charAt(r++)))>>2,p=(3&s)<<6|(u=n.indexOf(c.charAt(r++))),f[d++]=b,s!==64&&(f[d++]=w),u!==64&&(f[d++]=p);return f}},{"./support":30,"./utils":32}],2:[function(_,W,x){var h=_("./external"),l=_("./stream/DataWorker"),n=_("./stream/Crc32Probe"),c=_("./stream/DataLengthProbe");function b(w,p,y,s,u){this.compressedSize=w,this.uncompressedSize=p,this.crc32=y,this.compression=s,this.compressedContent=u}b.prototype={getContentWorker:function(){var w=new l(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return w.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new l(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(w,p,y){return w.pipe(new n).pipe(new c("uncompressedSize")).pipe(p.compressWorker(y)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},W.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(_,W,x){var h=_("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},x.DEFLATE=_("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(_,W,x){var h=_("./utils"),l=function(){for(var n,c=[],b=0;b<256;b++){n=b;for(var w=0;w<8;w++)n=1&n?3988292384^n>>>1:n>>>1;c[b]=n}return c}();W.exports=function(n,c){return n!==void 0&&n.length?h.getTypeOf(n)!=="string"?function(b,w,p,y){var s=l,u=y+p;b^=-1;for(var r=y;r<u;r++)b=b>>>8^s[255&(b^w[r])];return-1^b}(0|c,n,n.length,0):function(b,w,p,y){var s=l,u=y+p;b^=-1;for(var r=y;r<u;r++)b=b>>>8^s[255&(b^w.charCodeAt(r))];return-1^b}(0|c,n,n.length,0):0}},{"./utils":32}],5:[function(_,W,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(_,W,x){var h=null;h=typeof Promise<"u"?Promise:_("lie"),W.exports={Promise:h}},{lie:37}],7:[function(_,W,x){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=_("pako"),n=_("./utils"),c=_("./stream/GenericWorker"),b=h?"uint8array":"array";function w(p,y){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=y,this.meta={}}x.magic="\b\0",n.inherits(w,c),w.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(b,p.data),!1)},w.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(y){p.push({data:y,meta:p.meta})}},x.compressWorker=function(p){return new w("Deflate",p)},x.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(_,W,x){function h(s,u){var r,d="";for(r=0;r<u;r++)d+=String.fromCharCode(255&s),s>>>=8;return d}function l(s,u,r,d,o,f){var v,E,C=s.file,B=s.compression,T=f!==b.utf8encode,j=n.transformTo("string",f(C.name)),D=n.transformTo("string",b.utf8encode(C.name)),q=C.comment,Y=n.transformTo("string",f(q)),g=n.transformTo("string",b.utf8encode(q)),F=D.length!==C.name.length,e=g.length!==q.length,U="",Q="",Z="",et=C.dir,$=C.date,J={crc32:0,compressedSize:0,uncompressedSize:0};u&&!r||(J.crc32=s.crc32,J.compressedSize=s.compressedSize,J.uncompressedSize=s.uncompressedSize);var I=0;u&&(I|=8),T||!F&&!e||(I|=2048);var N=0,X=0;et&&(N|=16),o==="UNIX"?(X=798,N|=function(G,ot){var ft=G;return G||(ft=ot?16893:33204),(65535&ft)<<16}(C.unixPermissions,et)):(X=20,N|=function(G){return 63&(G||0)}(C.dosPermissions)),v=$.getUTCHours(),v<<=6,v|=$.getUTCMinutes(),v<<=5,v|=$.getUTCSeconds()/2,E=$.getUTCFullYear()-1980,E<<=4,E|=$.getUTCMonth()+1,E<<=5,E|=$.getUTCDate(),F&&(Q=h(1,1)+h(w(j),4)+D,U+="up"+h(Q.length,2)+Q),e&&(Z=h(1,1)+h(w(Y),4)+g,U+="uc"+h(Z.length,2)+Z);var K="";return K+="\n\0",K+=h(I,2),K+=B.magic,K+=h(v,2),K+=h(E,2),K+=h(J.crc32,4),K+=h(J.compressedSize,4),K+=h(J.uncompressedSize,4),K+=h(j.length,2),K+=h(U.length,2),{fileRecord:p.LOCAL_FILE_HEADER+K+j+U,dirRecord:p.CENTRAL_FILE_HEADER+h(X,2)+K+h(Y.length,2)+"\0\0\0\0"+h(N,4)+h(d,4)+j+U+Y}}var n=_("../utils"),c=_("../stream/GenericWorker"),b=_("../utf8"),w=_("../crc32"),p=_("../signature");function y(s,u,r,d){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=u,this.zipPlatform=r,this.encodeFileName=d,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(y,c),y.prototype.push=function(s){var u=s.meta.percent||0,r=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,c.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:r?(u+100*(r-d-1))/r:100}}))},y.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var u=this.streamFiles&&!s.file.dir;if(u){var r=l(s,u,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(s){this.accumulate=!1;var u=this.streamFiles&&!s.file.dir,r=l(s,u,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),u)this.push({data:function(d){return p.DATA_DESCRIPTOR+h(d.crc32,4)+h(d.compressedSize,4)+h(d.uncompressedSize,4)}(s),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var s=this.bytesWritten,u=0;u<this.dirRecords.length;u++)this.push({data:this.dirRecords[u],meta:{percent:100}});var r=this.bytesWritten-s,d=function(o,f,v,E,C){var B=n.transformTo("string",C(E));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(o,2)+h(o,2)+h(f,4)+h(v,4)+h(B.length,2)+B}(this.dirRecords.length,r,s,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(s){this._sources.push(s);var u=this;return s.on("data",function(r){u.processChunk(r)}),s.on("end",function(){u.closedSource(u.previous.streamInfo),u._sources.length?u.prepareNextSource():u.end()}),s.on("error",function(r){u.error(r)}),this},y.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(s){var u=this._sources;if(!c.prototype.error.call(this,s))return!1;for(var r=0;r<u.length;r++)try{u[r].error(s)}catch(d){}return!0},y.prototype.lock=function(){c.prototype.lock.call(this);for(var s=this._sources,u=0;u<s.length;u++)s[u].lock()},W.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(_,W,x){var h=_("../compressions"),l=_("./ZipFileWorker");x.generateWorker=function(n,c,b){var w=new l(c.streamFiles,b,c.platform,c.encodeFileName),p=0;try{n.forEach(function(y,s){p++;var u=function(f,v){var E=f||v,C=h[E];if(!C)throw new Error(E+" is not a valid compression method !");return C}(s.options.compression,c.compression),r=s.options.compressionOptions||c.compressionOptions||{},d=s.dir,o=s.date;s._compressWorker(u,r).withStreamInfo("file",{name:y,dir:d,date:o,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(w)}),w.entriesCount=p}catch(y){w.error(y)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(_,W,x){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new h;for(var n in this)typeof this[n]!="function"&&(l[n]=this[n]);return l}}(h.prototype=_("./object")).loadAsync=_("./load"),h.support=_("./support"),h.defaults=_("./defaults"),h.version="3.10.1",h.loadAsync=function(l,n){return new h().loadAsync(l,n)},h.external=_("./external"),W.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(_,W,x){var h=_("./utils"),l=_("./external"),n=_("./utf8"),c=_("./zipEntries"),b=_("./stream/Crc32Probe"),w=_("./nodejsUtils");function p(y){return new l.Promise(function(s,u){var r=y.decompressed.getContentWorker().pipe(new b);r.on("error",function(d){u(d)}).on("end",function(){r.streamInfo.crc32!==y.decompressed.crc32?u(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}W.exports=function(y,s){var u=this;return s=h.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),w.isNode&&w.isStream(y)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",y,!0,s.optimizedBinaryString,s.base64).then(function(r){var d=new c(s);return d.load(r),d}).then(function(r){var d=[l.Promise.resolve(r)],o=r.files;if(s.checkCRC32)for(var f=0;f<o.length;f++)d.push(p(o[f]));return l.Promise.all(d)}).then(function(r){for(var d=r.shift(),o=d.files,f=0;f<o.length;f++){var v=o[f],E=v.fileNameStr,C=h.resolve(v.fileNameStr);u.file(C,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:s.createFolders}),v.dir||(u.file(C).unsafeOriginalName=E)}return d.zipComment.length&&(u.comment=d.zipComment),u})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(_,W,x){var h=_("../utils"),l=_("../stream/GenericWorker");function n(c,b){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(b)}h.inherits(n,l),n.prototype._bindStream=function(c){var b=this;(this._stream=c).pause(),c.on("data",function(w){b.push({data:w,meta:{percent:0}})}).on("error",function(w){b.isPaused?this.generatedError=w:b.error(w)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},n.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},W.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(_,W,x){var h=_("readable-stream").Readable;function l(n,c,b){h.call(this,c),this._helper=n;var w=this;n.on("data",function(p,y){w.push(p)||w._helper.pause(),b&&b(y)}).on("error",function(p){w.emit("error",p)}).on("end",function(){w.push(null)})}_("../utils").inherits(l,h),l.prototype._read=function(){this._helper.resume()},W.exports=l},{"../utils":32,"readable-stream":16}],14:[function(_,W,x){W.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,l);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,l)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var l=new Buffer(h);return l.fill(0),l},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(_,W,x){function h(C,B,T){var j,D=n.getTypeOf(B),q=n.extend(T||{},w);q.date=q.date||new Date,q.compression!==null&&(q.compression=q.compression.toUpperCase()),typeof q.unixPermissions=="string"&&(q.unixPermissions=parseInt(q.unixPermissions,8)),q.unixPermissions&&16384&q.unixPermissions&&(q.dir=!0),q.dosPermissions&&16&q.dosPermissions&&(q.dir=!0),q.dir&&(C=o(C)),q.createFolders&&(j=d(C))&&f.call(this,j,!0);var Y=D==="string"&&q.binary===!1&&q.base64===!1;T&&T.binary!==void 0||(q.binary=!Y),(B instanceof p&&B.uncompressedSize===0||q.dir||!B||B.length===0)&&(q.base64=!1,q.binary=!0,B="",q.compression="STORE",D="string");var g=null;g=B instanceof p||B instanceof c?B:u.isNode&&u.isStream(B)?new r(C,B):n.prepareContent(C,B,q.binary,q.optimizedBinaryString,q.base64);var F=new y(C,g,q);this.files[C]=F}var l=_("./utf8"),n=_("./utils"),c=_("./stream/GenericWorker"),b=_("./stream/StreamHelper"),w=_("./defaults"),p=_("./compressedObject"),y=_("./zipObject"),s=_("./generate"),u=_("./nodejsUtils"),r=_("./nodejs/NodejsStreamInputAdapter"),d=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var B=C.lastIndexOf("/");return 0<B?C.substring(0,B):""},o=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},f=function(C,B){return B=B!==void 0?B:w.createFolders,C=o(C),this.files[C]||h.call(this,C,null,{dir:!0,createFolders:B}),this.files[C]};function v(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var B,T,j;for(B in this.files)j=this.files[B],(T=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&C(T,j)},filter:function(C){var B=[];return this.forEach(function(T,j){C(T,j)&&B.push(j)}),B},file:function(C,B,T){if(arguments.length!==1)return C=this.root+C,h.call(this,C,B,T),this;if(v(C)){var j=C;return this.filter(function(q,Y){return!Y.dir&&j.test(q)})}var D=this.files[this.root+C];return D&&!D.dir?D:null},folder:function(C){if(!C)return this;if(v(C))return this.filter(function(D,q){return q.dir&&C.test(D)});var B=this.root+C,T=f.call(this,B),j=this.clone();return j.root=T.name,j},remove:function(C){C=this.root+C;var B=this.files[C];if(B||(C.slice(-1)!=="/"&&(C+="/"),B=this.files[C]),B&&!B.dir)delete this.files[C];else for(var T=this.filter(function(D,q){return q.name.slice(0,C.length)===C}),j=0;j<T.length;j++)delete this.files[T[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var B,T={};try{if((T=n.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");n.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var j=T.comment||this.comment||"";B=s.generateWorker(this,T,j)}catch(D){(B=new c("error")).error(D)}return new b(B,T.type||"string",T.mimeType)},generateAsync:function(C,B){return this.generateInternalStream(C).accumulate(B)},generateNodeStream:function(C,B){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(B)}};W.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(_,W,x){W.exports=_("stream")},{stream:void 0}],17:[function(_,W,x){var h=_("./DataReader");function l(n){h.call(this,n);for(var c=0;c<this.data.length;c++)n[c]=255&n[c]}_("../utils").inherits(l,h),l.prototype.byteAt=function(n){return this.data[this.zero+n]},l.prototype.lastIndexOfSignature=function(n){for(var c=n.charCodeAt(0),b=n.charCodeAt(1),w=n.charCodeAt(2),p=n.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===c&&this.data[y+1]===b&&this.data[y+2]===w&&this.data[y+3]===p)return y-this.zero;return-1},l.prototype.readAndCheckSignature=function(n){var c=n.charCodeAt(0),b=n.charCodeAt(1),w=n.charCodeAt(2),p=n.charCodeAt(3),y=this.readData(4);return c===y[0]&&b===y[1]&&w===y[2]&&p===y[3]},l.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,c},W.exports=l},{"../utils":32,"./DataReader":18}],18:[function(_,W,x){var h=_("../utils");function l(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var c,b=0;for(this.checkOffset(n),c=this.index+n-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);return this.index+=n,b},readString:function(n){return h.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},W.exports=l},{"../utils":32}],19:[function(_,W,x){var h=_("./Uint8ArrayReader");function l(n){h.call(this,n)}_("../utils").inherits(l,h),l.prototype.readData=function(n){this.checkOffset(n);var c=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,c},W.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(_,W,x){var h=_("./DataReader");function l(n){h.call(this,n)}_("../utils").inherits(l,h),l.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},l.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},l.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},l.prototype.readData=function(n){this.checkOffset(n);var c=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,c},W.exports=l},{"../utils":32,"./DataReader":18}],21:[function(_,W,x){var h=_("./ArrayReader");function l(n){h.call(this,n)}_("../utils").inherits(l,h),l.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,c},W.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(_,W,x){var h=_("../utils"),l=_("../support"),n=_("./ArrayReader"),c=_("./StringReader"),b=_("./NodeBufferReader"),w=_("./Uint8ArrayReader");W.exports=function(p){var y=h.getTypeOf(p);return h.checkSupport(y),y!=="string"||l.uint8array?y==="nodebuffer"?new b(p):l.uint8array?new w(h.transformTo("uint8array",p)):new n(h.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(_,W,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(_,W,x){var h=_("./GenericWorker"),l=_("../utils");function n(c){h.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(n,h),n.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},W.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(_,W,x){var h=_("./GenericWorker"),l=_("../crc32");function n(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}_("../utils").inherits(n,h),n.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},W.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(_,W,x){var h=_("../utils"),l=_("./GenericWorker");function n(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}h.inherits(n,l),n.prototype.processChunk=function(c){if(c){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+c.data.length}l.prototype.processChunk.call(this,c)},W.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(_,W,x){var h=_("../utils"),l=_("./GenericWorker");function n(c){l.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(w){b.dataIsReady=!0,b.data=w,b.max=w&&w.length||0,b.type=h.getTypeOf(w),b.isPaused||b._tickAndRepeat()},function(w){b.error(w)})}h.inherits(n,l),n.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,b);break;case"uint8array":c=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":c=this.data.slice(this.index,b)}return this.index=b,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},W.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(_,W,x){function h(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,n){return this._listeners[l].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,n){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,n)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var n=this;return l.on("data",function(c){n.processChunk(c)}),l.on("end",function(){n.end()}),l.on("error",function(c){n.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,n){return this.extraStreamInfo[l]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},W.exports=h},{}],29:[function(_,W,x){var h=_("../utils"),l=_("./ConvertWorker"),n=_("./GenericWorker"),c=_("../base64"),b=_("../support"),w=_("../external"),p=null;if(b.nodestream)try{p=_("../nodejs/NodejsStreamOutputAdapter")}catch(u){}function y(u,r){return new w.Promise(function(d,o){var f=[],v=u._internalType,E=u._outputType,C=u._mimeType;u.on("data",function(B,T){f.push(B),r&&r(T)}).on("error",function(B){f=[],o(B)}).on("end",function(){try{var B=function(T,j,D){switch(T){case"blob":return h.newBlob(h.transformTo("arraybuffer",j),D);case"base64":return c.encode(j);default:return h.transformTo(T,j)}}(E,function(T,j){var D,q=0,Y=null,g=0;for(D=0;D<j.length;D++)g+=j[D].length;switch(T){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(Y=new Uint8Array(g),D=0;D<j.length;D++)Y.set(j[D],q),q+=j[D].length;return Y;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+T+"'")}}(v,f),C);d(B)}catch(T){o(T)}f=[]}).resume()})}function s(u,r,d){var o=r;switch(r){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=r,this._mimeType=d,h.checkSupport(o),this._worker=u.pipe(new l(o)),u.lock()}catch(f){this._worker=new n("error"),this._worker.error(f)}}s.prototype={accumulate:function(u){return y(this,u)},on:function(u,r){var d=this;return u==="data"?this._worker.on(u,function(o){r.call(d,o.data,o.meta)}):this._worker.on(u,function(){h.delay(r,arguments,d)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},u)}},W.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(_,W,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=typeof Buffer<"u",x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var h=new ArrayBuffer(0);try{x.blob=new Blob([h],{type:"application/zip"}).size===0}catch(n){try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(h),x.blob=l.getBlob("application/zip").size===0}catch(c){x.blob=!1}}}try{x.nodestream=!!_("readable-stream").Readable}catch(n){x.nodestream=!1}},{"readable-stream":16}],31:[function(_,W,x){for(var h=_("./utils"),l=_("./support"),n=_("./nodejsUtils"),c=_("./stream/GenericWorker"),b=new Array(256),w=0;w<256;w++)b[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;b[254]=b[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function y(){c.call(this,"utf-8 encode")}x.utf8encode=function(s){return l.nodebuffer?n.newBufferFrom(s,"utf-8"):function(u){var r,d,o,f,v,E=u.length,C=0;for(f=0;f<E;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<E&&(64512&(o=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(o-56320),f++),C+=d<128?1:d<2048?2:d<65536?3:4;for(r=l.uint8array?new Uint8Array(C):new Array(C),f=v=0;v<C;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<E&&(64512&(o=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(o-56320),f++),d<128?r[v++]=d:(d<2048?r[v++]=192|d>>>6:(d<65536?r[v++]=224|d>>>12:(r[v++]=240|d>>>18,r[v++]=128|d>>>12&63),r[v++]=128|d>>>6&63),r[v++]=128|63&d);return r}(s)},x.utf8decode=function(s){return l.nodebuffer?h.transformTo("nodebuffer",s).toString("utf-8"):function(u){var r,d,o,f,v=u.length,E=new Array(2*v);for(r=d=0;r<v;)if((o=u[r++])<128)E[d++]=o;else if(4<(f=b[o]))E[d++]=65533,r+=f-1;else{for(o&=f===2?31:f===3?15:7;1<f&&r<v;)o=o<<6|63&u[r++],f--;1<f?E[d++]=65533:o<65536?E[d++]=o:(o-=65536,E[d++]=55296|o>>10&1023,E[d++]=56320|1023&o)}return E.length!==d&&(E.subarray?E=E.subarray(0,d):E.length=d),h.applyFromCharCode(E)}(s=h.transformTo(l.uint8array?"uint8array":"array",s))},h.inherits(p,c),p.prototype.processChunk=function(s){var u=h.transformTo(l.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var r=u;(u=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),u.set(r,this.leftOver.length)}else u=this.leftOver.concat(u);this.leftOver=null}var d=function(f,v){var E;for((v=v||f.length)>f.length&&(v=f.length),E=v-1;0<=E&&(192&f[E])==128;)E--;return E<0||E===0?v:E+b[f[E]]>v?E:v}(u),o=u;d!==u.length&&(l.uint8array?(o=u.subarray(0,d),this.leftOver=u.subarray(d,u.length)):(o=u.slice(0,d),this.leftOver=u.slice(d,u.length))),this.push({data:x.utf8decode(o),meta:s.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=p,h.inherits(y,c),y.prototype.processChunk=function(s){this.push({data:x.utf8encode(s.data),meta:s.meta})},x.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(_,W,x){var h=_("./support"),l=_("./base64"),n=_("./nodejsUtils"),c=_("./external");function b(r){return r}function w(r,d){for(var o=0;o<r.length;++o)d[o]=255&r.charCodeAt(o);return d}_("setimmediate"),x.newBlob=function(r,d){x.checkSupport("blob");try{return new Blob([r],{type:d})}catch(f){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(r),o.getBlob(d)}catch(v){throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(r,d,o){var f=[],v=0,E=r.length;if(E<=o)return String.fromCharCode.apply(null,r);for(;v<E;)d==="array"||d==="nodebuffer"?f.push(String.fromCharCode.apply(null,r.slice(v,Math.min(v+o,E)))):f.push(String.fromCharCode.apply(null,r.subarray(v,Math.min(v+o,E)))),v+=o;return f.join("")},stringifyByChar:function(r){for(var d="",o=0;o<r.length;o++)d+=String.fromCharCode(r[o]);return d},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(r){return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch(r){return!1}}()}};function y(r){var d=65536,o=x.getTypeOf(r),f=!0;if(o==="uint8array"?f=p.applyCanBeUsed.uint8array:o==="nodebuffer"&&(f=p.applyCanBeUsed.nodebuffer),f)for(;1<d;)try{return p.stringifyByChunk(r,o,d)}catch(v){d=Math.floor(d/2)}return p.stringifyByChar(r)}function s(r,d){for(var o=0;o<r.length;o++)d[o]=r[o];return d}x.applyFromCharCode=y;var u={};u.string={string:b,array:function(r){return w(r,new Array(r.length))},arraybuffer:function(r){return u.string.uint8array(r).buffer},uint8array:function(r){return w(r,new Uint8Array(r.length))},nodebuffer:function(r){return w(r,n.allocBuffer(r.length))}},u.array={string:y,array:b,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return n.newBufferFrom(r)}},u.arraybuffer={string:function(r){return y(new Uint8Array(r))},array:function(r){return s(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:b,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return n.newBufferFrom(new Uint8Array(r))}},u.uint8array={string:y,array:function(r){return s(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:b,nodebuffer:function(r){return n.newBufferFrom(r)}},u.nodebuffer={string:y,array:function(r){return s(r,new Array(r.length))},arraybuffer:function(r){return u.nodebuffer.uint8array(r).buffer},uint8array:function(r){return s(r,new Uint8Array(r.length))},nodebuffer:b},x.transformTo=function(r,d){if(d=d||"",!r)return d;x.checkSupport(r);var o=x.getTypeOf(d);return u[o][r](d)},x.resolve=function(r){for(var d=r.split("/"),o=[],f=0;f<d.length;f++){var v=d[f];v==="."||v===""&&f!==0&&f!==d.length-1||(v===".."?o.pop():o.push(v))}return o.join("/")},x.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":h.nodebuffer&&n.isBuffer(r)?"nodebuffer":h.uint8array&&r instanceof Uint8Array?"uint8array":h.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(r){if(!h[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(r){var d,o,f="";for(o=0;o<(r||"").length;o++)f+="\\x"+((d=r.charCodeAt(o))<16?"0":"")+d.toString(16).toUpperCase();return f},x.delay=function(r,d,o){setImmediate(function(){r.apply(o||null,d||[])})},x.inherits=function(r,d){function o(){}o.prototype=d.prototype,r.prototype=new o},x.extend=function(){var r,d,o={};for(r=0;r<arguments.length;r++)for(d in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],d)&&o[d]===void 0&&(o[d]=arguments[r][d]);return o},x.prepareContent=function(r,d,o,f,v){return c.Promise.resolve(d).then(function(E){return h.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new c.Promise(function(C,B){var T=new FileReader;T.onload=function(j){C(j.target.result)},T.onerror=function(j){B(j.target.error)},T.readAsArrayBuffer(E)}):E}).then(function(E){var C=x.getTypeOf(E);return C?(C==="arraybuffer"?E=x.transformTo("uint8array",E):C==="string"&&(v?E=l.decode(E):o&&f!==!0&&(E=function(B){return w(B,h.uint8array?new Uint8Array(B.length):new Array(B.length))}(E))),E):c.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(_,W,x){var h=_("./reader/readerFor"),l=_("./utils"),n=_("./signature"),c=_("./zipEntry"),b=_("./support");function w(p){this.files=[],this.loadOptions=p}w.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(y)+", expected "+l.pretty(p)+")")}},isSignature:function(p,y){var s=this.reader.index;this.reader.setIndex(p);var u=this.reader.readString(4)===y;return this.reader.setIndex(s),u},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),y=b.uint8array?"uint8array":"array",s=l.transformTo(y,p);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,y,s,u=this.zip64EndOfCentralSize-44;0<u;)p=this.reader.readInt(2),y=this.reader.readInt(4),s=this.reader.readData(y),this.zip64ExtensibleData[p]={id:p,length:y,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,y;for(p=0;p<this.files.length;p++)y=this.files[p],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var y=p;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var u=y-s;if(0<u)this.isSignature(y,n.CENTRAL_FILE_HEADER)||(this.reader.zero=u);else if(u<0)throw new Error("Corrupted zip: missing "+Math.abs(u)+" bytes.")},prepareReader:function(p){this.reader=h(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},W.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(_,W,x){var h=_("./reader/readerFor"),l=_("./utils"),n=_("./compressedObject"),c=_("./crc32"),b=_("./utf8"),w=_("./compressions"),p=_("./support");function y(s,u){this.options=s,this.loadOptions=u}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var u,r;if(s.skip(22),this.fileNameLength=s.readInt(2),r=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((u=function(d){for(var o in w)if(Object.prototype.hasOwnProperty.call(w,o)&&w[o].magic===d)return w[o];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,u,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var u=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(u),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=h(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var u,r,d,o=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<o;)u=s.readInt(2),r=s.readInt(2),d=s.readData(r),this.extraFields[u]={id:u,length:r,value:d};s.setIndex(o)},handleUTF8:function(){var s=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();if(u!==null)this.fileNameStr=u;else{var r=l.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var o=l.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var u=h(s.value);return u.readInt(1)!==1||c(this.fileName)!==u.readInt(4)?null:b.utf8decode(u.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var u=h(s.value);return u.readInt(1)!==1||c(this.fileComment)!==u.readInt(4)?null:b.utf8decode(u.readData(s.length-5))}return null}},W.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(_,W,x){function h(u,r,d){this.name=u,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=r,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var l=_("./stream/StreamHelper"),n=_("./stream/DataWorker"),c=_("./utf8"),b=_("./compressedObject"),w=_("./stream/GenericWorker");h.prototype={internalStream:function(u){var r=null,d="string";try{if(!u)throw new Error("No output type specified.");var o=(d=u.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),r=this._decompressWorker();var f=!this._dataBinary;f&&!o&&(r=r.pipe(new c.Utf8EncodeWorker)),!f&&o&&(r=r.pipe(new c.Utf8DecodeWorker))}catch(v){(r=new w("error")).error(v)}return new l(r,d,"")},async:function(u,r){return this.internalStream(u).accumulate(r)},nodeStream:function(u,r){return this.internalStream(u||"nodebuffer").toNodejsStream(r)},_compressWorker:function(u,r){if(this._data instanceof b&&this._data.compression.magic===u.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new c.Utf8EncodeWorker)),b.createWorkerFrom(d,u,r)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof w?this._data:new n(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<p.length;s++)h.prototype[p[s]]=y;W.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(_,W,x){(function(h){var l,n,c=h.MutationObserver||h.WebKitMutationObserver;if(c){var b=0,w=new c(u),p=h.document.createTextNode("");w.observe(p,{characterData:!0}),l=function(){p.data=b=++b%2}}else if(h.setImmediate||h.MessageChannel===void 0)l="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var r=h.document.createElement("script");r.onreadystatechange=function(){u(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},h.document.documentElement.appendChild(r)}:function(){setTimeout(u,0)};else{var y=new h.MessageChannel;y.port1.onmessage=u,l=function(){y.port2.postMessage(0)}}var s=[];function u(){var r,d;n=!0;for(var o=s.length;o;){for(d=s,s=[],r=-1;++r<o;)d[r]();o=s.length}n=!1}W.exports=function(r){s.push(r)!==1||n||l()}}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(_,W,x){var h=_("immediate");function l(){}var n={},c=["REJECTED"],b=["FULFILLED"],w=["PENDING"];function p(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,o!==l&&r(this,o)}function y(o,f,v){this.promise=o,typeof f=="function"&&(this.onFulfilled=f,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function s(o,f,v){h(function(){var E;try{E=f(v)}catch(C){return n.reject(o,C)}E===o?n.reject(o,new TypeError("Cannot resolve promise with itself")):n.resolve(o,E)})}function u(o){var f=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof f=="function")return function(){f.apply(o,arguments)}}function r(o,f){var v=!1;function E(T){v||(v=!0,n.reject(o,T))}function C(T){v||(v=!0,n.resolve(o,T))}var B=d(function(){f(C,E)});B.status==="error"&&E(B.value)}function d(o,f){var v={};try{v.value=o(f),v.status="success"}catch(E){v.status="error",v.value=E}return v}(W.exports=p).prototype.finally=function(o){if(typeof o!="function")return this;var f=this.constructor;return this.then(function(v){return f.resolve(o()).then(function(){return v})},function(v){return f.resolve(o()).then(function(){throw v})})},p.prototype.catch=function(o){return this.then(null,o)},p.prototype.then=function(o,f){if(typeof o!="function"&&this.state===b||typeof f!="function"&&this.state===c)return this;var v=new this.constructor(l);return this.state!==w?s(v,this.state===b?o:f,this.outcome):this.queue.push(new y(v,o,f)),v},y.prototype.callFulfilled=function(o){n.resolve(this.promise,o)},y.prototype.otherCallFulfilled=function(o){s(this.promise,this.onFulfilled,o)},y.prototype.callRejected=function(o){n.reject(this.promise,o)},y.prototype.otherCallRejected=function(o){s(this.promise,this.onRejected,o)},n.resolve=function(o,f){var v=d(u,f);if(v.status==="error")return n.reject(o,v.value);var E=v.value;if(E)r(o,E);else{o.state=b,o.outcome=f;for(var C=-1,B=o.queue.length;++C<B;)o.queue[C].callFulfilled(f)}return o},n.reject=function(o,f){o.state=c,o.outcome=f;for(var v=-1,E=o.queue.length;++v<E;)o.queue[v].callRejected(f);return o},p.resolve=function(o){return o instanceof this?o:n.resolve(new this(l),o)},p.reject=function(o){var f=new this(l);return n.reject(f,o)},p.all=function(o){var f=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=o.length,E=!1;if(!v)return this.resolve([]);for(var C=new Array(v),B=0,T=-1,j=new this(l);++T<v;)D(o[T],T);return j;function D(q,Y){f.resolve(q).then(function(g){C[Y]=g,++B!==v||E||(E=!0,n.resolve(j,C))},function(g){E||(E=!0,n.reject(j,g))})}},p.race=function(o){var f=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=o.length,E=!1;if(!v)return this.resolve([]);for(var C=-1,B=new this(l);++C<v;)T=o[C],f.resolve(T).then(function(j){E||(E=!0,n.resolve(B,j))},function(j){E||(E=!0,n.reject(B,j))});var T;return B}},{immediate:36}],38:[function(_,W,x){var h={};(0,_("./lib/utils/common").assign)(h,_("./lib/deflate"),_("./lib/inflate"),_("./lib/zlib/constants")),W.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(_,W,x){var h=_("./zlib/deflate"),l=_("./utils/common"),n=_("./utils/strings"),c=_("./zlib/messages"),b=_("./zlib/zstream"),w=Object.prototype.toString,p=0,y=-1,s=0,u=8;function r(o){if(!(this instanceof r))return new r(o);this.options=l.assign({level:y,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},o||{});var f=this.options;f.raw&&0<f.windowBits?f.windowBits=-f.windowBits:f.gzip&&0<f.windowBits&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var v=h.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(v!==p)throw new Error(c[v]);if(f.header&&h.deflateSetHeader(this.strm,f.header),f.dictionary){var E;if(E=typeof f.dictionary=="string"?n.string2buf(f.dictionary):w.call(f.dictionary)==="[object ArrayBuffer]"?new Uint8Array(f.dictionary):f.dictionary,(v=h.deflateSetDictionary(this.strm,E))!==p)throw new Error(c[v]);this._dict_set=!0}}function d(o,f){var v=new r(f);if(v.push(o,!0),v.err)throw v.msg||c[v.err];return v.result}r.prototype.push=function(o,f){var v,E,C=this.strm,B=this.options.chunkSize;if(this.ended)return!1;E=f===~~f?f:f===!0?4:0,typeof o=="string"?C.input=n.string2buf(o):w.call(o)==="[object ArrayBuffer]"?C.input=new Uint8Array(o):C.input=o,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new l.Buf8(B),C.next_out=0,C.avail_out=B),(v=h.deflate(C,E))!==1&&v!==p)return this.onEnd(v),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(l.shrinkBuf(C.output,C.next_out))):this.onData(l.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&v!==1);return E===4?(v=h.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===p):E!==2||(this.onEnd(p),!(C.avail_out=0))},r.prototype.onData=function(o){this.chunks.push(o)},r.prototype.onEnd=function(o){o===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},x.Deflate=r,x.deflate=d,x.deflateRaw=function(o,f){return(f=f||{}).raw=!0,d(o,f)},x.gzip=function(o,f){return(f=f||{}).gzip=!0,d(o,f)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(_,W,x){var h=_("./zlib/inflate"),l=_("./utils/common"),n=_("./utils/strings"),c=_("./zlib/constants"),b=_("./zlib/messages"),w=_("./zlib/zstream"),p=_("./zlib/gzheader"),y=Object.prototype.toString;function s(r){if(!(this instanceof s))return new s(r);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},r||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||r&&r.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&!(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var o=h.inflateInit2(this.strm,d.windowBits);if(o!==c.Z_OK)throw new Error(b[o]);this.header=new p,h.inflateGetHeader(this.strm,this.header)}function u(r,d){var o=new s(d);if(o.push(r,!0),o.err)throw o.msg||b[o.err];return o.result}s.prototype.push=function(r,d){var o,f,v,E,C,B,T=this.strm,j=this.options.chunkSize,D=this.options.dictionary,q=!1;if(this.ended)return!1;f=d===~~d?d:d===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof r=="string"?T.input=n.binstring2buf(r):y.call(r)==="[object ArrayBuffer]"?T.input=new Uint8Array(r):T.input=r,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(j),T.next_out=0,T.avail_out=j),(o=h.inflate(T,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(B=typeof D=="string"?n.string2buf(D):y.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,o=h.inflateSetDictionary(this.strm,B)),o===c.Z_BUF_ERROR&&q===!0&&(o=c.Z_OK,q=!1),o!==c.Z_STREAM_END&&o!==c.Z_OK)return this.onEnd(o),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&o!==c.Z_STREAM_END&&(T.avail_in!==0||f!==c.Z_FINISH&&f!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=n.utf8border(T.output,T.next_out),E=T.next_out-v,C=n.buf2string(T.output,v),T.next_out=E,T.avail_out=j-E,E&&l.arraySet(T.output,T.output,v,E,0),this.onData(C)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(q=!0)}while((0<T.avail_in||T.avail_out===0)&&o!==c.Z_STREAM_END);return o===c.Z_STREAM_END&&(f=c.Z_FINISH),f===c.Z_FINISH?(o=h.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===c.Z_OK):f!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(T.avail_out=0))},s.prototype.onData=function(r){this.chunks.push(r)},s.prototype.onEnd=function(r){r===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},x.Inflate=s,x.inflate=u,x.inflateRaw=function(r,d){return(d=d||{}).raw=!0,u(r,d)},x.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(_,W,x){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(c){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var w=b.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var p in w)w.hasOwnProperty(p)&&(c[p]=w[p])}}return c},x.shrinkBuf=function(c,b){return c.length===b?c:c.subarray?c.subarray(0,b):(c.length=b,c)};var l={arraySet:function(c,b,w,p,y){if(b.subarray&&c.subarray)c.set(b.subarray(w,w+p),y);else for(var s=0;s<p;s++)c[y+s]=b[w+s]},flattenChunks:function(c){var b,w,p,y,s,u;for(b=p=0,w=c.length;b<w;b++)p+=c[b].length;for(u=new Uint8Array(p),b=y=0,w=c.length;b<w;b++)s=c[b],u.set(s,y),y+=s.length;return u}},n={arraySet:function(c,b,w,p,y){for(var s=0;s<p;s++)c[y+s]=b[w+s]},flattenChunks:function(c){return[].concat.apply([],c)}};x.setTyped=function(c){c?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,l)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,n))},x.setTyped(h)},{}],42:[function(_,W,x){var h=_("./common"),l=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch(p){l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(p){n=!1}for(var c=new h.Buf8(256),b=0;b<256;b++)c[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function w(p,y){if(y<65537&&(p.subarray&&n||!p.subarray&&l))return String.fromCharCode.apply(null,h.shrinkBuf(p,y));for(var s="",u=0;u<y;u++)s+=String.fromCharCode(p[u]);return s}c[254]=c[254]=1,x.string2buf=function(p){var y,s,u,r,d,o=p.length,f=0;for(r=0;r<o;r++)(64512&(s=p.charCodeAt(r)))==55296&&r+1<o&&(64512&(u=p.charCodeAt(r+1)))==56320&&(s=65536+(s-55296<<10)+(u-56320),r++),f+=s<128?1:s<2048?2:s<65536?3:4;for(y=new h.Buf8(f),r=d=0;d<f;r++)(64512&(s=p.charCodeAt(r)))==55296&&r+1<o&&(64512&(u=p.charCodeAt(r+1)))==56320&&(s=65536+(s-55296<<10)+(u-56320),r++),s<128?y[d++]=s:(s<2048?y[d++]=192|s>>>6:(s<65536?y[d++]=224|s>>>12:(y[d++]=240|s>>>18,y[d++]=128|s>>>12&63),y[d++]=128|s>>>6&63),y[d++]=128|63&s);return y},x.buf2binstring=function(p){return w(p,p.length)},x.binstring2buf=function(p){for(var y=new h.Buf8(p.length),s=0,u=y.length;s<u;s++)y[s]=p.charCodeAt(s);return y},x.buf2string=function(p,y){var s,u,r,d,o=y||p.length,f=new Array(2*o);for(s=u=0;s<o;)if((r=p[s++])<128)f[u++]=r;else if(4<(d=c[r]))f[u++]=65533,s+=d-1;else{for(r&=d===2?31:d===3?15:7;1<d&&s<o;)r=r<<6|63&p[s++],d--;1<d?f[u++]=65533:r<65536?f[u++]=r:(r-=65536,f[u++]=55296|r>>10&1023,f[u++]=56320|1023&r)}return w(f,u)},x.utf8border=function(p,y){var s;for((y=y||p.length)>p.length&&(y=p.length),s=y-1;0<=s&&(192&p[s])==128;)s--;return s<0||s===0?y:s+c[p[s]]>y?s:y}},{"./common":41}],43:[function(_,W,x){W.exports=function(h,l,n,c){for(var b=65535&h|0,w=h>>>16&65535|0,p=0;n!==0;){for(n-=p=2e3<n?2e3:n;w=w+(b=b+l[c++]|0)|0,--p;);b%=65521,w%=65521}return b|w<<16|0}},{}],44:[function(_,W,x){W.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(_,W,x){var h=function(){for(var l,n=[],c=0;c<256;c++){l=c;for(var b=0;b<8;b++)l=1&l?3988292384^l>>>1:l>>>1;n[c]=l}return n}();W.exports=function(l,n,c,b){var w=h,p=b+c;l^=-1;for(var y=b;y<p;y++)l=l>>>8^w[255&(l^n[y])];return-1^l}},{}],46:[function(_,W,x){var h,l=_("../utils/common"),n=_("./trees"),c=_("./adler32"),b=_("./crc32"),w=_("./messages"),p=0,y=4,s=0,u=-2,r=-1,d=4,o=2,f=8,v=9,E=286,C=30,B=19,T=2*E+1,j=15,D=3,q=258,Y=q+D+1,g=42,F=113,e=1,U=2,Q=3,Z=4;function et(t,z){return t.msg=w[z],z}function $(t){return(t<<1)-(4<t?9:0)}function J(t){for(var z=t.length;0<=--z;)t[z]=0}function I(t){var z=t.state,S=z.pending;S>t.avail_out&&(S=t.avail_out),S!==0&&(l.arraySet(t.output,z.pending_buf,z.pending_out,S,t.next_out),t.next_out+=S,z.pending_out+=S,t.total_out+=S,t.avail_out-=S,z.pending-=S,z.pending===0&&(z.pending_out=0))}function N(t,z){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,z),t.block_start=t.strstart,I(t.strm)}function X(t,z){t.pending_buf[t.pending++]=z}function K(t,z){t.pending_buf[t.pending++]=z>>>8&255,t.pending_buf[t.pending++]=255&z}function G(t,z){var S,a,i=t.max_chain_length,m=t.strstart,A=t.prev_length,O=t.nice_match,k=t.strstart>t.w_size-Y?t.strstart-(t.w_size-Y):0,L=t.window,M=t.w_mask,P=t.prev,H=t.strstart+q,st=L[m+A-1],tt=L[m+A];t.prev_length>=t.good_match&&(i>>=2),O>t.lookahead&&(O=t.lookahead);do if(L[(S=z)+A]===tt&&L[S+A-1]===st&&L[S]===L[m]&&L[++S]===L[m+1]){m+=2,S++;do;while(L[++m]===L[++S]&&L[++m]===L[++S]&&L[++m]===L[++S]&&L[++m]===L[++S]&&L[++m]===L[++S]&&L[++m]===L[++S]&&L[++m]===L[++S]&&L[++m]===L[++S]&&m<H);if(a=q-(H-m),m=H-q,A<a){if(t.match_start=z,O<=(A=a))break;st=L[m+A-1],tt=L[m+A]}}while((z=P[z&M])>k&&--i!=0);return A<=t.lookahead?A:t.lookahead}function ot(t){var z,S,a,i,m,A,O,k,L,M,P=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=P+(P-Y)){for(l.arraySet(t.window,t.window,P,P,0),t.match_start-=P,t.strstart-=P,t.block_start-=P,z=S=t.hash_size;a=t.head[--z],t.head[z]=P<=a?a-P:0,--S;);for(z=S=P;a=t.prev[--z],t.prev[z]=P<=a?a-P:0,--S;);i+=P}if(t.strm.avail_in===0)break;if(A=t.strm,O=t.window,k=t.strstart+t.lookahead,L=i,M=void 0,M=A.avail_in,L<M&&(M=L),S=M===0?0:(A.avail_in-=M,l.arraySet(O,A.input,A.next_in,M,k),A.state.wrap===1?A.adler=c(A.adler,O,M,k):A.state.wrap===2&&(A.adler=b(A.adler,O,M,k)),A.next_in+=M,A.total_in+=M,M),t.lookahead+=S,t.lookahead+t.insert>=D)for(m=t.strstart-t.insert,t.ins_h=t.window[m],t.ins_h=(t.ins_h<<t.hash_shift^t.window[m+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[m+D-1])&t.hash_mask,t.prev[m&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=m,m++,t.insert--,!(t.lookahead+t.insert<D)););}while(t.lookahead<Y&&t.strm.avail_in!==0)}function ft(t,z){for(var S,a;;){if(t.lookahead<Y){if(ot(t),t.lookahead<Y&&z===p)return e;if(t.lookahead===0)break}if(S=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),S!==0&&t.strstart-S<=t.w_size-Y&&(t.match_length=G(t,S)),t.match_length>=D)if(a=n._tr_tally(t,t.strstart-t.match_start,t.match_length-D),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=D){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(N(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<D-1?t.strstart:D-1,z===y?(N(t,!0),t.strm.avail_out===0?Q:Z):t.last_lit&&(N(t,!1),t.strm.avail_out===0)?e:U}function nt(t,z){for(var S,a,i;;){if(t.lookahead<Y){if(ot(t),t.lookahead<Y&&z===p)return e;if(t.lookahead===0)break}if(S=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=D-1,S!==0&&t.prev_length<t.max_lazy_match&&t.strstart-S<=t.w_size-Y&&(t.match_length=G(t,S),t.match_length<=5&&(t.strategy===1||t.match_length===D&&4096<t.strstart-t.match_start)&&(t.match_length=D-1)),t.prev_length>=D&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-D,a=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-D),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,S=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=D-1,t.strstart++,a&&(N(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((a=n._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<D-1?t.strstart:D-1,z===y?(N(t,!0),t.strm.avail_out===0?Q:Z):t.last_lit&&(N(t,!1),t.strm.avail_out===0)?e:U}function at(t,z,S,a,i){this.good_length=t,this.max_lazy=z,this.nice_length=S,this.max_chain=a,this.func=i}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=f,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*C+1)),this.bl_tree=new l.Buf16(2*(2*B+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(j+1),this.heap=new l.Buf16(2*E+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*E+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(t){var z;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(z=t.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?g:F,t.adler=z.wrap===2?0:1,z.last_flush=p,n._tr_init(z),s):et(t,u)}function mt(t){var z=ht(t);return z===s&&function(S){S.window_size=2*S.w_size,J(S.head),S.max_lazy_match=h[S.level].max_lazy,S.good_match=h[S.level].good_length,S.nice_match=h[S.level].nice_length,S.max_chain_length=h[S.level].max_chain,S.strstart=0,S.block_start=0,S.lookahead=0,S.insert=0,S.match_length=S.prev_length=D-1,S.match_available=0,S.ins_h=0}(t.state),z}function R(t,z,S,a,i,m){if(!t)return u;var A=1;if(z===r&&(z=6),a<0?(A=0,a=-a):15<a&&(A=2,a-=16),i<1||v<i||S!==f||a<8||15<a||z<0||9<z||m<0||d<m)return et(t,u);a===8&&(a=9);var O=new ct;return(t.state=O).strm=t,O.wrap=A,O.gzhead=null,O.w_bits=a,O.w_size=1<<O.w_bits,O.w_mask=O.w_size-1,O.hash_bits=i+7,O.hash_size=1<<O.hash_bits,O.hash_mask=O.hash_size-1,O.hash_shift=~~((O.hash_bits+D-1)/D),O.window=new l.Buf8(2*O.w_size),O.head=new l.Buf16(O.hash_size),O.prev=new l.Buf16(O.w_size),O.lit_bufsize=1<<i+6,O.pending_buf_size=4*O.lit_bufsize,O.pending_buf=new l.Buf8(O.pending_buf_size),O.d_buf=1*O.lit_bufsize,O.l_buf=3*O.lit_bufsize,O.level=z,O.strategy=m,O.method=S,mt(t)}h=[new at(0,0,0,0,function(t,z){var S=65535;for(S>t.pending_buf_size-5&&(S=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ot(t),t.lookahead===0&&z===p)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+S;if((t.strstart===0||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,N(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Y&&(N(t,!1),t.strm.avail_out===0))return e}return t.insert=0,z===y?(N(t,!0),t.strm.avail_out===0?Q:Z):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),e)}),new at(4,4,8,4,ft),new at(4,5,16,8,ft),new at(4,6,32,32,ft),new at(4,4,16,16,nt),new at(8,16,32,32,nt),new at(8,16,128,128,nt),new at(8,32,128,256,nt),new at(32,128,258,1024,nt),new at(32,258,258,4096,nt)],x.deflateInit=function(t,z){return R(t,z,f,15,8,0)},x.deflateInit2=R,x.deflateReset=mt,x.deflateResetKeep=ht,x.deflateSetHeader=function(t,z){return t&&t.state?t.state.wrap!==2?u:(t.state.gzhead=z,s):u},x.deflate=function(t,z){var S,a,i,m;if(!t||!t.state||5<z||z<0)return t?et(t,u):u;if(a=t.state,!t.output||!t.input&&t.avail_in!==0||a.status===666&&z!==y)return et(t,t.avail_out===0?-5:u);if(a.strm=t,S=a.last_flush,a.last_flush=z,a.status===g)if(a.wrap===2)t.adler=0,X(a,31),X(a,139),X(a,8),a.gzhead?(X(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),X(a,255&a.gzhead.time),X(a,a.gzhead.time>>8&255),X(a,a.gzhead.time>>16&255),X(a,a.gzhead.time>>24&255),X(a,a.level===9?2:2<=a.strategy||a.level<2?4:0),X(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(X(a,255&a.gzhead.extra.length),X(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=b(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(X(a,0),X(a,0),X(a,0),X(a,0),X(a,0),X(a,a.level===9?2:2<=a.strategy||a.level<2?4:0),X(a,3),a.status=F);else{var A=f+(a.w_bits-8<<4)<<8;A|=(2<=a.strategy||a.level<2?0:a.level<6?1:a.level===6?2:3)<<6,a.strstart!==0&&(A|=32),A+=31-A%31,a.status=F,K(a,A),a.strstart!==0&&(K(a,t.adler>>>16),K(a,65535&t.adler)),t.adler=1}if(a.status===69)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(t.adler=b(t.adler,a.pending_buf,a.pending-i,i)),I(t),i=a.pending,a.pending!==a.pending_buf_size));)X(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(t.adler=b(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(a.status===73)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=b(t.adler,a.pending_buf,a.pending-i,i)),I(t),i=a.pending,a.pending===a.pending_buf_size)){m=1;break}m=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,X(a,m)}while(m!==0);a.gzhead.hcrc&&a.pending>i&&(t.adler=b(t.adler,a.pending_buf,a.pending-i,i)),m===0&&(a.gzindex=0,a.status=91)}else a.status=91;if(a.status===91)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=b(t.adler,a.pending_buf,a.pending-i,i)),I(t),i=a.pending,a.pending===a.pending_buf_size)){m=1;break}m=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,X(a,m)}while(m!==0);a.gzhead.hcrc&&a.pending>i&&(t.adler=b(t.adler,a.pending_buf,a.pending-i,i)),m===0&&(a.status=103)}else a.status=103;if(a.status===103&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&I(t),a.pending+2<=a.pending_buf_size&&(X(a,255&t.adler),X(a,t.adler>>8&255),t.adler=0,a.status=F)):a.status=F),a.pending!==0){if(I(t),t.avail_out===0)return a.last_flush=-1,s}else if(t.avail_in===0&&$(z)<=$(S)&&z!==y)return et(t,-5);if(a.status===666&&t.avail_in!==0)return et(t,-5);if(t.avail_in!==0||a.lookahead!==0||z!==p&&a.status!==666){var O=a.strategy===2?function(k,L){for(var M;;){if(k.lookahead===0&&(ot(k),k.lookahead===0)){if(L===p)return e;break}if(k.match_length=0,M=n._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,M&&(N(k,!1),k.strm.avail_out===0))return e}return k.insert=0,L===y?(N(k,!0),k.strm.avail_out===0?Q:Z):k.last_lit&&(N(k,!1),k.strm.avail_out===0)?e:U}(a,z):a.strategy===3?function(k,L){for(var M,P,H,st,tt=k.window;;){if(k.lookahead<=q){if(ot(k),k.lookahead<=q&&L===p)return e;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=D&&0<k.strstart&&(P=tt[H=k.strstart-1])===tt[++H]&&P===tt[++H]&&P===tt[++H]){st=k.strstart+q;do;while(P===tt[++H]&&P===tt[++H]&&P===tt[++H]&&P===tt[++H]&&P===tt[++H]&&P===tt[++H]&&P===tt[++H]&&P===tt[++H]&&H<st);k.match_length=q-(st-H),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=D?(M=n._tr_tally(k,1,k.match_length-D),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(M=n._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),M&&(N(k,!1),k.strm.avail_out===0))return e}return k.insert=0,L===y?(N(k,!0),k.strm.avail_out===0?Q:Z):k.last_lit&&(N(k,!1),k.strm.avail_out===0)?e:U}(a,z):h[a.level].func(a,z);if(O!==Q&&O!==Z||(a.status=666),O===e||O===Q)return t.avail_out===0&&(a.last_flush=-1),s;if(O===U&&(z===1?n._tr_align(a):z!==5&&(n._tr_stored_block(a,0,0,!1),z===3&&(J(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),I(t),t.avail_out===0))return a.last_flush=-1,s}return z!==y?s:a.wrap<=0?1:(a.wrap===2?(X(a,255&t.adler),X(a,t.adler>>8&255),X(a,t.adler>>16&255),X(a,t.adler>>24&255),X(a,255&t.total_in),X(a,t.total_in>>8&255),X(a,t.total_in>>16&255),X(a,t.total_in>>24&255)):(K(a,t.adler>>>16),K(a,65535&t.adler)),I(t),0<a.wrap&&(a.wrap=-a.wrap),a.pending!==0?s:1)},x.deflateEnd=function(t){var z;return t&&t.state?(z=t.state.status)!==g&&z!==69&&z!==73&&z!==91&&z!==103&&z!==F&&z!==666?et(t,u):(t.state=null,z===F?et(t,-3):s):u},x.deflateSetDictionary=function(t,z){var S,a,i,m,A,O,k,L,M=z.length;if(!t||!t.state||(m=(S=t.state).wrap)===2||m===1&&S.status!==g||S.lookahead)return u;for(m===1&&(t.adler=c(t.adler,z,M,0)),S.wrap=0,M>=S.w_size&&(m===0&&(J(S.head),S.strstart=0,S.block_start=0,S.insert=0),L=new l.Buf8(S.w_size),l.arraySet(L,z,M-S.w_size,S.w_size,0),z=L,M=S.w_size),A=t.avail_in,O=t.next_in,k=t.input,t.avail_in=M,t.next_in=0,t.input=z,ot(S);S.lookahead>=D;){for(a=S.strstart,i=S.lookahead-(D-1);S.ins_h=(S.ins_h<<S.hash_shift^S.window[a+D-1])&S.hash_mask,S.prev[a&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=a,a++,--i;);S.strstart=a,S.lookahead=D-1,ot(S)}return S.strstart+=S.lookahead,S.block_start=S.strstart,S.insert=S.lookahead,S.lookahead=0,S.match_length=S.prev_length=D-1,S.match_available=0,t.next_in=O,t.input=k,t.avail_in=A,S.wrap=m,s},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(_,W,x){W.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(_,W,x){W.exports=function(h,l){var n,c,b,w,p,y,s,u,r,d,o,f,v,E,C,B,T,j,D,q,Y,g,F,e,U;n=h.state,c=h.next_in,e=h.input,b=c+(h.avail_in-5),w=h.next_out,U=h.output,p=w-(l-h.avail_out),y=w+(h.avail_out-257),s=n.dmax,u=n.wsize,r=n.whave,d=n.wnext,o=n.window,f=n.hold,v=n.bits,E=n.lencode,C=n.distcode,B=(1<<n.lenbits)-1,T=(1<<n.distbits)-1;t:do{v<15&&(f+=e[c++]<<v,v+=8,f+=e[c++]<<v,v+=8),j=E[f&B];e:for(;;){if(f>>>=D=j>>>24,v-=D,(D=j>>>16&255)===0)U[w++]=65535&j;else{if(!(16&D)){if(!(64&D)){j=E[(65535&j)+(f&(1<<D)-1)];continue e}if(32&D){n.mode=12;break t}h.msg="invalid literal/length code",n.mode=30;break t}q=65535&j,(D&=15)&&(v<D&&(f+=e[c++]<<v,v+=8),q+=f&(1<<D)-1,f>>>=D,v-=D),v<15&&(f+=e[c++]<<v,v+=8,f+=e[c++]<<v,v+=8),j=C[f&T];r:for(;;){if(f>>>=D=j>>>24,v-=D,!(16&(D=j>>>16&255))){if(!(64&D)){j=C[(65535&j)+(f&(1<<D)-1)];continue r}h.msg="invalid distance code",n.mode=30;break t}if(Y=65535&j,v<(D&=15)&&(f+=e[c++]<<v,(v+=8)<D&&(f+=e[c++]<<v,v+=8)),s<(Y+=f&(1<<D)-1)){h.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=D,v-=D,(D=w-p)<Y){if(r<(D=Y-D)&&n.sane){h.msg="invalid distance too far back",n.mode=30;break t}if(F=o,(g=0)===d){if(g+=u-D,D<q){for(q-=D;U[w++]=o[g++],--D;);g=w-Y,F=U}}else if(d<D){if(g+=u+d-D,(D-=d)<q){for(q-=D;U[w++]=o[g++],--D;);if(g=0,d<q){for(q-=D=d;U[w++]=o[g++],--D;);g=w-Y,F=U}}}else if(g+=d-D,D<q){for(q-=D;U[w++]=o[g++],--D;);g=w-Y,F=U}for(;2<q;)U[w++]=F[g++],U[w++]=F[g++],U[w++]=F[g++],q-=3;q&&(U[w++]=F[g++],1<q&&(U[w++]=F[g++]))}else{for(g=w-Y;U[w++]=U[g++],U[w++]=U[g++],U[w++]=U[g++],2<(q-=3););q&&(U[w++]=U[g++],1<q&&(U[w++]=U[g++]))}break}}break}}while(c<b&&w<y);c-=q=v>>3,f&=(1<<(v-=q<<3))-1,h.next_in=c,h.next_out=w,h.avail_in=c<b?b-c+5:5-(c-b),h.avail_out=w<y?y-w+257:257-(w-y),n.hold=f,n.bits=v}},{}],49:[function(_,W,x){var h=_("../utils/common"),l=_("./adler32"),n=_("./crc32"),c=_("./inffast"),b=_("./inftrees"),w=1,p=2,y=0,s=-2,u=1,r=852,d=592;function o(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(g){var F;return g&&g.state?(F=g.state,g.total_in=g.total_out=F.total=0,g.msg="",F.wrap&&(g.adler=1&F.wrap),F.mode=u,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new h.Buf32(r),F.distcode=F.distdyn=new h.Buf32(d),F.sane=1,F.back=-1,y):s}function E(g){var F;return g&&g.state?((F=g.state).wsize=0,F.whave=0,F.wnext=0,v(g)):s}function C(g,F){var e,U;return g&&g.state?(U=g.state,F<0?(e=0,F=-F):(e=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?s:(U.window!==null&&U.wbits!==F&&(U.window=null),U.wrap=e,U.wbits=F,E(g))):s}function B(g,F){var e,U;return g?(U=new f,(g.state=U).window=null,(e=C(g,F))!==y&&(g.state=null),e):s}var T,j,D=!0;function q(g){if(D){var F;for(T=new h.Buf32(512),j=new h.Buf32(32),F=0;F<144;)g.lens[F++]=8;for(;F<256;)g.lens[F++]=9;for(;F<280;)g.lens[F++]=7;for(;F<288;)g.lens[F++]=8;for(b(w,g.lens,0,288,T,0,g.work,{bits:9}),F=0;F<32;)g.lens[F++]=5;b(p,g.lens,0,32,j,0,g.work,{bits:5}),D=!1}g.lencode=T,g.lenbits=9,g.distcode=j,g.distbits=5}function Y(g,F,e,U){var Q,Z=g.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new h.Buf8(Z.wsize)),U>=Z.wsize?(h.arraySet(Z.window,F,e-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(U<(Q=Z.wsize-Z.wnext)&&(Q=U),h.arraySet(Z.window,F,e-U,Q,Z.wnext),(U-=Q)?(h.arraySet(Z.window,F,e-U,U,0),Z.wnext=U,Z.whave=Z.wsize):(Z.wnext+=Q,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=Q))),0}x.inflateReset=E,x.inflateReset2=C,x.inflateResetKeep=v,x.inflateInit=function(g){return B(g,15)},x.inflateInit2=B,x.inflate=function(g,F){var e,U,Q,Z,et,$,J,I,N,X,K,G,ot,ft,nt,at,ct,ht,mt,R,t,z,S,a,i=0,m=new h.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return s;(e=g.state).mode===12&&(e.mode=13),et=g.next_out,Q=g.output,J=g.avail_out,Z=g.next_in,U=g.input,$=g.avail_in,I=e.hold,N=e.bits,X=$,K=J,z=y;t:for(;;)switch(e.mode){case u:if(e.wrap===0){e.mode=13;break}for(;N<16;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(2&e.wrap&&I===35615){m[e.check=0]=255&I,m[1]=I>>>8&255,e.check=n(e.check,m,2,0),N=I=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&I)<<8)+(I>>8))%31){g.msg="incorrect header check",e.mode=30;break}if((15&I)!=8){g.msg="unknown compression method",e.mode=30;break}if(N-=4,t=8+(15&(I>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){g.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,g.adler=e.check=1,e.mode=512&I?10:12,N=I=0;break;case 2:for(;N<16;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(e.flags=I,(255&e.flags)!=8){g.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){g.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=I>>8&1),512&e.flags&&(m[0]=255&I,m[1]=I>>>8&255,e.check=n(e.check,m,2,0)),N=I=0,e.mode=3;case 3:for(;N<32;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}e.head&&(e.head.time=I),512&e.flags&&(m[0]=255&I,m[1]=I>>>8&255,m[2]=I>>>16&255,m[3]=I>>>24&255,e.check=n(e.check,m,4,0)),N=I=0,e.mode=4;case 4:for(;N<16;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}e.head&&(e.head.xflags=255&I,e.head.os=I>>8),512&e.flags&&(m[0]=255&I,m[1]=I>>>8&255,e.check=n(e.check,m,2,0)),N=I=0,e.mode=5;case 5:if(1024&e.flags){for(;N<16;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}e.length=I,e.head&&(e.head.extra_len=I),512&e.flags&&(m[0]=255&I,m[1]=I>>>8&255,e.check=n(e.check,m,2,0)),N=I=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&($<(G=e.length)&&(G=$),G&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),h.arraySet(e.head.extra,U,Z,G,t)),512&e.flags&&(e.check=n(e.check,U,G,Z)),$-=G,Z+=G,e.length-=G),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if($===0)break t;for(G=0;t=U[Z+G++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&G<$;);if(512&e.flags&&(e.check=n(e.check,U,G,Z)),$-=G,Z+=G,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if($===0)break t;for(G=0;t=U[Z+G++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&G<$;);if(512&e.flags&&(e.check=n(e.check,U,G,Z)),$-=G,Z+=G,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;N<16;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(I!==(65535&e.check)){g.msg="header crc mismatch",e.mode=30;break}N=I=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),g.adler=e.check=0,e.mode=12;break;case 10:for(;N<32;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}g.adler=e.check=o(I),N=I=0,e.mode=11;case 11:if(e.havedict===0)return g.next_out=et,g.avail_out=J,g.next_in=Z,g.avail_in=$,e.hold=I,e.bits=N,2;g.adler=e.check=1,e.mode=12;case 12:if(F===5||F===6)break t;case 13:if(e.last){I>>>=7&N,N-=7&N,e.mode=27;break}for(;N<3;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}switch(e.last=1&I,N-=1,3&(I>>>=1)){case 0:e.mode=14;break;case 1:if(q(e),e.mode=20,F!==6)break;I>>>=2,N-=2;break t;case 2:e.mode=17;break;case 3:g.msg="invalid block type",e.mode=30}I>>>=2,N-=2;break;case 14:for(I>>>=7&N,N-=7&N;N<32;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if((65535&I)!=(I>>>16^65535)){g.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&I,N=I=0,e.mode=15,F===6)break t;case 15:e.mode=16;case 16:if(G=e.length){if($<G&&(G=$),J<G&&(G=J),G===0)break t;h.arraySet(Q,U,Z,G,et),$-=G,Z+=G,J-=G,et+=G,e.length-=G;break}e.mode=12;break;case 17:for(;N<14;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(e.nlen=257+(31&I),I>>>=5,N-=5,e.ndist=1+(31&I),I>>>=5,N-=5,e.ncode=4+(15&I),I>>>=4,N-=4,286<e.nlen||30<e.ndist){g.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;N<3;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}e.lens[A[e.have++]]=7&I,I>>>=3,N-=3}for(;e.have<19;)e.lens[A[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,S={bits:e.lenbits},z=b(0,e.lens,0,19,e.lencode,0,e.work,S),e.lenbits=S.bits,z){g.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;at=(i=e.lencode[I&(1<<e.lenbits)-1])>>>16&255,ct=65535&i,!((nt=i>>>24)<=N);){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(ct<16)I>>>=nt,N-=nt,e.lens[e.have++]=ct;else{if(ct===16){for(a=nt+2;N<a;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(I>>>=nt,N-=nt,e.have===0){g.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],G=3+(3&I),I>>>=2,N-=2}else if(ct===17){for(a=nt+3;N<a;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}N-=nt,t=0,G=3+(7&(I>>>=nt)),I>>>=3,N-=3}else{for(a=nt+7;N<a;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}N-=nt,t=0,G=11+(127&(I>>>=nt)),I>>>=7,N-=7}if(e.have+G>e.nlen+e.ndist){g.msg="invalid bit length repeat",e.mode=30;break}for(;G--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){g.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,S={bits:e.lenbits},z=b(w,e.lens,0,e.nlen,e.lencode,0,e.work,S),e.lenbits=S.bits,z){g.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,S={bits:e.distbits},z=b(p,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,S),e.distbits=S.bits,z){g.msg="invalid distances set",e.mode=30;break}if(e.mode=20,F===6)break t;case 20:e.mode=21;case 21:if(6<=$&&258<=J){g.next_out=et,g.avail_out=J,g.next_in=Z,g.avail_in=$,e.hold=I,e.bits=N,c(g,K),et=g.next_out,Q=g.output,J=g.avail_out,Z=g.next_in,U=g.input,$=g.avail_in,I=e.hold,N=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;at=(i=e.lencode[I&(1<<e.lenbits)-1])>>>16&255,ct=65535&i,!((nt=i>>>24)<=N);){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(at&&!(240&at)){for(ht=nt,mt=at,R=ct;at=(i=e.lencode[R+((I&(1<<ht+mt)-1)>>ht)])>>>16&255,ct=65535&i,!(ht+(nt=i>>>24)<=N);){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}I>>>=ht,N-=ht,e.back+=ht}if(I>>>=nt,N-=nt,e.back+=nt,e.length=ct,at===0){e.mode=26;break}if(32&at){e.back=-1,e.mode=12;break}if(64&at){g.msg="invalid literal/length code",e.mode=30;break}e.extra=15&at,e.mode=22;case 22:if(e.extra){for(a=e.extra;N<a;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}e.length+=I&(1<<e.extra)-1,I>>>=e.extra,N-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;at=(i=e.distcode[I&(1<<e.distbits)-1])>>>16&255,ct=65535&i,!((nt=i>>>24)<=N);){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(!(240&at)){for(ht=nt,mt=at,R=ct;at=(i=e.distcode[R+((I&(1<<ht+mt)-1)>>ht)])>>>16&255,ct=65535&i,!(ht+(nt=i>>>24)<=N);){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}I>>>=ht,N-=ht,e.back+=ht}if(I>>>=nt,N-=nt,e.back+=nt,64&at){g.msg="invalid distance code",e.mode=30;break}e.offset=ct,e.extra=15&at,e.mode=24;case 24:if(e.extra){for(a=e.extra;N<a;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}e.offset+=I&(1<<e.extra)-1,I>>>=e.extra,N-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){g.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(J===0)break t;if(G=K-J,e.offset>G){if((G=e.offset-G)>e.whave&&e.sane){g.msg="invalid distance too far back",e.mode=30;break}ot=G>e.wnext?(G-=e.wnext,e.wsize-G):e.wnext-G,G>e.length&&(G=e.length),ft=e.window}else ft=Q,ot=et-e.offset,G=e.length;for(J<G&&(G=J),J-=G,e.length-=G;Q[et++]=ft[ot++],--G;);e.length===0&&(e.mode=21);break;case 26:if(J===0)break t;Q[et++]=e.length,J--,e.mode=21;break;case 27:if(e.wrap){for(;N<32;){if($===0)break t;$--,I|=U[Z++]<<N,N+=8}if(K-=J,g.total_out+=K,e.total+=K,K&&(g.adler=e.check=e.flags?n(e.check,Q,K,et-K):l(e.check,Q,K,et-K)),K=J,(e.flags?I:o(I))!==e.check){g.msg="incorrect data check",e.mode=30;break}N=I=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;N<32;){if($===0)break t;$--,I+=U[Z++]<<N,N+=8}if(I!==(4294967295&e.total)){g.msg="incorrect length check",e.mode=30;break}N=I=0}e.mode=29;case 29:z=1;break t;case 30:z=-3;break t;case 31:return-4;case 32:default:return s}return g.next_out=et,g.avail_out=J,g.next_in=Z,g.avail_in=$,e.hold=I,e.bits=N,(e.wsize||K!==g.avail_out&&e.mode<30&&(e.mode<27||F!==4))&&Y(g,g.output,g.next_out,K-g.avail_out)?(e.mode=31,-4):(X-=g.avail_in,K-=g.avail_out,g.total_in+=X,g.total_out+=K,e.total+=K,e.wrap&&K&&(g.adler=e.check=e.flags?n(e.check,Q,K,g.next_out-K):l(e.check,Q,K,g.next_out-K)),g.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(X==0&&K===0||F===4)&&z===y&&(z=-5),z)},x.inflateEnd=function(g){if(!g||!g.state)return s;var F=g.state;return F.window&&(F.window=null),g.state=null,y},x.inflateGetHeader=function(g,F){var e;return g&&g.state&&2&(e=g.state).wrap?((e.head=F).done=!1,y):s},x.inflateSetDictionary=function(g,F){var e,U=F.length;return g&&g.state?(e=g.state).wrap!==0&&e.mode!==11?s:e.mode===11&&l(1,F,U,0)!==e.check?-3:Y(g,F,U,U)?(e.mode=31,-4):(e.havedict=1,y):s},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(_,W,x){var h=_("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];W.exports=function(w,p,y,s,u,r,d,o){var f,v,E,C,B,T,j,D,q,Y=o.bits,g=0,F=0,e=0,U=0,Q=0,Z=0,et=0,$=0,J=0,I=0,N=null,X=0,K=new h.Buf16(16),G=new h.Buf16(16),ot=null,ft=0;for(g=0;g<=15;g++)K[g]=0;for(F=0;F<s;F++)K[p[y+F]]++;for(Q=Y,U=15;1<=U&&K[U]===0;U--);if(U<Q&&(Q=U),U===0)return u[r++]=20971520,u[r++]=20971520,o.bits=1,0;for(e=1;e<U&&K[e]===0;e++);for(Q<e&&(Q=e),g=$=1;g<=15;g++)if($<<=1,($-=K[g])<0)return-1;if(0<$&&(w===0||U!==1))return-1;for(G[1]=0,g=1;g<15;g++)G[g+1]=G[g]+K[g];for(F=0;F<s;F++)p[y+F]!==0&&(d[G[p[y+F]]++]=F);if(T=w===0?(N=ot=d,19):w===1?(N=l,X-=257,ot=n,ft-=257,256):(N=c,ot=b,-1),g=e,B=r,et=F=I=0,E=-1,C=(J=1<<(Z=Q))-1,w===1&&852<J||w===2&&592<J)return 1;for(;;){for(j=g-et,q=d[F]<T?(D=0,d[F]):d[F]>T?(D=ot[ft+d[F]],N[X+d[F]]):(D=96,0),f=1<<g-et,e=v=1<<Z;u[B+(I>>et)+(v-=f)]=j<<24|D<<16|q|0,v!==0;);for(f=1<<g-1;I&f;)f>>=1;if(f!==0?(I&=f-1,I+=f):I=0,F++,--K[g]==0){if(g===U)break;g=p[y+d[F]]}if(Q<g&&(I&C)!==E){for(et===0&&(et=Q),B+=e,$=1<<(Z=g-et);Z+et<U&&!(($-=K[Z+et])<=0);)Z++,$<<=1;if(J+=1<<Z,w===1&&852<J||w===2&&592<J)return 1;u[E=I&C]=Q<<24|Z<<16|B-r|0}}return I!==0&&(u[B+I]=g-et<<24|64<<16|0),o.bits=Q,0}},{"../utils/common":41}],51:[function(_,W,x){W.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(_,W,x){var h=_("../utils/common"),l=0,n=1;function c(i){for(var m=i.length;0<=--m;)i[m]=0}var b=0,w=29,p=256,y=p+1+w,s=30,u=19,r=2*y+1,d=15,o=16,f=7,v=256,E=16,C=17,B=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(y+2));c(Y);var g=new Array(2*s);c(g);var F=new Array(512);c(F);var e=new Array(256);c(e);var U=new Array(w);c(U);var Q,Z,et,$=new Array(s);function J(i,m,A,O,k){this.static_tree=i,this.extra_bits=m,this.extra_base=A,this.elems=O,this.max_length=k,this.has_stree=i&&i.length}function I(i,m){this.dyn_tree=i,this.max_code=0,this.stat_desc=m}function N(i){return i<256?F[i]:F[256+(i>>>7)]}function X(i,m){i.pending_buf[i.pending++]=255&m,i.pending_buf[i.pending++]=m>>>8&255}function K(i,m,A){i.bi_valid>o-A?(i.bi_buf|=m<<i.bi_valid&65535,X(i,i.bi_buf),i.bi_buf=m>>o-i.bi_valid,i.bi_valid+=A-o):(i.bi_buf|=m<<i.bi_valid&65535,i.bi_valid+=A)}function G(i,m,A){K(i,A[2*m],A[2*m+1])}function ot(i,m){for(var A=0;A|=1&i,i>>>=1,A<<=1,0<--m;);return A>>>1}function ft(i,m,A){var O,k,L=new Array(d+1),M=0;for(O=1;O<=d;O++)L[O]=M=M+A[O-1]<<1;for(k=0;k<=m;k++){var P=i[2*k+1];P!==0&&(i[2*k]=ot(L[P]++,P))}}function nt(i){var m;for(m=0;m<y;m++)i.dyn_ltree[2*m]=0;for(m=0;m<s;m++)i.dyn_dtree[2*m]=0;for(m=0;m<u;m++)i.bl_tree[2*m]=0;i.dyn_ltree[2*v]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function at(i){8<i.bi_valid?X(i,i.bi_buf):0<i.bi_valid&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function ct(i,m,A,O){var k=2*m,L=2*A;return i[k]<i[L]||i[k]===i[L]&&O[m]<=O[A]}function ht(i,m,A){for(var O=i.heap[A],k=A<<1;k<=i.heap_len&&(k<i.heap_len&&ct(m,i.heap[k+1],i.heap[k],i.depth)&&k++,!ct(m,O,i.heap[k],i.depth));)i.heap[A]=i.heap[k],A=k,k<<=1;i.heap[A]=O}function mt(i,m,A){var O,k,L,M,P=0;if(i.last_lit!==0)for(;O=i.pending_buf[i.d_buf+2*P]<<8|i.pending_buf[i.d_buf+2*P+1],k=i.pending_buf[i.l_buf+P],P++,O===0?G(i,k,m):(G(i,(L=e[k])+p+1,m),(M=T[L])!==0&&K(i,k-=U[L],M),G(i,L=N(--O),A),(M=j[L])!==0&&K(i,O-=$[L],M)),P<i.last_lit;);G(i,v,m)}function R(i,m){var A,O,k,L=m.dyn_tree,M=m.stat_desc.static_tree,P=m.stat_desc.has_stree,H=m.stat_desc.elems,st=-1;for(i.heap_len=0,i.heap_max=r,A=0;A<H;A++)L[2*A]!==0?(i.heap[++i.heap_len]=st=A,i.depth[A]=0):L[2*A+1]=0;for(;i.heap_len<2;)L[2*(k=i.heap[++i.heap_len]=st<2?++st:0)]=1,i.depth[k]=0,i.opt_len--,P&&(i.static_len-=M[2*k+1]);for(m.max_code=st,A=i.heap_len>>1;1<=A;A--)ht(i,L,A);for(k=H;A=i.heap[1],i.heap[1]=i.heap[i.heap_len--],ht(i,L,1),O=i.heap[1],i.heap[--i.heap_max]=A,i.heap[--i.heap_max]=O,L[2*k]=L[2*A]+L[2*O],i.depth[k]=(i.depth[A]>=i.depth[O]?i.depth[A]:i.depth[O])+1,L[2*A+1]=L[2*O+1]=k,i.heap[1]=k++,ht(i,L,1),2<=i.heap_len;);i.heap[--i.heap_max]=i.heap[1],function(tt,pt){var yt,gt,wt,ut,Ct,It,_t=pt.dyn_tree,Nt=pt.max_code,Bt=pt.stat_desc.static_tree,Tt=pt.stat_desc.has_stree,Ft=pt.stat_desc.extra_bits,Rt=pt.stat_desc.extra_base,xt=pt.stat_desc.max_length,At=0;for(ut=0;ut<=d;ut++)tt.bl_count[ut]=0;for(_t[2*tt.heap[tt.heap_max]+1]=0,yt=tt.heap_max+1;yt<r;yt++)xt<(ut=_t[2*_t[2*(gt=tt.heap[yt])+1]+1]+1)&&(ut=xt,At++),_t[2*gt+1]=ut,Nt<gt||(tt.bl_count[ut]++,Ct=0,Rt<=gt&&(Ct=Ft[gt-Rt]),It=_t[2*gt],tt.opt_len+=It*(ut+Ct),Tt&&(tt.static_len+=It*(Bt[2*gt+1]+Ct)));if(At!==0){do{for(ut=xt-1;tt.bl_count[ut]===0;)ut--;tt.bl_count[ut]--,tt.bl_count[ut+1]+=2,tt.bl_count[xt]--,At-=2}while(0<At);for(ut=xt;ut!==0;ut--)for(gt=tt.bl_count[ut];gt!==0;)Nt<(wt=tt.heap[--yt])||(_t[2*wt+1]!==ut&&(tt.opt_len+=(ut-_t[2*wt+1])*_t[2*wt],_t[2*wt+1]=ut),gt--)}}(i,m),ft(L,st,i.bl_count)}function t(i,m,A){var O,k,L=-1,M=m[1],P=0,H=7,st=4;for(M===0&&(H=138,st=3),m[2*(A+1)+1]=65535,O=0;O<=A;O++)k=M,M=m[2*(O+1)+1],++P<H&&k===M||(P<st?i.bl_tree[2*k]+=P:k!==0?(k!==L&&i.bl_tree[2*k]++,i.bl_tree[2*E]++):P<=10?i.bl_tree[2*C]++:i.bl_tree[2*B]++,L=k,st=(P=0)===M?(H=138,3):k===M?(H=6,3):(H=7,4))}function z(i,m,A){var O,k,L=-1,M=m[1],P=0,H=7,st=4;for(M===0&&(H=138,st=3),O=0;O<=A;O++)if(k=M,M=m[2*(O+1)+1],!(++P<H&&k===M)){if(P<st)for(;G(i,k,i.bl_tree),--P!=0;);else k!==0?(k!==L&&(G(i,k,i.bl_tree),P--),G(i,E,i.bl_tree),K(i,P-3,2)):P<=10?(G(i,C,i.bl_tree),K(i,P-3,3)):(G(i,B,i.bl_tree),K(i,P-11,7));L=k,st=(P=0)===M?(H=138,3):k===M?(H=6,3):(H=7,4)}}c($);var S=!1;function a(i,m,A,O){K(i,(b<<1)+(O?1:0),3),function(k,L,M,P){at(k),P&&(X(k,M),X(k,~M)),h.arraySet(k.pending_buf,k.window,L,M,k.pending),k.pending+=M}(i,m,A,!0)}x._tr_init=function(i){S||(function(){var m,A,O,k,L,M=new Array(d+1);for(k=O=0;k<w-1;k++)for(U[k]=O,m=0;m<1<<T[k];m++)e[O++]=k;for(e[O-1]=k,k=L=0;k<16;k++)for($[k]=L,m=0;m<1<<j[k];m++)F[L++]=k;for(L>>=7;k<s;k++)for($[k]=L<<7,m=0;m<1<<j[k]-7;m++)F[256+L++]=k;for(A=0;A<=d;A++)M[A]=0;for(m=0;m<=143;)Y[2*m+1]=8,m++,M[8]++;for(;m<=255;)Y[2*m+1]=9,m++,M[9]++;for(;m<=279;)Y[2*m+1]=7,m++,M[7]++;for(;m<=287;)Y[2*m+1]=8,m++,M[8]++;for(ft(Y,y+1,M),m=0;m<s;m++)g[2*m+1]=5,g[2*m]=ot(m,5);Q=new J(Y,T,p+1,y,d),Z=new J(g,j,0,s,d),et=new J(new Array(0),D,0,u,f)}(),S=!0),i.l_desc=new I(i.dyn_ltree,Q),i.d_desc=new I(i.dyn_dtree,Z),i.bl_desc=new I(i.bl_tree,et),i.bi_buf=0,i.bi_valid=0,nt(i)},x._tr_stored_block=a,x._tr_flush_block=function(i,m,A,O){var k,L,M=0;0<i.level?(i.strm.data_type===2&&(i.strm.data_type=function(P){var H,st=4093624447;for(H=0;H<=31;H++,st>>>=1)if(1&st&&P.dyn_ltree[2*H]!==0)return l;if(P.dyn_ltree[18]!==0||P.dyn_ltree[20]!==0||P.dyn_ltree[26]!==0)return n;for(H=32;H<p;H++)if(P.dyn_ltree[2*H]!==0)return n;return l}(i)),R(i,i.l_desc),R(i,i.d_desc),M=function(P){var H;for(t(P,P.dyn_ltree,P.l_desc.max_code),t(P,P.dyn_dtree,P.d_desc.max_code),R(P,P.bl_desc),H=u-1;3<=H&&P.bl_tree[2*q[H]+1]===0;H--);return P.opt_len+=3*(H+1)+5+5+4,H}(i),k=i.opt_len+3+7>>>3,(L=i.static_len+3+7>>>3)<=k&&(k=L)):k=L=A+5,A+4<=k&&m!==-1?a(i,m,A,O):i.strategy===4||L===k?(K(i,2+(O?1:0),3),mt(i,Y,g)):(K(i,4+(O?1:0),3),function(P,H,st,tt){var pt;for(K(P,H-257,5),K(P,st-1,5),K(P,tt-4,4),pt=0;pt<tt;pt++)K(P,P.bl_tree[2*q[pt]+1],3);z(P,P.dyn_ltree,H-1),z(P,P.dyn_dtree,st-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,M+1),mt(i,i.dyn_ltree,i.dyn_dtree)),nt(i),O&&at(i)},x._tr_tally=function(i,m,A){return i.pending_buf[i.d_buf+2*i.last_lit]=m>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&m,i.pending_buf[i.l_buf+i.last_lit]=255&A,i.last_lit++,m===0?i.dyn_ltree[2*A]++:(i.matches++,m--,i.dyn_ltree[2*(e[A]+p+1)]++,i.dyn_dtree[2*N(m)]++),i.last_lit===i.lit_bufsize-1},x._tr_align=function(i){K(i,2,3),G(i,v,Y),function(m){m.bi_valid===16?(X(m,m.bi_buf),m.bi_buf=0,m.bi_valid=0):8<=m.bi_valid&&(m.pending_buf[m.pending++]=255&m.bi_buf,m.bi_buf>>=8,m.bi_valid-=8)}(i)}},{"../utils/common":41}],53:[function(_,W,x){W.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(_,W,x){(function(h){(function(l,n){if(!l.setImmediate){var c,b,w,p,y=1,s={},u=!1,r=l.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(l);d=d&&d.setTimeout?d:l,c={}.toString.call(l.process)==="[object process]"?function(E){process.nextTick(function(){f(E)})}:function(){if(l.postMessage&&!l.importScripts){var E=!0,C=l.onmessage;return l.onmessage=function(){E=!1},l.postMessage("","*"),l.onmessage=C,E}}()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",v,!1):l.attachEvent("onmessage",v),function(E){l.postMessage(p+E,"*")}):l.MessageChannel?((w=new MessageChannel).port1.onmessage=function(E){f(E.data)},function(E){w.port2.postMessage(E)}):r&&"onreadystatechange"in r.createElement("script")?(b=r.documentElement,function(E){var C=r.createElement("script");C.onreadystatechange=function(){f(E),C.onreadystatechange=null,b.removeChild(C),C=null},b.appendChild(C)}):function(E){setTimeout(f,0,E)},d.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var C=new Array(arguments.length-1),B=0;B<C.length;B++)C[B]=arguments[B+1];var T={callback:E,args:C};return s[y]=T,c(y),y++},d.clearImmediate=o}function o(E){delete s[E]}function f(E){if(u)setTimeout(f,0,E);else{var C=s[E];if(C){u=!0;try{(function(B){var T=B.callback,j=B.args;switch(j.length){case 0:T();break;case 1:T(j[0]);break;case 2:T(j[0],j[1]);break;case 3:T(j[0],j[1],j[2]);break;default:T.apply(n,j)}})(C)}finally{o(E),u=!1}}}}function v(E){E.source===l&&typeof E.data=="string"&&E.data.indexOf(p)===0&&f(+E.data.slice(p.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Dt);var Mt=Dt.exports;const qt=jt(Mt),Ot={}.VITE_PUBLIC_BASE_URL||"https://academics-5bf1.onrender.com",St=()=>Ot?Ot.replace(/\/$/,""):typeof window<"u"?window.location.origin:"";function Xt(){const[it]=dt.useState(()=>{const R=localStorage.getItem("auth");return R?JSON.parse(R):null}),[lt,_]=dt.useState([]),[W,x]=dt.useState([]),[h,l]=dt.useState(!0),[n,c]=dt.useState(!1),[b,w]=dt.useState(!1),[p,y]=dt.useState([]),[s,u]=dt.useState(null),[r,d]=dt.useState(!1),[o,f]=dt.useState(!1),[v,E]=dt.useState("all"),[C,B]=dt.useState(""),[T,j]=dt.useState(""),[D,q]=dt.useState(!1),[Y,g]=dt.useState("active"),[F,e]=dt.useState(null),U=async()=>{await I(),B("Refreshed successfully"),setTimeout(()=>B(""),2e3)},{isPulling:Q,isRefreshing:Z,pullDistance:et,containerRef:$,threshold:J}=Zt(U,{enabled:!0,threshold:80});dt.useEffect(()=>{(it==null?void 0:it.role)==="staff"?I():l(!1)},[it]),dt.useEffect(()=>{const R=()=>{(it==null?void 0:it.role)==="staff"&&I(!0)};return window.addEventListener("notificationsUpdated",R),window.addEventListener("marksheetsUpdated",R),()=>{window.removeEventListener("notificationsUpdated",R),window.removeEventListener("marksheetsUpdated",R)}},[it]),Pt({dispatch_request:()=>{console.log(" Dispatch request notification triggered refresh"),I()},marksheet_dispatch:()=>{console.log(" Marksheet dispatch notification triggered refresh"),I()},marksheet_approval:()=>{console.log(" Marksheet approval notification triggered refresh"),I()}}),Ut(()=>I());const I=async(R=!1)=>{if(it){l(!0);try{const t=(it==null?void 0:it._id)||(it==null?void 0:it.id)||localStorage.getItem("userId"),z=R?{cache:!1,dedupe:!1}:void 0,S=await bt.get("/api/marksheets?staffId=".concat(t,"&status=verified_by_staff,dispatch_requested,approved_by_hod,rejected_by_hod"),z);if(S.success){const m=A=>(A==null?void 0:A.status)==="rescheduled_by_hod"?{...A,status:"dispatch_requested",dispatchRequest:{...A.dispatchRequest||{},hodResponse:null}}:A;_((S.marksheets||[]).map(m))}else _([]);let a={success:!1,marksheets:[]};try{if(a=await bt.get("/api/marksheets?staffId=".concat(t,"&status=dispatched"),z),a.success){const m=A=>(A==null?void 0:A.status)==="rescheduled_by_hod"?{...A,status:"dispatch_requested",dispatchRequest:{...A.dispatchRequest||{},hodResponse:null}}:A;x((a.marksheets||[]).map(m))}else x([])}catch(m){console.error("Error fetching dispatched marksheets:",m),x([])}const i=[...S&&S.success?S.marksheets:[],...a&&a.success?a.marksheets:[]];if(i&&i.length>0){const m=i.map(k=>({id:k.examinationId,name:k.examinationName,createdAt:k.createdAt})),O=Array.from(new Map(m.map(k=>[k.id,k])).values()).sort((k,L)=>new Date(L.createdAt)-new Date(k.createdAt))[0];e((O==null?void 0:O.id)||null)}else e(null)}catch(t){console.error("Error fetching marksheets:",t),_([]),e(null)}finally{l(!1)}}},N=async()=>{q(!0);try{await I()}finally{q(!1)}},X=dt.useCallback(async R=>{try{return await bt.post("/api/marksheets?action=request-dispatch",{marksheetId:R,staffId:it._id||it.id})}catch(t){return{success:!1,error:t.message}}},[it]),K=dt.useCallback(async R=>{B(""),j(""),y(t=>Array.from(new Set([...t,R])));try{const t=await X(R);t!=null&&t.success?(B("Dispatch request submitted for HOD approval."),_(z=>z.map(S=>S._id===R?{...S,status:"dispatch_requested",dispatchRequest:{...S.dispatchRequest||{},requestedAt:new Date().toISOString(),requestedBy:(it==null?void 0:it._id)||(it==null?void 0:it.id),hodResponse:null,hodComments:null,scheduledDispatchDate:null}}:S))):j((t==null?void 0:t.error)||"Failed to request dispatch")}catch(t){console.error(t),j(kt(t,"Could not submit dispatch request. Please try again."))}finally{y(t=>t.filter(z=>z!==R)),I()}},[X,it,I]),G=async()=>{const R=lt.filter(t=>t.status==="verified_by_staff");if(R.length!==0){B(""),j(""),c(!0);try{const t=[];for(const a of R){const i=await X(a._id);t.push(i)}const z=t.filter(a=>a==null?void 0:a.success).length,S=t.length-z;z>0&&B("Submitted ".concat(z," dispatch request").concat(z>1?"s":""," for approval.")),S>0&&j("Failed to submit ".concat(S," request").concat(S>1?"s":"",". Please try again."))}finally{c(!1),I()}}},ot=dt.useCallback(async R=>{var t;if(R!=null&&R._id){B(""),j(""),u(R._id);try{const z=St(),S=z?"".concat(z,"/api/generate-pdf?marksheetId=").concat(R._id,"&t=").concat(Date.now()):"",a=z?"".concat(z,"/api/generate-pdf?marksheetId=").concat(R._id,"&format=jpeg&t=").concat(Date.now()):"",i={marksheetId:R._id,marksheetPdfUrl:S,marksheetImageUrl:a};console.debug("Dispatch payload:",i);let m;try{m=await bt.post("".concat(z,"/api/whatsapp-dispatch?action=send-marksheet"),i,{timeout:6e4})}catch(A){const O=A&&(A.data||(t=A.data)!=null&&t.error)?A.data:null,L=(O?O.error||O.details||JSON.stringify(O):null)||A.message||"Failed to dispatch marksheet";throw new Error(L)}if(!m||!m.success){const A=m&&(m.details||m.error)||"Failed to dispatch marksheet";throw A.includes("Authenticate")||A.includes("authentication")?new Error("WhatsApp API authentication failed. Please verify EVOLUTION_API_KEY in .env file. See EVOLUTION_API_SETUP.md"):m&&m.setupGuide?new Error("".concat(A,". ").concat(m.setupGuide)):new Error(A)}B("Marksheet dispatched to parent via WhatsApp."),_(A=>A.map(O=>O._id===R._id?{...O,status:"dispatched"}:O)),x(A=>A.map(O=>O._id===R._id?{...O,status:"dispatched"}:O)),await I()}catch(z){console.error(z),j(kt(z,"Unable to dispatch marksheet. Please try again."))}finally{u(null)}}},[I]),ft=async()=>{const R=lt.filter(t=>t.status==="approved_by_hod");if(R.length!==0){B(""),j(""),d(!0);try{const t=St(),a=await(async(A,O,k=6)=>{const L=new Array(A.length);let M=0;const P=Array.from({length:Math.min(k,A.length)},async()=>{for(;;){const H=M;if(H>=A.length)break;M+=1;const st=A[H];try{L[H]=await O(st)}catch(tt){L[H]={success:!1,id:st._id,error:tt&&tt.message?tt.message:String(tt)}}}});return await Promise.all(P),L})(R,async A=>{var L;const O=t?"".concat(t,"/api/generate-pdf?marksheetId=").concat(A._id,"&t=").concat(Date.now()):"",k=t?"".concat(t,"/api/generate-pdf?marksheetId=").concat(A._id,"&format=jpeg&t=").concat(Date.now()):"";try{const M=await bt.post("".concat(t,"/api/whatsapp-dispatch?action=send-marksheet"),{marksheetId:A._id,marksheetPdfUrl:O,marksheetImageUrl:k},{timeout:6e4});return M&&M.success?(_(P=>P.map(H=>H._id===A._id?{...H,status:"dispatched"}:H)),{success:!0,id:A._id}):{success:!1,id:A._id,error:(M==null?void 0:M.error)||"Unknown API response"}}catch(M){const P=M&&(((L=M.data)==null?void 0:L.error)||M.data||M.message)||String(M);return{success:!1,id:A._id,error:P}}},6),i=a.filter(A=>A&&A.success).length,m=a.length-i;i>0&&B("Successfully sent ".concat(i," marksheet").concat(i>1?"s":""," via WhatsApp.")),m>0&&j("Failed to send ".concat(m," marksheet").concat(m>1?"s":"",". Please try sending them individually."))}catch(t){console.error(t),j(kt(t,"Could not send marksheets. Please try again."))}finally{d(!1),await I()}}},nt=dt.useMemo(()=>{const R=Y==="active"?lt:W;return[{id:"all",label:"All",count:R.length},{id:"verified_by_staff",label:"Ready",count:R.filter(t=>t.status==="verified_by_staff").length},{id:"dispatch_requested",label:"Pending",count:R.filter(t=>t.status==="dispatch_requested").length},{id:"approved_by_hod",label:"Approved",count:R.filter(t=>t.status==="approved_by_hod").length},{id:"rejected_by_hod",label:"Rejected",count:R.filter(t=>t.status==="rejected_by_hod").length},{id:"dispatched",label:"Dispatched",count:R.filter(t=>t.status==="dispatched").length}]},[lt,W,Y]),at=dt.useMemo(()=>{let R=Y==="active"?lt:W;return Y==="history"&&F&&(R=R.filter(z=>z.examinationId===F)),(v==="all"?R:R.filter(z=>z.status===v)).sort((z,S)=>{var m,A;const a=(((m=z.studentDetails)==null?void 0:m.regNumber)||"").toString().toLowerCase(),i=(((A=S.studentDetails)==null?void 0:A.regNumber)||"").toString().toLowerCase();return a.localeCompare(i,void 0,{numeric:!0,sensitivity:"base"})})},[lt,W,v,Y,F]),ct=dt.useMemo(()=>lt.filter(R=>R.status==="approved_by_hod").length,[lt]),ht={verified_by_staff:"bg-blue-100 text-blue-800",dispatch_requested:"bg-yellow-100 text-yellow-800",approved_by_hod:"bg-green-100 text-green-800",rejected_by_hod:"bg-red-100 text-red-800",dispatched:"bg-purple-100 text-purple-800"},mt={verified_by_staff:"",dispatch_requested:"",approved_by_hod:"",rejected_by_hod:"",dispatched:""};return!it||it.role!=="staff"?V("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:rt("div",{className:"glass-card p-8 rounded-3xl text-center",children:[V("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),V("p",{className:"text-gray-600",children:"Only staff members can manage dispatch requests."})]})}):rt("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[V($t,{isPulling:Q,isRefreshing:Z,pullDistance:et,threshold:J}),V("div",{ref:$,className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:rt("div",{className:"max-w-6xl mx-auto",children:[rt("div",{className:"text-center mb-8",children:[V("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-black text-gray-900 mb-4",children:"Dispatch Requests"}),rt("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:["Submit and track WhatsApp dispatch requests for verified marksheets.",V("br",{}),"Request approval, send reports, and manage dispatch status for your students."]})]}),V("div",{className:"glass-card p-8 rounded-3xl mb-8",children:h?rt("div",{className:"text-center py-12",children:[V("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),V("p",{className:"text-gray-600",children:"Loading marksheets..."})]}):rt(vt,{children:[rt("div",{className:"bg-blue-50 p-4 rounded-xl mb-6 text-blue-800",children:[V("strong",{children:"Tip:"})," Request dispatch after verifying marksheets. Once the HOD approves, you can send the report directly to parents via WhatsApp."]}),rt("div",{className:"flex items-center gap-2 mb-6 border-b border-gray-200",children:[rt("button",{onClick:()=>{g("active"),E("all")},className:"px-4 py-3 font-semibold text-sm border-b-2 transition-colors ".concat(Y==="active"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Active (",lt.length,")"]}),rt("button",{onClick:()=>{g("history"),E("all")},className:"px-4 py-3 font-semibold text-sm border-b-2 transition-colors ".concat(Y==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Dispatched History (",W.length,")"]})]}),Y==="active"&&lt.length===0||Y==="history"&&W.length===0?rt("div",{className:"text-center py-12",children:[V("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),V("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No marksheets available"}),V("p",{className:"text-gray-600",children:Y==="active"?"Import and verify marksheets to begin requesting dispatch approvals.":"No dispatched marksheets yet."})]}):rt(vt,{children:[V("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-6",children:Y==="active"&&rt(vt,{children:[V("div",{className:"flex flex-wrap items-center gap-2",children:nt.map(R=>rt("button",{onClick:()=>E(R.id),className:"px-3 py-2 rounded-full text-xs sm:text-sm font-medium border transition-colors duration-200 whitespace-nowrap ".concat(v===R.id?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:border-yellow-400"),children:[R.label,V("span",{className:"ml-1 inline-flex items-center justify-center px-1.5 py-0.5 rounded-full text-xs font-semibold ".concat(v===R.id?"bg-white/25 text-white":"bg-gray-100 text-gray-700"),children:R.count})]},R.id))}),V("div",{className:"ml-auto",children:V(Wt,{isLoading:D,onClick:N})})]})}),(C||T)&&rt("div",{className:"mt-0 mb-3 space-y-2",children:[C&&V("div",{className:"rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",children:C}),T&&V("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:T})]}),rt("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 mb-3",children:[Y==="active"&&rt("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[rt("button",{onClick:G,disabled:n||lt.every(R=>R.status!=="verified_by_staff"),className:"btn-fill inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(n||lt.every(R=>R.status!=="verified_by_staff")?"cursor-not-allowed border border-gray-200 text-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"),children:[n&&V("span",{className:"fill",style:{backgroundColor:"#60A5FA"},"aria-hidden":!0}),V("span",{className:"relative z-10 flex items-center gap-2",children:n?rt(vt,{children:[V("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Requesting..."]}):" Request All"})]}),rt("button",{onClick:ft,disabled:r||lt.every(R=>R.status!=="approved_by_hod"),className:"btn-fill inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(r||lt.every(R=>R.status!=="approved_by_hod")?"cursor-not-allowed border border-gray-200 text-gray-500":"bg-green-600 text-white hover:bg-green-700 transition-colors"),children:[r&&V("span",{className:"fill",style:{backgroundColor:"#16A34A"},"aria-hidden":!0}),V("span",{className:"relative z-10 flex items-center gap-2",children:r?rt(vt,{children:[V("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):" Send All"})]}),rt("button",{onClick:async()=>{var t,z;const R=lt.filter(S=>S.status==="approved_by_hod");if(!(!R||R.length===0)){B(""),j(""),f(!0);try{const S=new qt,a=Array.from(new Set(R.map(P=>P.examinationName||"exam"))),i=Array.from(new Set(R.map(P=>{var H;return((H=P.studentDetails)==null?void 0:H.department)||"dept"}))),m=Array.from(new Set(R.map(P=>{var H;return((H=P.studentDetails)==null?void 0:H.year)||"year"}))),A=Array.from(new Set(R.map(P=>{var H;return((H=P.studentDetails)==null?void 0:H.section)||"section"})));let O="marksheets_"+Date.now();if(a.length===1&&i.length===1&&m.length===1&&A.length===1){const P=a[0].replace(/\s+/g,"_"),H=String(i[0]).replace(/\s+/g,"_"),st=String(m[0]).replace(/\s+/g,"_"),tt=String(A[0]).replace(/\s+/g,"_");O="".concat(P,"-").concat(H,"-").concat(st,"-").concat(tt)}else a.length===1&&i.length===1&&m.length===1?O="".concat(a[0].replace(/\s+/g,"_"),"-").concat(i[0],"-").concat(m[0]):a.length===1&&(O="".concat(a[0].replace(/\s+/g,"_")));for(const P of R)try{const H=St(),st=Date.now(),tt=H?"".concat(H,"/api/generate-pdf?marksheetId=").concat(P._id,"&t=").concat(st):"/api/generate-pdf?marksheetId=".concat(P._id,"&t=").concat(st);try{const pt=await bt.get(tt,{responseType:"arrayBuffer",timeout:15e3}),yt="".concat(((t=P.studentDetails)==null?void 0:t.regNumber)||((z=P.studentDetails)==null?void 0:z.name)||P._id,"_").concat((P.marksheetId||"").toString()||"",".pdf").replace(/[^a-zA-Z0-9_\-\.]/g,"_");S.file(yt,pt)}catch(pt){console.warn("Failed to fetch PDF for",P._id,pt);continue}}catch(H){console.error("Error fetching PDF for marksheet",P._id,H)}const k=await S.generateAsync({type:"blob"}),L=document.createElement("a"),M=URL.createObjectURL(k);L.href=M,L.download="".concat(O,".zip"),document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(M),B("Prepared ".concat(R.length," marksheet").concat(R.length>1?"s":""," in ").concat(O,".zip"))}catch(S){console.error("Download all error:",S),j(kt(S,"Could not generate ZIP. Please try again."))}finally{f(!1)}}},disabled:o||ct===0,"aria-disabled":o||ct===0,title:o?"Preparing ZIP...":ct===0?"Disabled until HOD approval (no approved marksheets).":"Download all approved marksheets as ZIP",className:"btn-fill inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(o||ct===0?"cursor-not-allowed border border-gray-200 text-gray-500":"bg-indigo-600 text-white hover:bg-indigo-700 transition-colors"),children:[o&&V("span",{className:"fill",style:{backgroundColor:"#4F46E5"},"aria-hidden":!0}),V("span",{className:"relative z-10",children:o?"Preparing ZIP...":" Download All (ZIP)"})]}),rt("button",{onClick:async()=>{const R=lt;if(!(!R||R.length===0)){B(""),j(""),w(!0);try{const t=[];for(const a of R)try{const i=await bt.put("/api/marksheets",{marksheetId:a._id,regenerateSignatures:!0,recomputeResults:!0});i&&i.success?t.push({success:!0,id:a._id}):t.push({success:!1,id:a._id,error:(i==null?void 0:i.error)||(i==null?void 0:i.details)})}catch(i){t.push({success:!1,id:a._id,error:i.message})}const z=t.filter(a=>a.success).length,S=t.length-z;z>0&&B("Regenerated ".concat(z," marksheet").concat(z>1?"s":"",".")),S>0&&j("Failed to regenerate ".concat(S," marksheet").concat(S>1?"s":"","."))}finally{w(!1),await I()}}},disabled:b||lt.length===0,className:"btn-fill inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(b||lt.length===0?"cursor-not-allowed border border-gray-200 text-gray-500":"bg-yellow-500 text-white hover:bg-yellow-600 transition-colors"),children:[b&&V("span",{className:"fill",style:{backgroundColor:"#D97706"},"aria-hidden":!0}),V("span",{className:"relative z-10",children:b?"Regenerating...":" Regenerate All"})]})]}),Y==="history"&&V("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:V("button",{onClick:async()=>{const R=W.filter(t=>t.status==="dispatched");if(R.length!==0){B(""),j(""),d(!0);try{const t=[];for(const S of R)try{await ot(S),t.push({success:!0})}catch(a){t.push({success:!1,error:a.message})}const z=t.filter(S=>S.success).length;B("Successfully re-sent ".concat(z," marksheet").concat(z>1?"s":""," via WhatsApp."))}catch(t){j(kt(t,"Could not re-send history. Please try again."))}finally{d(!1)}}},disabled:r||W.length===0,className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(r||W.length===0?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 transition-colors"),children:r?"Sending...":" Resend All History"})})]}),V("div",{className:"space-y-4",children:at.map(R=>{var z,S,a,i,m,A;const t=[];return R.status==="verified_by_staff"&&t.push({label:"Request",icon:"",className:"border-blue-300 text-blue-600 hover:border-blue-500 hover:bg-blue-50",onClick:()=>K(R._id)}),R.status==="approved_by_hod"&&t.push({label:"Download",icon:"",className:"border-amber-300 text-amber-600 hover:border-amber-500 hover:bg-amber-50",onClick:async()=>{const O=Date.now(),k=St(),L=k?"".concat(k,"/api/generate-pdf?marksheetId=").concat(R._id,"&t=").concat(O):"/api/generate-pdf?marksheetId=".concat(R._id,"&t=").concat(O);window.open(L,"_blank");try{await bt.put("/api/marksheets",{marksheetId:R._id,status:"dispatched"}),_(M=>M.map(P=>P._id===R._id?{...P,status:"dispatched"}:P))}catch(M){console.error("Error marking marksheet as dispatched:",M)}}},{label:"Send",icon:"",className:"border-green-300 text-green-600 hover:border-green-500 hover:bg-green-50",onClick:()=>ot(R)}),R.status==="rejected_by_hod"&&t.push({label:"Review",icon:"",className:"border-red-300 text-red-600 hover:border-red-500 hover:bg-red-50",onClick:()=>navigate("/marksheets/".concat(R._id))}),R.status==="dispatched"&&t.push({label:"Download",icon:"",className:"border-amber-300 text-amber-600 hover:border-amber-500 hover:bg-amber-50",onClick:()=>window.open("/api/generate-pdf?marksheetId=".concat(R._id),"_blank")},{label:"Re-send",icon:"",className:"border-green-300 text-green-600 hover:border-green-500 hover:bg-green-50",onClick:()=>ot(R)}),V(Lt,{actions:t,children:rt("div",{className:"bg-white",children:[rt("div",{className:"p-4 sm:p-6 pb-3 sm:pb-4",children:[rt("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[rt("div",{className:"flex-1 min-w-0",children:[V("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1 break-words",children:(z=R.studentDetails)==null?void 0:z.name}),rt("p",{className:"text-xs sm:text-sm text-gray-600",children:[(S=R.studentDetails)==null?void 0:S.regNumber,"  ",Ht(R.studentDetails)]})]}),rt("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-semibold uppercase tracking-wide flex items-center gap-0.5 sm:gap-1 flex-shrink-0 whitespace-nowrap ".concat(ht[R.status]||"bg-gray-100 text-gray-700"),children:[V("span",{className:"text-xs sm:text-sm",children:mt[R.status]||""}),V("span",{className:"text-xs",children:(R.status||"").replace(/_/g," ")})]})]}),rt("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[rt("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 sm:gap-6 text-xs sm:text-sm flex-1",children:[rt("div",{children:[V("p",{className:"text-gray-500 mb-1 font-medium",children:"Parent:"}),V("p",{className:"font-medium text-gray-900 truncate",children:((a=R.studentDetails)==null?void 0:a.parentPhoneNumber)||""})]}),rt("div",{children:[V("p",{className:"text-gray-500 mb-1 font-medium",children:"Requested:"}),V("p",{className:"font-medium text-gray-900",children:(i=R.dispatchRequest)!=null&&i.requestedAt?new Date(R.dispatchRequest.requestedAt).toLocaleDateString():""})]}),rt("div",{children:[V("p",{className:"text-gray-500 mb-1 font-medium",children:"HOD Decision:"}),V("p",{className:"font-medium text-gray-900",children:(m=R.dispatchRequest)!=null&&m.hodResponse?R.dispatchRequest.hodResponse.toUpperCase():""})]})]}),rt("div",{className:"hidden sm:block w-full md:w-auto md:flex-shrink-0",children:[R.status==="verified_by_staff"&&V("button",{onClick:()=>K(R._id),disabled:p.includes(R._id),className:"w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(p.includes(R._id)?"bg-blue-300 cursor-wait":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"),children:p.includes(R._id)?"Requesting":"Request Dispatch"}),R.status==="approved_by_hod"&&V("button",{onClick:()=>ot(R),disabled:s===R._id,className:"w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(s===R._id?"bg-green-300 cursor-wait":"bg-green-600 hover:bg-green-700 focus:ring-green-500"),children:s===R._id?"Sending":"Send via WhatsApp"}),R.status==="approved_by_hod"&&V("button",{onClick:async O=>{O.preventDefault();const k=Date.now(),L=St(),M=L?"".concat(L,"/api/generate-pdf?marksheetId=").concat(R._id,"&t=").concat(k):"/api/generate-pdf?marksheetId=".concat(R._id,"&t=").concat(k);window.open(M,"_blank");try{await bt.put("/api/marksheets",{marksheetId:R._id,status:"dispatched"}),_(P=>P.map(H=>H._id===R._id?{...H,status:"dispatched"}:H))}catch(P){console.error("Error marking marksheet as dispatched:",P)}},className:"mt-2 block w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-yellow-600 border border-yellow-300 bg-white hover:bg-yellow-50 hover:border-yellow-400 text-center text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1",children:"Download PDF"}),R.status==="rejected_by_hod"&&V("a",{href:"/marksheets/".concat(R._id),className:"block w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-red-600 border border-red-200 bg-white hover:bg-red-50 text-center text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:"Review Marksheet"}),R.status==="dispatched"&&rt(vt,{children:[V("button",{onClick:()=>ot(R),disabled:s===R._id,className:"w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(s===R._id?"bg-green-300 cursor-wait":"bg-green-600 hover:bg-green-700 focus:ring-green-500"),children:s===R._id?"Sending":" Re-send"}),V("a",{href:"/api/generate-pdf?marksheetId=".concat(R._id),target:"_blank",rel:"noreferrer",className:"mt-2 block w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-yellow-600 border border-yellow-300 bg-white hover:bg-yellow-50 hover:border-yellow-400 text-center text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1",children:"Download PDF"})]})]})]}),((A=R.dispatchRequest)==null?void 0:A.hodComments)&&rt("div",{className:"mt-4 bg-gray-50 border border-dashed border-gray-200 rounded-lg p-3",children:[V("p",{className:"text-xs text-gray-500 mb-1 font-medium",children:"HOD Comments:"}),V("p",{className:"text-gray-700 text-xs sm:text-sm",children:R.dispatchRequest.hodComments})]})]}),V("div",{className:"sm:hidden p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-t border-blue-100",children:rt("p",{className:"text-xs text-center text-gray-600 flex items-center justify-center gap-2",children:[V("span",{children:""}),V("span",{className:"font-medium",children:"Swipe left for actions"})]})})]})},R._id)})})]})]})})]})})]})}function Ht(it={}){const lt=(it.year||"").toString(),_=(it.section||"").toString();return!lt&&!_?"":_?lt?lt.includes("-")?lt:"".concat(lt,"-").concat(_):_:lt}export{Xt as default};
