import{j as l,b as k}from"./index-a36099b1.js";import{r as c}from"./react-vendor-ad4d5528.js";function D(n,u={}){const{threshold:t=80,enabled:d=!0}=u,[h,f]=c.useState(!1),[a,E]=c.useState(!1),[v,r]=c.useState(0),[j,P]=c.useState(0),T=c.useRef(null);return c.useEffect(()=>{if(!d||!T.current)return;const s=T.current;let g=0,y=0,o=!1,i=!1;const w=e=>{!((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=3)||a||(g=e.touches[0].clientY,y=e.touches[0].clientX,o=!1,i=!1,P(g))},x=e=>{if(a)return;const L=e.touches[0].clientY,b=e.touches[0].clientX,p=L-g,Y=Math.abs(b-y);if((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=3&&p>0&&p>Y*2){o=!0;const M=Math.min(40,Math.floor(t/2));if(i=p>M,i&&e.cancelable)try{e.preventDefault()}catch(X){}f(!0);const S=Math.min(p*.35,t*1.5);r(S)}else o&&(f(!1),r(0),o=!1)},m=async()=>{if(!o||a){f(!1),r(0),o=!1,i=!1;return}if(f(!1),o=!1,i=!1,v>=t){E(!0),r(t);try{await n()}catch(e){console.error("Pull-to-refresh error:",e)}finally{E(!1),r(0)}}else r(0)};return s.addEventListener("touchstart",w,{passive:!0}),s.addEventListener("touchmove",x,{passive:!1}),s.addEventListener("touchend",m,{passive:!0}),s.addEventListener("touchcancel",m,{passive:!0}),()=>{s.removeEventListener("touchstart",w),s.removeEventListener("touchmove",x),s.removeEventListener("touchend",m),s.removeEventListener("touchcancel",m)}},[d,h,a,v,t,n]),{isPulling:h,isRefreshing:a,pullDistance:v,containerRef:T,threshold:t}}function I({pullDistance:n,threshold:u,isRefreshing:t}){const d=Math.min(n/u,1),h=n/u*360;return l("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 md:hidden",style:{height:"".concat(n,"px"),opacity:d,pointerEvents:"none"},children:l("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg",children:t?k("svg",{className:"w-6 h-6 text-theme-gold animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l("svg",{className:"w-6 h-6 text-theme-gold transition-transform duration-200",style:{transform:"rotate(".concat(h,"deg)")},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})})}export{I as P,D as u};
