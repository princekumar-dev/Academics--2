System.register(["./index-legacy-9eeb83db.js","./react-vendor-legacy-4587369d.js","./ContextualHelp-legacy-d4a3ae1d.js","./resultUtils-legacy-0d7791a3.js"],function(e,t){"use strict";var r,s,a,l,d,n,i,o;return{setters:[e=>{r=e.a,s=e.j,a=e.b,l=e.F},e=>{d=e.r},e=>{n=e.H},e=>{i=e.d,o=e.a}],execute:function(){e("default",function(){const[e,t]=d.useState(()=>{const e=localStorage.getItem("auth");return e?JSON.parse(e):null}),[c,m]=d.useState(!1),[h,p]=d.useState([]),[b,u]=d.useState(null),[x,g]=d.useState(""),[v,f]=d.useState("");d.useEffect(()=>{"hod"===e?.role&&w()},[e]);const w=async()=>{try{m(!0);const t=await r.get(`/api/marksheets?department=${e.department}&includeAll=true`);if(t.success){const e=t.marksheets.sort((e,t)=>{const r=(e.studentDetails?.regNumber||"").toString().toLowerCase(),s=(t.studentDetails?.regNumber||"").toString().toLowerCase();return r.localeCompare(s,void 0,{numeric:!0,sensitivity:"base"})});p(e)}}catch(t){console.error("Error fetching marksheets:",t),g("Failed to fetch department data")}finally{m(!1)}},N=async t=>{if(b)try{m(!0);const s={type:{department_summary:"department-summary",classwise_performance:"classwise-performance",failed_dispatches:"failed-dispatches",subject_analysis:"subject-analysis"}[b.type]||b.type,data:b.data,format:t,department:e.department,generatedBy:e.name||e.email,generatedAt:(new Date).toISOString(),metadata:{totalRecords:Array.isArray(b.data)?b.data.length:b.data.totalStudents||Object.keys(b.data).length,reportTitle:y(b.type),departmentName:e.department}},a=await r.post("/api/generate-pdf",s,{responseType:"blob",timeout:3e4});if(!a)throw new Error("Export failed: empty response");const l=window.URL.createObjectURL(a),d=document.createElement("a");d.href=l;const n="excel"===t?"xlsx":t,i=`${b.type}_${e.department}_${(new Date).toISOString().split("T")[0]}.${n}`;d.download=i,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(l),f(`Report exported successfully as ${t.toUpperCase()}`),setTimeout(()=>f(""),3e3)}catch(s){console.error("Export error:",s),g(`Failed to export report: ${s.message}`),setTimeout(()=>g(""),5e3)}finally{m(!1)}else alert("Please generate a report first")},y=e=>({department_summary:"Department Summary Report",classwise_performance:"Class-wise Performance Report",failed_dispatches:"Failed Dispatches Report",subject_analysis:"Subject-wise Analysis Report"}[e]||"Report");return e&&"hod"===e.role?s("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 no-mobile-anim",children:s("div",{className:"responsive-container py-6 md:py-8",children:a("div",{className:"max-w-7xl mx-auto",children:[s("div",{className:"mb-6 md:mb-8",children:s("div",{className:"glass-card no-mobile-backdrop responsive-spacing rounded-3xl",children:a("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a("div",{children:[s("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-black text-[#111418] mb-2",children:"Report Management"}),a("p",{className:"text-base sm:text-lg text-gray-600",children:["Generate and export reports for ",e.department," Department"]})]}),s("div",{className:"flex flex-wrap items-center gap-3",children:a("div",{className:"glass-card px-3 py-2 rounded-xl",children:[s("div",{className:"text-xs text-gray-500",children:"Total Records"}),s("div",{className:"text-xl md:text-2xl font-bold text-theme-gold-600",children:h.length})]})})]})})}),a("div",{className:"glass-card responsive-spacing rounded-2xl md:rounded-3xl mb-6 md:mb-8",children:[x&&s("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a("div",{className:"flex",children:[s("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("div",{className:"text-red-800",children:x})]})}),v&&s("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:a("div",{className:"flex",children:[s("svg",{className:"w-5 h-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("div",{className:"text-green-800",children:v})]})}),c&&s("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a("div",{className:"flex items-center",children:[s("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-2"}),s("div",{className:"text-blue-800",children:"Loading department data..."})]})}),h.length>0&&a("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-6 md:mb-8",children:[s("div",{className:"responsive-card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-blue-600 font-medium mb-1",children:"Total"}),s("p",{className:"text-2xl md:text-3xl font-bold text-blue-700",children:h.length})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]})}),s("div",{className:"responsive-card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-green-600 font-medium mb-1",children:"Dispatched"}),s("p",{className:"text-2xl md:text-3xl font-bold text-green-700",children:h.filter(e=>"dispatched"===e.status).length})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"responsive-card bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-yellow-600 font-medium mb-1",children:"Pending"}),s("p",{className:"text-2xl md:text-3xl font-bold text-yellow-700",children:h.filter(e=>["approved_by_hod","dispatch_requested"].includes(e.status)).length})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"responsive-card bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-red-600 font-medium mb-1",children:"Rejected"}),s("p",{className:"text-2xl md:text-3xl font-bold text-red-700",children:h.filter(e=>"rejected_by_hod"===e.status).length})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})]}),a("div",{className:"responsive-grid responsive-grid-2 lg:grid-cols-3",children:[a("div",{className:"responsive-card group hover:shadow-xl transition-all duration-300 bg-white border-2 border-blue-100 hover:border-blue-300",children:[a("div",{className:"flex items-start justify-between mb-4",children:[s("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:bg-blue-200 transition-colors",children:s("svg",{className:"w-6 h-6 md:w-7 md:h-7 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),s("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:"Overview"})]}),a("div",{className:"flex items-center gap-2 mb-2",children:[s("h3",{className:"text-base md:text-lg font-bold text-gray-900",children:"Department Summary"}),s(n,{content:"Shows overall statistics including status breakdown, year-wise distribution, and pass/fail/absent analysis for all marksheets."})]}),s("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:"Complete overview with status breakdown, year-wise stats, and result distribution"}),s("button",{onClick:()=>{const e={},t={},r=h.filter(e=>"dispatched"===e.status).length,s=h.filter(e=>"approved_by_hod"===e.status||"dispatch_requested"===e.status).length,a=h.filter(e=>"rejected_by_hod"===e.status).length;h.forEach(r=>{const s=r.studentDetails?.year||"Unknown";e[s]||(e[s]=0),e[s]++;const a=i(r);t[a]||(t[a]=0),t[a]++});const l={totalStudents:h.length,totalMarksheets:h.length,byStatus:{dispatched:r,pending:s,rejected:a},byYear:e,overallResults:t};u({type:"department_summary",data:l})},disabled:c,className:"responsive-button w-full bg-blue-600 text-white hover:bg-white hover:text-blue-600 hover:border-2 hover:border-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:c?a("span",{className:"flex items-center justify-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"Generate Report"})]}),a("div",{className:"responsive-card group hover:shadow-xl transition-all duration-300 bg-white border-2 border-green-100 hover:border-green-300",children:[a("div",{className:"flex items-start justify-between mb-4",children:[s("div",{className:"p-3 bg-green-100 rounded-xl group-hover:bg-green-200 transition-colors",children:s("svg",{className:"w-6 h-6 md:w-7 md:h-7 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s("span",{className:"text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-full",children:"Performance"})]}),s("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2",children:"Class-wise Analysis"}),s("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:"Detailed breakdown by year/section with dispatch rates and result distribution"}),s("button",{onClick:()=>{const e={};h.forEach(t=>{const r=t.studentDetails?.year||"Unknown",s=t.studentDetails?.section||"Unknown",a=r&&s?`${r}-${s}`:`Class ${r}`;e[a]||(e[a]={year:r,section:s,totalStudents:0,dispatched:0,pending:0,dispatchRate:0,resultDistribution:{}}),e[a].totalStudents++,"dispatched"===t.status?e[a].dispatched++:"approved_by_hod"!==t.status&&"dispatch_requested"!==t.status||e[a].pending++;const l=i(t);e[a].resultDistribution[l]||(e[a].resultDistribution[l]=0),e[a].resultDistribution[l]++}),Object.values(e).forEach(e=>{e.dispatchRate=e.totalStudents>0?(e.dispatched/e.totalStudents*100).toFixed(1):0}),u({type:"classwise_performance",data:e})},disabled:c,className:"responsive-button w-full bg-green-600 text-white hover:bg-white hover:text-green-600 hover:border-2 hover:border-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:c?a("span",{className:"flex items-center justify-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"Generate Report"})]}),a("div",{className:"responsive-card group hover:shadow-xl transition-all duration-300 bg-white border-2 border-red-100 hover:border-red-300",children:[a("div",{className:"flex items-start justify-between mb-4",children:[s("div",{className:"p-3 bg-red-100 rounded-xl group-hover:bg-red-200 transition-colors",children:s("svg",{className:"w-6 h-6 md:w-7 md:h-7 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s("span",{className:"text-xs font-semibold text-red-600 bg-red-50 px-2 py-1 rounded-full",children:"Issues"})]}),s("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2",children:"Failed Dispatches"}),s("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:"Marksheets with failed dispatch attempts or pending for over 7 days"}),s("button",{onClick:()=>{const e=h.filter(e=>"rejected_by_hod"===e.status||"approved_by_hod"===e.status&&new Date(e.updatedAt)<new Date(Date.now()-6048e5)).map(e=>({studentName:e.studentDetails?.name||"Unknown",registerNumber:e.studentDetails?.registerNumber||"Unknown",branch:e.studentDetails?.branch||"Unknown",year:e.studentDetails?.year||"Unknown",dispatchAttempts:e.dispatchAttempts||1,lastDispatchAttempt:e.updatedAt||new Date}));u({type:"failed_dispatches",data:e})},disabled:c,className:"responsive-button w-full bg-red-600 text-white hover:bg-white hover:text-red-600 hover:border-2 hover:border-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:c?a("span",{className:"flex items-center justify-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"View Issues"})]}),a("div",{className:"responsive-card group hover:shadow-xl transition-all duration-300 bg-white border-2 border-yellow-100 hover:border-yellow-300",children:[a("div",{className:"flex items-start justify-between mb-4",children:[s("div",{className:"p-3 bg-yellow-100 rounded-xl group-hover:bg-yellow-200 transition-colors",children:s("svg",{className:"w-6 h-6 md:w-7 md:h-7 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s("span",{className:"text-xs font-semibold text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full",children:"Tracking"})]}),s("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2",children:"Change History"}),s("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:"Track modifications in student details, phone numbers, grades, and marksheet data"}),s("button",{onClick:()=>alert("Change tracking feature coming soon!"),disabled:c,className:"responsive-button w-full bg-yellow-600 text-white hover:bg-white hover:text-yellow-600 hover:border-2 hover:border-yellow-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:c?a("span",{className:"flex items-center justify-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"View Changes"})]}),a("div",{className:"responsive-card group hover:shadow-xl transition-all duration-300 bg-white border-2 border-purple-100 hover:border-purple-300",children:[a("div",{className:"flex items-start justify-between mb-4",children:[s("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:bg-purple-200 transition-colors",children:s("svg",{className:"w-6 h-6 md:w-7 md:h-7 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s("span",{className:"text-xs font-semibold text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:"Analytics"})]}),a("div",{className:"flex items-center gap-2 mb-2",children:[s("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2",children:"Subject Analysis"}),s(n,{content:"Performance metrics for each subject with pass rate, fail rate, and absent rate"})]}),s("p",{className:"text-sm text-gray-600 mb-4",children:"Performance metrics for each subject with pass rate, fail rate, and absent rate."}),s("button",{onClick:()=>{const e={};h.forEach(t=>{t.subjects?.forEach(t=>{const r=t.subjectName,s=t.subjectCode||"N/A";e[r]||(e[r]={subjectName:r,subjectCode:s,totalEnrollments:0,passCount:0,passRate:0,failCount:0,failRate:0,absentCount:0,absentRate:0,totalMarks:0,marksCount:0,highest:0,lowest:1/0,average:0});const a=e[r],l=o(t),d=Number(t.marks),n=!Number.isNaN(d);a.totalEnrollments++,"Pass"===l?a.passCount++:"Fail"===l?a.failCount++:"Absent"===l?a.absentCount++:a.passCount++,n&&(a.totalMarks+=d,a.marksCount++,a.highest=Math.max(a.highest,d),a.lowest=Math.min(a.lowest,d))})}),Object.values(e).forEach(e=>{e.passRate=e.totalEnrollments>0?e.passCount/e.totalEnrollments*100:0,e.failRate=e.totalEnrollments>0?e.failCount/e.totalEnrollments*100:0,e.absentRate=e.totalEnrollments>0?e.absentCount/e.totalEnrollments*100:0,e.average=e.marksCount>0?e.totalMarks/e.marksCount:0,0===e.marksCount?(e.highest=0,e.lowest=0):Number.isFinite(e.lowest)||(e.lowest=0)}),u({type:"subject_analysis",data:e})},disabled:c,className:"responsive-button w-full bg-purple-600 text-white hover:bg-white hover:text-purple-600 hover:border-2 hover:border-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:c?a("span",{className:"flex items-center justify-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"Generate Report"})]}),a("div",{className:"responsive-card group hover:shadow-xl transition-all duration-300 bg-white border-2 border-indigo-100 hover:border-indigo-300",children:[a("div",{className:"flex items-start justify-between mb-4",children:[s("div",{className:"p-3 bg-indigo-100 rounded-xl group-hover:bg-indigo-200 transition-colors",children:s("svg",{className:"w-6 h-6 md:w-7 md:h-7 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),s("span",{className:"text-xs font-semibold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full",children:"Custom"})]}),s("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2",children:"Custom Report Builder"}),s("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:"Create tailored reports with specific filters, date ranges, and custom criteria"}),s("button",{onClick:()=>alert("Custom report builder coming soon!"),disabled:c,className:"responsive-button w-full bg-indigo-600 text-white hover:bg-white hover:text-indigo-600 hover:border-2 hover:border-indigo-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:c?a("span",{className:"flex items-center justify-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"Create Custom"})]})]}),b&&a("div",{className:"mt-6 md:mt-8 responsive-card bg-white border-2 border-gray-200",children:[a("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[a("div",{children:[a("h3",{className:"responsive-heading-2 text-gray-900 mb-1",children:["department_summary"===b.type&&"Department Summary","classwise_performance"===b.type&&"Class-wise Performance","failed_dispatches"===b.type&&"Failed Dispatches","subject_analysis"===b.type&&"Subject Analysis"]}),a("p",{className:"text-xs md:text-sm text-gray-500",children:["Generated on ",(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),s("div",{className:"p-2 bg-theme-gold-100 rounded-lg",children:s("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-theme-gold-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),"department_summary"===b.type&&a("div",{className:"space-y-6",children:[a("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s("div",{className:"responsive-card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 hover:shadow-lg transition-shadow",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-blue-600 font-medium mb-1",children:"Total"}),s("p",{className:"text-2xl md:text-3xl font-bold text-blue-700",children:b.data.totalStudents})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]})}),s("div",{className:"responsive-card bg-gradient-to-br from-green-50 to-green-100 border-green-200 hover:shadow-lg transition-shadow",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-green-600 font-medium mb-1",children:"Dispatched"}),s("p",{className:"text-2xl md:text-3xl font-bold text-green-700",children:b.data.byStatus.dispatched})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"responsive-card bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 hover:shadow-lg transition-shadow",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-yellow-600 font-medium mb-1",children:"Pending"}),s("p",{className:"text-2xl md:text-3xl font-bold text-yellow-700",children:b.data.byStatus.pending})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"responsive-card bg-gradient-to-br from-red-50 to-red-100 border-red-200 hover:shadow-lg transition-shadow",children:a("div",{className:"flex items-center justify-between",children:[a("div",{children:[s("p",{className:"text-xs md:text-sm text-red-600 font-medium mb-1",children:"Rejected"}),s("p",{className:"text-2xl md:text-3xl font-bold text-red-700",children:b.data.byStatus.rejected})]}),s("svg",{className:"w-8 h-8 md:w-10 md:h-10 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})]}),a("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[a("div",{className:"responsive-card bg-gradient-to-br from-indigo-50 to-indigo-100 border-indigo-200",children:[a("div",{className:"flex items-center gap-2 mb-4",children:[s("svg",{className:"w-5 h-5 text-indigo-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s("h4",{className:"text-base md:text-lg font-bold text-indigo-900 leading-none",children:"Year-wise Distribution"})]}),s("div",{className:"space-y-3",children:b.data.byYear&&Object.entries(b.data.byYear).map(([e,t])=>a("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg hover:shadow-md transition-shadow",children:[a("div",{className:"flex items-center gap-2",children:[s("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),a("span",{className:"text-sm md:text-base font-medium text-gray-700",children:["Year ",e]})]}),s("span",{className:"text-base md:text-lg font-bold text-indigo-600",children:t})]},e))})]}),a("div",{className:"responsive-card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[a("div",{className:"flex items-center gap-2 mb-4",children:[s("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s("h4",{className:"text-base md:text-lg font-bold text-purple-900",children:"Result Distribution"})]}),s("div",{className:"space-y-3",children:b.data.overallResults&&Object.entries(b.data.overallResults).map(([e,t])=>a("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg hover:shadow-md transition-shadow",children:[a("div",{className:"flex items-center gap-2",children:[s("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s("span",{className:"text-sm md:text-base font-medium text-gray-700",children:e})]}),s("span",{className:"text-base md:text-lg font-bold text-purple-600",children:t})]},e))})]})]})]}),"failed_dispatches"===b.type&&a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center gap-2 p-4 bg-red-50 rounded-lg border border-red-200",children:[s("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a("div",{children:[a("p",{className:"text-sm md:text-base font-semibold text-red-900",children:["Found ",b.data.length," marksheets with issues"]}),s("p",{className:"text-xs md:text-sm text-red-700",children:"These marksheets may have failed dispatch or are pending for over 7 days"})]})]}),0===b.data.length?a("div",{className:"responsive-card bg-green-50 border-green-200 text-center py-8",children:[s("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("p",{className:"text-base md:text-lg font-semibold text-green-900",children:"No Failed Dispatches!"}),s("p",{className:"text-sm text-green-700 mt-1",children:"All marksheets are processing normally"})]}):s("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:b.data.map((e,t)=>s("div",{className:"responsive-card bg-white border-2 border-red-100 hover:border-red-300 hover:shadow-lg transition-all",children:a("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a("div",{className:"flex items-start gap-3",children:[s("div",{className:"p-2 bg-red-100 rounded-lg flex-shrink-0",children:s("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a("div",{children:[s("h5",{className:"text-sm md:text-base font-bold text-gray-900",children:e.studentName}),a("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:[s("span",{className:"font-medium",children:"Reg No:"})," ",e.registerNumber]}),a("p",{className:"text-xs text-gray-500 mt-1",children:["Year ",e.year," â€¢ ",e.branch]}),e.dispatchAttempts>1&&a("p",{className:"text-xs text-red-600 mt-1 font-medium",children:[e.dispatchAttempts," dispatch attempts"]})]})]}),a("div",{className:"flex flex-col items-end gap-1",children:[s("span",{className:"text-xs font-semibold text-red-600 bg-red-100 px-2 py-1 rounded-full",children:"Failed"}),s("p",{className:"text-xs text-gray-500",children:new Date(e.lastDispatchAttempt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})},t))})]}),"subject_analysis"===b.type&&s("div",{className:"space-y-4",children:s("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:b.data&&Object.entries(b.data).map(([e,t],r)=>a("div",{className:"responsive-card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 hover:shadow-lg transition-all",children:[a("div",{className:"flex items-center gap-2 mb-4",children:[s("div",{className:"p-2 bg-purple-200 rounded-lg",children:s("svg",{className:"w-5 h-5 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),a("div",{className:"flex-1",children:[s("h5",{className:"text-sm md:text-base font-bold text-purple-900",children:e}),a("p",{className:"text-xs text-purple-700",children:["Subject Code: ",t.subjectCode]})]}),a("span",{className:"text-xs font-semibold text-purple-600 bg-purple-200 px-2 py-1 rounded-full",children:[t.totalEnrollments," Students"]})]}),a("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Average"}),s("p",{className:"text-lg md:text-xl font-bold text-purple-700",children:t.average.toFixed(1)})]}),a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Highest"}),s("p",{className:"text-lg md:text-xl font-bold text-green-600",children:t.highest})]}),a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Lowest"}),s("p",{className:"text-lg md:text-xl font-bold text-red-600",children:t.lowest})]}),a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Pass Rate"}),a("p",{className:"text-lg md:text-xl font-bold text-blue-600",children:[t.passRate.toFixed(1),"%"]})]})]})]},e))})}),"classwise_performance"===b.type&&s("div",{className:"space-y-4",children:s("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:b.data&&Object.entries(b.data).map(([e,t])=>a("div",{className:"responsive-card bg-gradient-to-br from-green-50 to-green-100 border-green-200 hover:shadow-lg transition-all",children:[a("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a("div",{className:"flex items-center gap-3",children:[s("div",{className:"p-2 bg-green-200 rounded-lg",children:s("svg",{className:"w-5 h-5 text-green-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a("div",{children:[a("h5",{className:"text-base md:text-lg font-bold text-green-900",children:["Class ",e]}),a("p",{className:"text-xs md:text-sm text-green-700",children:["Year ",t.year," - Section ",t.section]})]})]}),a("div",{className:"flex gap-2",children:[a("span",{className:"text-xs font-semibold text-green-600 bg-green-200 px-3 py-1 rounded-full",children:[t.totalStudents," Students"]}),a("span",{className:"text-xs font-semibold text-blue-600 bg-blue-100 px-3 py-1 rounded-full",children:[t.dispatchRate,"% Dispatched"]})]})]}),a("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-4",children:[a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Total"}),s("p",{className:"text-lg md:text-xl font-bold text-green-700",children:t.totalStudents})]}),a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Dispatched"}),s("p",{className:"text-lg md:text-xl font-bold text-blue-600",children:t.dispatched})]}),a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs text-gray-500 mb-1",children:"Pending"}),s("p",{className:"text-lg md:text-xl font-bold text-yellow-600",children:t.pending})]})]}),t.resultDistribution&&Object.keys(t.resultDistribution).length>0&&a("div",{className:"bg-white p-3 rounded-lg",children:[s("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Result Distribution"}),s("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.resultDistribution).map(([e,t])=>a("span",{className:"text-xs font-medium bg-gradient-to-r from-green-100 to-green-200 text-green-800 px-3 py-1 rounded-full",children:[e,": ",t]},e))})]})]},e))})})]}),a("div",{className:"mt-6 md:mt-8 responsive-card bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:[a("div",{className:"flex items-center gap-3 mb-4",children:[s("div",{className:"p-2 bg-blue-100 rounded-lg",children:s("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a("div",{children:[s("h4",{className:"text-base md:text-lg font-bold text-blue-900",children:"Export Report"}),s("p",{className:"text-xs md:text-sm text-blue-700",children:"Download in your preferred format"})]})]}),a("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s("button",{onClick:()=>N("pdf"),disabled:!b||c,className:"responsive-button flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500 disabled:border-gray-300 bg-blue-600 text-white hover:bg-white hover:text-blue-600 hover:border-2 hover:border-blue-600",children:c?s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a(l,{children:[s("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),s("span",{className:"hidden sm:inline",children:"PDF"}),s("span",{className:"sm:hidden",children:"Export PDF"})]})}),s("button",{onClick:()=>N("excel"),disabled:!b||c,className:"responsive-button flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500 disabled:border-gray-300 bg-green-600 text-white hover:bg-white hover:text-green-600 hover:border-2 hover:border-green-600",children:c?s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a(l,{children:[s("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s("span",{className:"hidden sm:inline",children:"Excel"}),s("span",{className:"sm:hidden",children:"Export Excel"})]})}),s("button",{onClick:()=>N("csv"),disabled:!b||c,className:"responsive-button flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500 disabled:border-gray-300 bg-gray-700 text-white hover:bg-white hover:text-gray-700 hover:border-2 hover:border-gray-700",children:c?s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a(l,{children:[s("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s("span",{className:"hidden sm:inline",children:"CSV"}),s("span",{className:"sm:hidden",children:"Export CSV"})]})})]}),!b&&a("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg flex items-start gap-2",children:[s("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("p",{className:"text-sm text-blue-800",children:"Generate a report first to enable export options"})]}),c&&a("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg flex items-center gap-2",children:[s("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),s("p",{className:"text-sm text-blue-800",children:"Processing your export request..."})]})]})]})]})})}):s("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:a("div",{className:"glass-card p-8 rounded-3xl text-center",children:[s("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),s("p",{className:"text-gray-600",children:"Only HODs can generate reports."})]})})})}}});
