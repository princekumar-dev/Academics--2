System.register(["./index-legacy-9eeb83db.js","./react-vendor-legacy-4587369d.js"],function(e,t){"use strict";var a,s,r,l,n,d;return{setters:[e=>{a=e.a,s=e.j,r=e.b,l=e.S},e=>{n=e.r,d=e.L}],execute:function(){e("default",function(){const[e,t]=n.useState(null),[i,c]=n.useState([]),[o,m]=n.useState(!0);n.useEffect(()=>{const e=localStorage.getItem("auth");if(e)try{const t=JSON.parse(e);if("student"!==t.role)return;h(t),u(t)}catch(t){console.error("Invalid auth data",t)}},[]);const h=async e=>{try{const s=encodeURIComponent(e.phoneNumber||e.parentPhoneNumber),r=encodeURIComponent(e.regNumber||""),l=await a.get(`/api/users?studentPhoneNumber=${s}&regNumber=${r}`);if(l.success&&l.user){const a={...e,...l.user,role:"student"};t(a)}else t(e)}catch(s){console.error("Failed to fetch student data:",s),t(e)}},u=async e=>{m(!0);try{const t=new URLSearchParams;e.id&&t.set("studentId",e.id),e.regNumber&&t.set("regNumber",e.regNumber),e.phoneNumber&&t.set("phoneNumber",e.phoneNumber);const s=await a.get(`/api/marksheets?${t.toString()}`);if(s.success){const e=(s.marksheets||[]).filter(e=>"dispatched"===e.status);c(e)}}catch(t){console.error("Failed to load student marksheets",t)}finally{m(!1)}};return s("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:r("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s("div",{className:"glass-card p-8 rounded-3xl mb-8 backdrop-blur-lg border border-white/20 shadow-lg",children:r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r("div",{children:[s("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider",children:"Student Dashboard"}),s("h1",{className:"text-4xl font-bold text-gray-900 mt-2",children:e?.name}),r("div",{className:"mt-6 space-y-2",children:[r("p",{className:"text-sm text-gray-600",children:["Registration: ",s("span",{className:"font-semibold text-gray-900",children:e?.regNumber})]}),r("p",{className:"text-sm text-gray-600",children:["Department: ",s("span",{className:"font-semibold text-gray-900",children:e?.department||"AI_DS"})]}),r("p",{className:"text-sm text-gray-600",children:["Year: ",s("span",{className:"font-semibold text-gray-900",children:e?.year})," | Section: ",s("span",{className:"font-semibold text-gray-900",children:e?.section})]})]})]}),r("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:[s("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact Information"}),s("div",{className:"mt-4",children:r("div",{children:[s("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold",children:"Parent's Phone"}),s("p",{className:"text-lg font-bold text-gray-900 mt-1",children:e?.parentPhoneNumber||"N/A"})]})})]})]})}),r("div",{className:"glass-card p-8 rounded-3xl backdrop-blur-lg border border-white/20 shadow-lg",children:[r("div",{className:"flex items-center justify-between mb-8",children:[r("div",{children:[s("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Marksheets"}),s("p",{className:"text-sm text-gray-500 mt-1",children:"Swipe left to download or view"})]}),s(d,{to:"/contact",className:"text-blue-600 text-sm font-semibold hover:text-blue-700 transition-colors",children:"Need help?"})]}),o?s("div",{className:"flex items-center justify-center py-12",children:r("div",{className:"text-center",children:[s("div",{className:"inline-block w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),s("p",{className:"text-gray-600 mt-3",children:"Loading your marksheets..."})]})}):0===i.length?r("div",{className:"text-center py-16",children:[s("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:s("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),s("p",{className:"text-gray-600 font-medium",children:"No marksheets yet"}),s("p",{className:"text-gray-500 text-sm mt-1",children:"Your marksheets will appear here once they are dispatched"})]}):s("div",{className:"space-y-4",children:i.map(e=>s(l,{actions:[{label:"Download",icon:"ðŸ“¥",onClick:()=>{window.open(`/api/generate-pdf?marksheetId=${e._id}`,"_blank")},className:"bg-blue-600"}],children:r("div",{className:"bg-white",children:[r("div",{className:"p-6",children:[r("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[r("div",{className:"flex-1 min-w-0",children:[s("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1 break-words",children:e.studentDetails?.examinationName||"Examination"}),r("p",{className:"text-xs sm:text-sm text-gray-600",children:[e.studentDetails?.regNumber," â€¢ ",e.studentDetails?.year,"-",e.studentDetails?.section]})]}),r("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-semibold uppercase tracking-wide flex items-center gap-0.5 sm:gap-1 flex-shrink-0 whitespace-nowrap "+("dispatched"===e.status?"bg-purple-100 text-purple-700":"approved_by_hod"===e.status?"bg-blue-100 text-blue-700":"dispatch_requested"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:["ðŸ“¤ ",(e.status||"unknown").replace(/_/g," ")]})]}),r("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6 text-xs sm:text-sm",children:[r("div",{children:[s("p",{className:"text-gray-500 mb-1 font-medium",children:"Department"}),s("p",{className:"font-medium text-gray-900",children:e.studentDetails?.department||"â€”"})]}),r("div",{children:[s("p",{className:"text-gray-500 mb-1 font-medium",children:"Result"}),s("p",{className:"font-bold "+("Pass"===e.overallResult?"text-green-600":"Fail"===e.overallResult?"text-red-600":"text-gray-600"),children:e.overallResult||"â€”"})]}),r("div",{children:[s("p",{className:"text-gray-500 mb-1 font-medium",children:"Updated"}),s("p",{className:"font-medium text-gray-900",children:e.updatedAt?new Date(e.updatedAt).toLocaleDateString("en-IN"):"â€”"})]}),r("div",{children:[s("p",{className:"text-gray-500 mb-1 font-medium",children:"Parent Phone"}),s("p",{className:"font-medium text-gray-900 truncate",children:e.studentDetails?.parentPhoneNumber||"â€”"})]})]}),s("div",{className:"hidden sm:flex gap-3 mt-4 justify-end",children:r("a",{href:`/api/generate-pdf?marksheetId=${e._id}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold text-sm hover:bg-blue-200 transition-colors",children:[s("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]})})]}),s("div",{className:"sm:hidden p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-t border-blue-100",children:r("p",{className:"text-xs text-center text-gray-600 flex items-center justify-center gap-2",children:[s("span",{children:"ðŸ‘ˆ"}),s("span",{className:"font-medium",children:"Swipe left to download"})]})})]})},e._id))})]})]})})})}}});
