import{j as c,b as Y}from"./index-35ab9bf4.js";import{r as t}from"./react-vendor-ad4d5528.js";function X(r,u={}){const{threshold:l=80,enabled:f=!0}=u,[a,d]=t.useState(!1),[g,E]=t.useState(!1),[T,o]=t.useState(0);t.useState(0);const R=t.useRef(null),w=t.useRef(r);w.current=r;const h=t.useRef(l);h.current=l;const i=t.useRef({isPulling:a,isRefreshing:g,pullDistance:T});return i.current={isPulling:a,isRefreshing:g,pullDistance:T},t.useEffect(()=>{if(!f||!R.current)return;const s=R.current;let x=0,y=0,n=!1;const L=e=>{!((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=5)||i.current.isRefreshing||(x=e.touches[0].clientY,y=e.touches[0].clientX,n=!1)},b=e=>{if(i.current.isRefreshing)return;const p=e.touches[0].clientY,P=e.touches[0].clientX,v=p-x,k=Math.abs(P-y);if((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=5&&v>0&&v>k*2){n=!0,v>10&&e.cancelable&&e.preventDefault(),d(!0);const S=Math.min(v*.35,h.current*1.5);o(S)}else n&&(d(!1),o(0),n=!1)},m=async()=>{if(!n||i.current.isRefreshing){d(!1),o(0),n=!1;return}const e=i.current.pullDistance;if(d(!1),n=!1,e>=h.current){E(!0),o(h.current);try{await w.current()}catch(p){console.error("Pull-to-refresh error:",p)}finally{E(!1),o(0)}}else o(0)};return s.addEventListener("touchstart",L,{passive:!0}),s.addEventListener("touchmove",b,{passive:!1}),s.addEventListener("touchend",m,{passive:!0}),s.addEventListener("touchcancel",m,{passive:!0}),()=>{s.removeEventListener("touchstart",L),s.removeEventListener("touchmove",b),s.removeEventListener("touchend",m),s.removeEventListener("touchcancel",m)}},[f]),{isPulling:a,isRefreshing:g,pullDistance:T,containerRef:R,threshold:l}}function C({pullDistance:r,threshold:u,isRefreshing:l}){const f=Math.min(r/u,1),a=r/u*360;return c("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 md:hidden",style:{height:"".concat(r,"px"),opacity:f,pointerEvents:"none"},children:c("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg",children:l?Y("svg",{className:"w-6 h-6 text-theme-gold animate-spin",fill:"none",viewBox:"0 0 24 24",children:[c("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c("svg",{className:"w-6 h-6 text-theme-gold transition-transform duration-200",style:{transform:"rotate(".concat(a,"deg)")},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})})}export{C as P,X as u};
