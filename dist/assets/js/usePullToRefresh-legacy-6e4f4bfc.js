System.register(["./index-legacy-b6735175.js","./react-vendor-legacy-4587369d.js"],function(e,t){"use strict";var n,r,s;return{setters:[e=>{n=e.j,r=e.b},e=>{s=e.r}],execute:function(){e({P:function({pullDistance:e,threshold:t,isRefreshing:s}){const c=Math.min(e/t,1),o=e/t*360;return n("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 md:hidden",style:{height:`${e}px`,opacity:c,pointerEvents:"none"},children:n("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg",children:s?r("svg",{className:"w-6 h-6 text-theme-gold animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):n("svg",{className:"w-6 h-6 text-theme-gold transition-transform duration-200",style:{transform:`rotate(${o}deg)`},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})})},u:function(e,t={}){const{threshold:n=80,enabled:r=!0}=t,[c,o]=s.useState(!1),[i,l]=s.useState(!1),[u,a]=s.useState(0);s.useState(0);const d=s.useRef(null),h=s.useRef(e);h.current=e;const f=s.useRef(n);f.current=n;const m=s.useRef({isPulling:c,isRefreshing:i,pullDistance:u});return m.current={isPulling:c,isRefreshing:i,pullDistance:u},s.useEffect(()=>{if(!r||!d.current)return;const e=d.current;let t=0,n=0,s=!1;const c=e=>{(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=5&&!m.current.isRefreshing&&(t=e.touches[0].clientY,n=e.touches[0].clientX,s=!1)},i=e=>{if(m.current.isRefreshing)return;const r=e.touches[0].clientY,c=e.touches[0].clientX,i=r-t,l=Math.abs(c-n);if((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=5&&i>0&&i>2*l){s=!0,i>10&&e.cancelable&&e.preventDefault(),o(!0);const t=.35,n=Math.min(i*t,1.5*f.current);a(n)}else s&&(o(!1),a(0),s=!1)},u=async()=>{if(!s||m.current.isRefreshing)return o(!1),a(0),void(s=!1);const e=m.current.pullDistance;if(o(!1),s=!1,e>=f.current){l(!0),a(f.current);try{await h.current()}catch(t){console.error("Pull-to-refresh error:",t)}finally{l(!1),a(0)}}else a(0)};return e.addEventListener("touchstart",c,{passive:!0}),e.addEventListener("touchmove",i,{passive:!1}),e.addEventListener("touchend",u,{passive:!0}),e.addEventListener("touchcancel",u,{passive:!0}),()=>{e.removeEventListener("touchstart",c),e.removeEventListener("touchmove",i),e.removeEventListener("touchend",u),e.removeEventListener("touchcancel",u)}},[r]),{isPulling:c,isRefreshing:i,pullDistance:u,containerRef:d,threshold:n}}})}}});
