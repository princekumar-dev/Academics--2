import{u as ue,d as pe,e as he,a as L,j as t,b as r,F as me,S as ge,_ as ne}from"./index-35ab9bf4.js";import{r as i,u as fe}from"./react-vendor-ad4d5528.js";import{R as be}from"./RefreshButton-435ed63c.js";import{u as xe}from"./Confetti-f7abded4.js";import{H as we}from"./ContextualHelp-dcc8d512.js";import{u as ye,P as ve}from"./usePullToRefresh-f728b668.js";function De(){const{showSuccess:g,showError:b,showWarning:E}=ue(),{celebrate:w,ConfettiContainer:K}=xe(),[a,j]=i.useState(()=>{try{const e=localStorage.getItem("auth");return e?JSON.parse(e):null}catch(e){return console.error("Failed to parse auth data:",e),null}}),[y,C]=i.useState([]),[T,v]=i.useState(!0),[D,Z]=i.useState("all"),[p,U]=i.useState({open:!1,type:null,marksheet:null,anchorRect:null}),[ee,B]=i.useState(!1),[M,N]=i.useState(""),[Y,H]=i.useState(""),[_,V]=i.useState(!1),[z,W]=i.useState(!1),[te,F]=i.useState([]),G={AI_DS:"AI & DS",CSE:"CSE",IT:"IT",ECE:"ECE",EEE:"EEE",MECH:"MECH",CIVIL:"CIVIL",HNS:"H&S"},J={CSE:"bg-blue-100 text-blue-800",AI_DS:"bg-indigo-100 text-indigo-800",ECE:"bg-teal-100 text-teal-800",IT:"bg-green-100 text-green-800",MECH:"bg-amber-100 text-amber-800",CIVIL:"bg-red-100 text-red-800",EEE:"bg-purple-100 text-purple-800",HNS:"bg-yellow-50 text-yellow-800"},d=fe(),f=async()=>{await x(),g("ðŸ”„ Refreshed","Approval requests updated")},{isPulling:S,isRefreshing:k,pullDistance:se,containerRef:R,threshold:O}=ye(f,{enabled:!0,threshold:80}),I=async()=>{if(a)try{const e=new URLSearchParams({department:a.department,type:"leave"}),s=await L.get("/api/leaves?".concat(e.toString()));if(s.success){const n=(s.requests||[]).filter(l=>l.status==="requested");F(n)}else F([])}catch(e){console.error("Error fetching leave requests:",e),F([])}};i.useEffect(()=>{(a==null?void 0:a.role)==="hod"?(x(),I()):v(!1);const e=()=>{try{const s=localStorage.getItem("auth"),n=s?JSON.parse(s):null;j(n),(n==null?void 0:n.role)==="hod"&&(x(!0),I(!0))}catch(s){console.error("[ApprovalRequests] authStateChanged handler error:",s)}};return window.addEventListener("authStateChanged",e),()=>window.removeEventListener("authStateChanged",e)},[a]),pe({leave_request:()=>{console.log("ðŸ”” Leave request notification triggered refresh"),I()},leave_approval:()=>{console.log("ðŸ”” Leave approval notification triggered refresh"),I()},marksheet_approval:()=>{console.log("ðŸ”” Marksheet approval notification triggered refresh"),x()},dispatch_request:()=>{console.log("ðŸ”” Dispatch request notification triggered refresh"),x()}}),he(()=>{x(),I()});const x=async(e=!1)=>{if(a){v(!0);try{let s;const n=e?{cache:!1,dedupe:!1}:{};a.department==="HNS"?(console.log("[ApprovalRequests] HNS HOD detected â€” fetching Year I pending requests across departments"),s=await L.get("/api/marksheets?year=I&status=dispatch_requested",n)):(console.log("[ApprovalRequests] Fetching with department:",a.department),s=await L.get("/api/marksheets?department=".concat(a.department,"&status=dispatch_requested"),n)),console.log("[ApprovalRequests] Response:",s),s&&s.success?C(s.marksheets):C([])}catch(s){console.error("Error fetching pending requests:",s),C([])}finally{v(!1)}}},A=async()=>{try{if(a!=null&&a.eSignature)return a;const e=(a==null?void 0:a._id)||(a==null?void 0:a.id);if(!e)return null;const s=await L.get("/api/users?action=profile&userId=".concat(e));if(s!=null&&s.success&&s.user){const n={...a,...s.user};try{localStorage.setItem("auth",JSON.stringify(n))}catch(l){}return j(n),n}}catch(e){console.error("[ApprovalRequests] Failed to refresh HOD profile:",e)}return a},Q=async()=>{W(!0);try{await x()}finally{W(!1)}},P=(e,s,n)=>{var h;const l=typeof window<"u",m=(h=e==null?void 0:e.currentTarget)==null?void 0:h.getBoundingClientRect(),c=m&&l?{top:m.top+window.scrollY,left:m.left+window.scrollX,width:m.width,height:m.height}:null;N(""),U({open:!0,type:n,marksheet:s,anchorRect:c})},X=()=>{U({open:!1,type:null,marksheet:null,anchorRect:null}),N("")},ae=async({comments:e})=>{var s,n;if(!(!p.marksheet||!p.type))try{B(!0);const l=await A();if(!(l!=null&&l.eSignature)){b("Signature Missing","Please add your signature in Settings before approving requests"),B(!1);return}const m=a._id||a.id,c=await L.post("/api/marksheets?action=hod-response",{marksheetId:p.marksheet._id,hodId:m,response:p.type,comments:e},{dispatch:!1});if(!c||!c.success)throw new Error((c==null?void 0:c.error)||"Failed to submit response");const h=p.type==="approved"?"approved":"rejected",q=((n=(s=p.marksheet)==null?void 0:s.studentDetails)==null?void 0:n.name)||"Student";H("Dispatch request ".concat(h," successfully.")),p.type==="approved"?g("âœ“ Approved","Dispatch approved for ".concat(q)):E("Request Rejected","Dispatch rejected for ".concat(q)),X();try{C(o=>o.filter(u=>u._id!==p.marksheet._id))}catch(o){}try{ne(()=>import("./notificationEvents-12cfbdaf.js"),[]).then(o=>o.notifyNotificationsUpdated())}catch(o){try{window.dispatchEvent(new Event("notificationsUpdated"))}catch(u){}}try{window.dispatchEvent(new Event("marksheetsUpdated"))}catch(o){}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(o){}await x(!0)}catch(l){N(l.message||"Unexpected error"),b("Action Failed",l.message||"Could not process the request")}finally{B(!1)}},re=async e=>{const s=$.filter(n=>n.status==="dispatch_requested");if(s.length===0){H("No pending requests available for bulk ".concat(e,"."));return}try{const n=await A();if(!(n!=null&&n.eSignature)){b("Signature Missing","Please add your signature in Settings before approving requests");return}V(!0),N("");const l=a._id||a.id,m=s.map(o=>L.post("/api/marksheets?action=hod-response",{marksheetId:o._id,hodId:l,response:e,comments:""},{dispatch:!1}).then(u=>u).catch(u=>({success:!1,error:u.message}))),c=await Promise.all(m),h=c.filter(o=>o.success).length,q=c.length-h;if(h>0){const o="Successfully ".concat(e," ").concat(h," request").concat(h>1?"s":"",".").concat(q>0?" ".concat(q," failed."):"");H(o),g("Bulk ".concat(e.charAt(0).toUpperCase()+e.slice(1)),"".concat(h,"/").concat(c.length," requests processed successfully")),q===0&&w()}else{const o="Failed to ".concat(e.slice(0,-1)," any requests. Please try again.");N(o),b("Bulk Action Failed",o)}try{C(o=>o.filter(u=>!s.some(ce=>ce._id===u._id)))}catch(o){}try{ne(()=>import("./notificationEvents-12cfbdaf.js"),[]).then(o=>o.notifyNotificationsUpdated())}catch(o){try{window.dispatchEvent(new Event("notificationsUpdated"))}catch(u){}}try{window.dispatchEvent(new Event("marksheetsUpdated"))}catch(o){}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(o){}await x(!0)}catch(n){N(n.message||"Failed to perform bulk ".concat(e))}finally{V(!1)}},oe=i.useMemo(()=>[{id:"all",label:"All",count:y.length},{id:"dispatch_requested",label:"Pending",count:y.filter(e=>e.status==="dispatch_requested").length}],[y]),$=i.useMemo(()=>(D==="all"?y:y.filter(s=>s.status===D)).sort((s,n)=>{var c,h;const l=(((c=s.studentDetails)==null?void 0:c.regNumber)||"").toString().toLowerCase(),m=(((h=n.studentDetails)==null?void 0:h.regNumber)||"").toString().toLowerCase();return l.localeCompare(m,void 0,{numeric:!0,sensitivity:"base"})}),[y,D]),ie={dispatch_requested:"bg-yellow-100 text-yellow-800",approved_by_hod:"bg-green-100 text-green-800",rejected_by_hod:"bg-red-100 text-red-800",dispatched:"bg-purple-100 text-purple-800"},le={dispatch_requested:"â³",approved_by_hod:"âœ…",rejected_by_hod:"â›”",dispatched:"ðŸ“¤"},de=(e={})=>{const s=(e.year||"").toString(),n=(e.section||"").toString();return!s&&!n?"N/A":n?s?"".concat(s,"-").concat(n):n:s};return!a||a.role!=="hod"?t("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:r("div",{className:"glass-card p-8 rounded-3xl text-center",children:[t("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),t("p",{className:"text-gray-600",children:"Only HODs can approve dispatch requests."})]})}):r("div",{ref:R,className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[t(ve,{pullDistance:se,threshold:O,isRefreshing:k}),t("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r("div",{className:"max-w-6xl mx-auto",children:[r("div",{className:"text-center mb-8",children:[t("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-black text-gray-900 mb-4",children:"Approval Requests"}),r("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:["Review and approve dispatch requests for ",a.department," Department"]})]}),te.length>0&&t("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:r("p",{className:"text-sm text-blue-700",children:["ðŸ’¡ ",t("strong",{children:"Note:"})," Leave request approvals have been moved to your notification inbox. Click the ðŸ”” bell icon to review leave requests alongside staff account approvals."]})}),t("div",{className:"glass-card p-4 sm:p-6 md:p-8 rounded-2xl md:rounded-3xl mb-8",children:T?r("div",{className:"text-center py-12",children:[t("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t("p",{className:"text-gray-600",children:"Loading pending requests..."})]}):y.length===0?r("div",{className:"text-center py-12",children:[t("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No pending requests"}),t("p",{className:"text-gray-600",children:"All dispatch requests have been processed"})]}):r(me,{children:[t("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:oe.map(e=>r("button",{onClick:()=>Z(e.id),className:"px-4 py-2 rounded-full text-sm font-medium border transition-all duration-200 ".concat(D===e.id?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:border-blue-400"),children:[e.label,t("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-semibold ".concat(D===e.id?"bg-white/25 text-white":"bg-gray-100 text-gray-700"),children:e.count})]},e.id))}),Y&&t("div",{className:"mb-6 rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",children:Y}),M&&t("div",{className:"mb-6 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:M}),r("div",{className:"mb-6 p-3 sm:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:[r("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t("div",{className:"flex items-center gap-2",children:r("div",{children:[r("div",{className:"flex items-center gap-2",children:[t("h3",{className:"text-sm font-semibold text-gray-900",children:"Bulk Actions"}),t(we,{content:"Quickly approve or reject all pending dispatch requests at once."})]}),r("p",{className:"text-xs text-gray-600",children:[$.filter(e=>e.status==="dispatch_requested").length," pending requests available"]})]})}),t(be,{isLoading:z,onClick:Q})]}),r("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[t("button",{onClick:()=>re("approved"),disabled:_||$.filter(e=>e.status==="dispatch_requested").length===0,className:"px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ".concat(_||$.filter(e=>e.status==="dispatch_requested").length===0?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:r("span",{className:"flex items-center justify-center gap-1",children:[t("span",{children:"âœ…"}),t("span",{children:_?"Processing...":"Approve All"})]})}),t("button",{onClick:()=>re("rejected"),disabled:_||$.filter(e=>e.status==="dispatch_requested").length===0,className:"px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 ".concat(_||$.filter(e=>e.status==="dispatch_requested").length===0?"bg-gray-300 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:r("span",{className:"flex items-center justify-center gap-1",children:[t("span",{children:"â›”"}),t("span",{children:_?"Processing...":"Reject All"})]})})]})]}),t("div",{className:"space-y-4",children:$.map(e=>{var n,l,m,c,h,q,o;return t(ge,{actions:[{label:"Details",icon:"ðŸ‘ï¸",className:"border-slate-300 text-slate-600 hover:border-slate-500 hover:bg-slate-50",onClick:()=>d("/marksheets/".concat(e._id||e.marksheetId))},{label:"Reject",icon:"âŒ",className:"border-red-300 text-red-600 hover:border-red-500 hover:bg-red-50",onClick:u=>P(u,e,"rejected")},{label:"Approve",icon:"âœ…",className:"border-green-300 text-green-600 hover:border-green-500 hover:bg-green-50",onClick:u=>P(u,e,"approved")}],children:r("div",{className:"bg-white",children:[r("div",{className:"p-4 sm:p-6 pb-3 sm:pb-4",children:[r("div",{className:"flex items-start justify-between mb-3 gap-2",children:[r("div",{className:"flex-1 min-w-0",children:[t("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1 truncate",children:(n=e.studentDetails)==null?void 0:n.name}),r("p",{className:"text-xs sm:text-sm text-gray-600 flex items-center gap-2",children:[r("span",{children:[(l=e.studentDetails)==null?void 0:l.regNumber," â€¢ ",de(e.studentDetails)]}),((m=e.studentDetails)==null?void 0:m.department)&&t("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase ".concat(J[e.studentDetails.department]||"bg-gray-100 text-gray-800"),children:G[(c=e.studentDetails)==null?void 0:c.department]||(((h=e.studentDetails)==null?void 0:h.department)||"").toUpperCase()})]})]}),r("span",{className:"px-2 py-1 sm:px-3 sm:py-1.5 rounded-full text-xs font-semibold uppercase tracking-wide flex items-center gap-1 whitespace-nowrap ".concat(ie[e.status]||"bg-yellow-100 text-yellow-800"),children:[t("span",{className:"text-xs sm:text-sm",children:le[e.status]||"ðŸ“„"}),t("span",{className:"text-xs",children:(e.status||"").replace(/_/g," ")})]})]}),r("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 text-xs sm:text-sm",children:[r("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Staff:"}),t("p",{className:"font-medium text-gray-900 truncate",children:e.staffName||"demo staff"})]}),r("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Parent Phone:"}),t("p",{className:"font-medium text-gray-900",children:((q=e.studentDetails)==null?void 0:q.parentPhoneNumber)||"â€”"})]}),r("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Exam Date:"}),t("p",{className:"font-medium text-gray-900",children:e.examinationDate?new Date(e.examinationDate).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"â€”"})]}),r("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Subjects:"}),t("p",{className:"font-medium text-gray-900",children:((o=e.subjects)==null?void 0:o.length)||0})]})]})]}),t("div",{className:"border-t border-gray-100"}),t("div",{className:"hidden sm:block p-4 sm:p-6 pt-3 sm:pt-4 bg-gray-50",children:r("div",{className:"grid grid-cols-4 gap-3",children:[t("button",{onClick:u=>P(u,e,"approved"),className:"px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1",children:"Approve Dispatch"}),t("button",{onClick:u=>P(u,e,"rejected"),className:"px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:"Reject Request"}),t("button",{onClick:()=>d("/marksheets/".concat(e._id||e.marksheetId)),className:"px-4 py-2.5 bg-white hover:bg-gray-50 text-gray-700 text-sm font-medium rounded-lg border border-gray-300 transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1",children:"View Details"})]})}),t("div",{className:"sm:hidden p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-t border-blue-100",children:r("p",{className:"text-xs text-center text-gray-600 flex items-center justify-center gap-2",children:[t("span",{children:"ðŸ‘ˆ"}),t("span",{className:"font-medium",children:"Swipe left for actions"})]})})]})},e._id)})})]})})]})}),t(Ne,{open:p.open,type:p.type,marksheet:p.marksheet,anchorRect:p.anchorRect,onClose:X,onSubmit:ae,loading:ee,error:M}),t(K,{})]})}function Ne({open:g,type:b,marksheet:E,anchorRect:w,onClose:K,onSubmit:a,loading:j,error:y}){var G,J;const[C,T]=i.useState(""),[v,D]=i.useState(()=>typeof window<"u"?window.innerWidth<640:!0),[Z,p]=i.useState(g);if(i.useEffect(()=>{const d=()=>D(window.innerWidth<640);return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),i.useEffect(()=>{if(g)p(!0);else{const d=setTimeout(()=>p(!1),120);return()=>clearTimeout(d)}},[g]),i.useEffect(()=>{!g||!E||T("")},[g,b,E]),!Z||!E)return null;const U=b==="approved"?"Approve dispatch request":"Reject dispatch request",ee=d=>{d.preventDefault();const f={comments:C.trim()||void 0};try{N(!0)}catch(S){}a(f)},M=(()=>{if(typeof window>"u")return{width:"100%",maxWidth:"100%",borderRadius:"24px 24px 0 0",position:"fixed",left:0,right:0,bottom:0,margin:"0 auto"};if(["rejected","approved"].includes(b)){const A=Math.min(420,window.innerWidth-32),Q=window.innerWidth,P=Math.max(16,Math.min((Q-A)/2,Q-A-16)),X=Math.max(window.scrollY+16,window.scrollY+80);return{width:A,position:"absolute",left:P,top:X}}if(v||!w)return{width:"100%",maxWidth:"100%",borderRadius:"24px 24px 0 0",position:"fixed",left:0,right:0,bottom:0,margin:"0 auto"};const f=16,S=420,k=window.innerWidth,se=window.innerHeight;if(b==="rejected"||b==="approved"){const x=Math.max(f,Math.min((k-S)/2,k-S-f)),A=Math.max(window.scrollY+f,window.scrollY+120);return{width:S,position:"absolute",left:x,top:A}}let R=w.left+w.width+12;R+S>k-f&&(R=w.left-S-12,R<f&&(R=Math.min(Math.max(f,w.left+w.width/2-S/2),k-S-f)));let O=w.top+w.height+12;const I=window.scrollY+se-24-380;return O>I&&(O=Math.max(window.scrollY+f,w.top-380-12)),{width:S,position:"absolute",left:R,top:O}})(),N=(d=!1)=>{d&&p(!1);try{K()}catch(f){}},Y=g?"opacity-100":"opacity-0",H=g?"":"pointer-events-none",_="glass-card w-full p-6 shadow-2xl transition-all duration-100",V=g?"translate-y-0 rounded-t-2xl":"translate-y-full rounded-t-2xl",z=g?"translate-y-0 scale-100":"translate-y-2 scale-95",W=["rejected","approved"].includes(b),te=v&&W?"rounded-xl shadow-lg":"",F="".concat(_," ").concat(te," ").concat(W?z:v?V:z);return t("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/40 px-4 py-6 sm:py-10 ".concat(Y," ").concat(H),onClick:d=>{d.target===d.currentTarget&&N(!1)},style:{transition:"opacity 100ms cubic-bezier(0.2,0,0,1)"},children:r("div",{className:F,style:M,children:[r("div",{className:"mb-4",children:[t("h3",{className:"text-xl font-semibold text-gray-900",children:U}),r("p",{className:"text-sm text-gray-600 mt-1",children:[(G=E.studentDetails)==null?void 0:G.name," â€¢ ",(J=E.studentDetails)==null?void 0:J.regNumber]})]}),r("form",{onSubmit:ee,className:"space-y-4",children:[r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (optional)"}),t("textarea",{value:C,onChange:d=>T(d.target.value),rows:4,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-blue-500 focus:outline-none",placeholder:b==="rejected"?"Let the staff know the reason for rejection":"Add any notes for the staff member"})]}),y&&t("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:y}),r("div",{className:"flex ".concat(v?"flex-col-reverse gap-2":"justify-end gap-3"," pt-2"),children:[t("button",{type:"button",onClick:()=>N(!0),className:"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 ".concat(v?"w-full text-center":""),children:"Cancel"}),t("button",{type:"submit",disabled:j,className:"px-5 py-2 rounded-lg text-white ".concat(j?"bg-blue-300 cursor-wait":"bg-blue-600 hover:bg-blue-700"," ").concat(v?"w-full text-center":""),children:j?"Saving...":"Confirm"})]})]})]})})}export{De as default};
