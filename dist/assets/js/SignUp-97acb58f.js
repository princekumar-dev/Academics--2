import{b as r,j as e,a as y,g as w}from"./index-ba65f9b1.js";import{r as c,u as v}from"./react-vendor-ad4d5528.js";const s=["MECH","CIVIL","EEE"];function C(){const[a,x]=c.useState({name:"",email:"",password:"",confirmPassword:"",role:"",department:"",year:"",section:"",phoneNumber:""}),[f,o]=c.useState(!1),[d,l]=c.useState(""),[u,m]=c.useState(""),b=v(),i=h=>{const{name:g,value:t}=h.target;x(n=>{const p={...n,[g]:t};return g==="department"&&(s.includes(t)?p.section="A":s.includes(n.department)&&!s.includes(t)&&(p.section="")),p}),d&&l(""),u&&m("")};return r("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 smooth-scroll mobile-smoothest-scroll no-mobile-anim",children:[e("style",{children:"\n        @keyframes waveButtonAnimation {\n          0%, 100% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n        }\n        .login-wave-button {\n          background: linear-gradient(90deg, var(--theme-gold-600), var(--theme-gold-300), var(--theme-gold-600), var(--theme-gold-300));\n          background-size: 300% 100%;\n          animation: waveButtonAnimation 3s ease-in-out infinite;\n          transition: all 0.3s ease;\n        }\n        .login-wave-button:hover { animation-duration: 1.5s; }\n      "}),e("div",{className:"relative z-10",children:e("div",{className:"w-full max-w-md",children:r("div",{className:"backdrop-blur-md bg-white/20 border border-white/30 p-8 rounded-3xl shadow-2xl",children:[r("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:e("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e("h1",{className:"text-3xl sm:text-4xl font-black text-white mb-2",children:"Create Account"}),e("p",{className:"text-gray-100 text-lg",children:"Sign up for your MSEC Academics account"})]}),d&&e("div",{className:"mb-6",children:e("div",{className:"backdrop-blur-sm bg-red-500/20 border border-red-400/50 p-4 border-l-4 rounded-lg",children:e("p",{className:"text-red-100 text-sm font-medium",children:d})})}),u&&e("div",{className:"mb-6",children:e("div",{className:"backdrop-blur-sm bg-green-500/20 border border-green-400/50 p-4 border-l-4 rounded-lg",children:e("p",{className:"text-green-100 text-sm font-medium",children:u})})}),r("form",{onSubmit:async h=>{if(h.preventDefault(),o(!0),l(""),!a.name||!a.email||!a.password||!a.confirmPassword||!a.role||!a.department){const t=[];a.name||t.push("Full Name"),a.email||t.push("Email"),a.password||t.push("Password"),a.confirmPassword||t.push("Confirm Password"),a.role||t.push("Role"),a.department||t.push("Department"),l("Missing required fields: ".concat(t.join(", "),". Please fill in all fields to continue.")),o(!1);return}if(a.email.toLowerCase().split("@")[1]!=="msec.edu.in"){l("âŒ Invalid email domain. Only MSEC institutional emails are allowed. Example: john.doe@msec.edu.in"),o(!1);return}if(a.role==="staff"&&(!a.year||!a.section)){l("ğŸ“‹ Staff members must specify: "+(a.year?"":"Academic Year (I-IV)")+(!a.year&&!a.section?" and ":"")+(a.section?"":"Section (A/B)")),o(!1);return}if(a.password!==a.confirmPassword){l("ğŸ”’ Password mismatch. The passwords you entered don't match. Please verify and try again."),o(!1);return}if(a.password.length<6){l("ğŸ”’ Password too weak. Please use at least 6 characters for security."),o(!1);return}try{const t={name:a.name,email:a.email,password:a.password,role:a.role,department:a.department,phoneNumber:a.phoneNumber};a.role==="staff"&&(t.year=a.year,t.section=a.section);try{const n=await y.post("/api/users",t);if(!n||!n.success){l((n==null?void 0:n.error)||"âŒ Failed to create account. Please check your information and try again.");return}}catch(n){n&&n.status===409?l("ğŸ“§ This email is already registered. Try logging in instead, or use a different email."):l(w(n,"Unable to create account. Please check your information and try again."));return}a.role==="staff"?(m("ğŸ“‹ Account request submitted! Waiting for HOD approval..."),setTimeout(()=>b("/login"),2e3)):(m("âœ… Account created successfully! Redirecting to sign in..."),setTimeout(()=>b("/login"),900))}catch(t){l(w(t,"Unable to create account. Please verify all information and try again."))}finally{o(!1)}},className:"space-y-6",children:[r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Full Name"}),e("input",{name:"name",value:a.name,onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your name",required:!0})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Email Address"}),e("input",{type:"email",name:"email",value:a.email,onChange:i,pattern:".*@msec\\.edu\\.in$",title:"Please use your MSEC email address (@msec.edu.in)",className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your email",required:!0}),e("p",{className:"mt-2 text-xs text-gray-100",children:"Use your official MSEC email address"})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Role"}),r("select",{name:"role",value:a.role,onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[e("option",{value:"",className:"bg-gray-800",children:"Select Role"}),e("option",{value:"staff",className:"bg-gray-800",children:"Staff"}),e("option",{value:"hod",className:"bg-gray-800",children:"HOD"})]})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Department"}),r("select",{name:"department",value:a.department,onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[e("option",{value:"",className:"bg-gray-800",children:"Select Department"}),e("option",{value:"CSE",className:"bg-gray-800",children:"Computer Science & Engineering"}),e("option",{value:"AI_DS",className:"bg-gray-800",children:"Artificial Intelligence & Datascience"}),e("option",{value:"ECE",className:"bg-gray-800",children:"Electronics & Communication Engineering"}),e("option",{value:"IT",className:"bg-gray-800",children:"Information Technology"}),e("option",{value:"HNS",className:"bg-gray-800",children:"Humanities & Science (H&S)"}),e("option",{value:"MECH",className:"bg-gray-800",children:"Mechanical Engineering"}),e("option",{value:"CIVIL",className:"bg-gray-800",children:"Civil Engineering"}),e("option",{value:"EEE",className:"bg-gray-800",children:"Electrical & Electronics Engineering"})]})]}),a.role==="staff"&&r("div",{className:"grid grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Year"}),r("select",{name:"year",value:a.year||"",onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[e("option",{value:"",className:"bg-gray-800",children:"Select Year"}),e("option",{value:"I",className:"bg-gray-800",children:"I"}),e("option",{value:"II",className:"bg-gray-800",children:"II"}),e("option",{value:"III",className:"bg-gray-800",children:"III"}),e("option",{value:"IV",className:"bg-gray-800",children:"IV"})]})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Section"}),r("select",{name:"section",value:a.section||"",onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white ".concat(s.includes(a.department)?"opacity-50 cursor-not-allowed":""),required:!0,disabled:s.includes(a.department),children:[e("option",{value:"",className:"bg-gray-800",children:"Select Section"}),e("option",{value:"A",className:"bg-gray-800",children:"A"}),!s.includes(a.department)&&e("option",{value:"B",className:"bg-gray-800",children:"B"})]}),s.includes(a.department)&&r("p",{className:"mt-1 text-xs text-gray-100",children:[a.department," has a single Section A by default."]})]})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Phone Number"}),e("input",{type:"tel",name:"phoneNumber",value:a.phoneNumber,onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your number"})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Password"}),e("input",{type:"password",name:"password",value:a.password,onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Create a password",required:!0})]}),r("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Confirm Password"}),e("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:i,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Repeat password",required:!0})]}),e("div",{className:"pt-4",children:e("button",{type:"submit",disabled:f,className:"glass-button w-full py-4 px-6 text-blue-600 text-lg font-bold rounded-2xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:e("span",{className:"truncate",children:f?"Creating account...":"Create Account"})})})]}),e("div",{className:"mt-8 text-center",children:r("p",{className:"text-gray-100 text-sm",children:["Already have an account? ",e("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline ml-1",onClick:()=>b("/login"),children:"Sign in"})]})})]})})})]})}export{C as default};
