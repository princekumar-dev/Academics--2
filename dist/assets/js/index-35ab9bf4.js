import{r as i,a as Lt,R as mt,u as ht,b as ze,c as Je,L as ee,B as It,d as At,e as ae,N as ve}from"./react-vendor-ad4d5528.js";function ia(){import.meta.url,import("_").catch(()=>1);async function*t(){}}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const v of l.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&o(v)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();const Dt="modulepreload",Pt=function(t){return"/"+t},Qe={},Y=function(r,s,o){if(!s||s.length===0)return r();const n=document.getElementsByTagName("link");return Promise.all(s.map(l=>{if(l=Pt(l),l in Qe)return;Qe[l]=!0;const v=l.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(!!o)for(let N=n.length-1;N>=0;N--){const h=n[N];if(h.href===l&&(!v||h.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(l,'"]').concat(g)))return;const f=document.createElement("link");if(f.rel=v?"stylesheet":Dt,v||(f.as="script",f.crossOrigin=""),f.href=l,document.head.appendChild(f),v)return new Promise((N,h)=>{f.addEventListener("load",N),f.addEventListener("error",()=>h(new Error("Unable to preload CSS for ".concat(l))))})})).then(()=>r()).catch(l=>{const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=l,window.dispatchEvent(v),!v.defaultPrevented)throw l})};var gt={exports:{}},$e={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tt=i,Mt=Symbol.for("react.element"),jt=Symbol.for("react.fragment"),Ot=Object.prototype.hasOwnProperty,zt=Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wt={key:!0,ref:!0,__self:!0,__source:!0};function ft(t,r,s){var o,n={},l=null,v=null;s!==void 0&&(l=""+s),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(v=r.ref);for(o in r)Ot.call(r,o)&&!Wt.hasOwnProperty(o)&&(n[o]=r[o]);if(t&&t.defaultProps)for(o in r=t.defaultProps,r)n[o]===void 0&&(n[o]=r[o]);return{$$typeof:Mt,type:t,key:l,ref:v,props:n,_owner:zt.current}}$e.Fragment=jt;$e.jsx=ft;$e.jsxs=ft;gt.exports=$e;var Ye=gt.exports;const ge=Ye.Fragment,e=Ye.jsx,a=Ye.jsxs;var Fe={},et=Lt;Fe.createRoot=et.createRoot,Fe.hydrateRoot=et.hydrateRoot;function ca({rows:t=5,columns:r=6}){return e("div",{className:"space-y-3",children:[...Array(t)].map((s,o)=>e("div",{className:"flex gap-4 animate-pulse",children:[...Array(r)].map((n,l)=>e("div",{className:"h-12 bg-gray-200 rounded-lg",style:{width:l===0?"5%":l===1?"25%":l===2?"20%":l===3?"15%":l===4?"20%":"15%"}},l))},o))})}function Me(){return a("div",{className:"p-4 md:p-6 space-y-6 animate-pulse",children:[a("div",{children:[e("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-2"}),e("div",{className:"h-4 bg-gray-100 rounded w-1/2"})]}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>a("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-3"}),e("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-2"}),e("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]},t))}),a("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),e("div",{className:"space-y-3",children:[1,2,3].map(t=>a("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),a("div",{className:"flex-1",children:[e("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})]},t))})]})]})}function tt(){return a("div",{className:"p-4 md:p-6 space-y-4 animate-pulse",children:[a("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-6",children:[a("div",{children:[e("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2"}),e("div",{className:"h-4 bg-gray-100 rounded w-64"})]}),a("div",{className:"flex gap-2",children:[e("div",{className:"h-10 bg-gray-200 rounded w-32"}),e("div",{className:"h-10 bg-gray-200 rounded w-24"})]})]}),a("div",{className:"flex gap-2 mb-4",children:[e("div",{className:"flex-1 h-12 bg-gray-200 rounded-xl"}),e("div",{className:"h-12 bg-gray-200 rounded-xl w-32"})]}),e("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>a("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[a("div",{className:"flex justify-between items-start mb-4",children:[a("div",{className:"flex-1",children:[e("div",{className:"h-6 bg-gray-300 rounded w-2/3 mb-2"}),e("div",{className:"h-4 bg-gray-100 rounded w-1/3"})]}),e("div",{className:"h-8 bg-gray-200 rounded-full w-24"})]}),e("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(r=>a("div",{children:[e("div",{className:"h-3 bg-gray-100 rounded w-16 mb-2"}),e("div",{className:"h-4 bg-gray-200 rounded w-20"})]},r))})]},t))})]})}function $t(){return a("div",{className:"p-4 md:p-6 animate-pulse",children:[e("div",{className:"h-10 bg-gray-200 rounded w-32 mb-6"}),a("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[a("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:[a("div",{className:"flex justify-between items-start mb-4",children:[a("div",{className:"flex-1",children:[e("div",{className:"h-8 bg-gray-300 rounded w-2/3 mb-3"}),e("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),e("div",{className:"h-10 bg-gray-300 rounded-full w-32"})]}),e("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>a("div",{children:[e("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2"}),e("div",{className:"h-5 bg-gray-300 rounded w-24"})]},t))})]}),a("div",{className:"p-6 space-y-6",children:[a("div",{children:[e("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(t=>a("div",{children:[e("div",{className:"h-3 bg-gray-100 rounded w-20 mb-2"}),e("div",{className:"h-5 bg-gray-200 rounded w-32"})]},t))})]}),a("div",{children:[e("div",{className:"h-6 bg-gray-200 rounded w-24 mb-4"}),a("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e("div",{className:"bg-gray-50 p-4 border-b",children:a("div",{className:"flex gap-4",children:[e("div",{className:"h-4 bg-gray-300 rounded w-32"}),e("div",{className:"h-4 bg-gray-300 rounded w-24"}),e("div",{className:"h-4 bg-gray-300 rounded w-24"})]})}),[1,2,3,4,5].map(t=>e("div",{className:"p-4 border-b last:border-b-0",children:a("div",{className:"flex gap-4",children:[e("div",{className:"h-4 bg-gray-200 rounded w-32"}),e("div",{className:"h-4 bg-gray-200 rounded w-24"}),e("div",{className:"h-4 bg-gray-200 rounded w-24"})]})},t))]})]}),a("div",{className:"flex gap-3 pt-4",children:[e("div",{className:"h-12 bg-gray-200 rounded-xl w-32"}),e("div",{className:"h-12 bg-gray-200 rounded-xl w-32"})]})]})]})]})}function rt(){return a("div",{className:"p-4 md:p-6 animate-pulse",children:[a("div",{className:"mb-6",children:[e("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-2"}),e("div",{className:"h-4 bg-gray-100 rounded w-1/2"})]}),e("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 max-w-2xl",children:a("div",{className:"space-y-6",children:[[1,2,3,4].map(t=>a("div",{children:[e("div",{className:"h-4 bg-gray-200 rounded w-32 mb-3"}),e("div",{className:"h-12 bg-gray-100 rounded-xl"})]},t)),e("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-8",children:a("div",{className:"text-center",children:[e("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-48 mx-auto mb-2"}),e("div",{className:"h-4 bg-gray-100 rounded w-64 mx-auto"})]})}),a("div",{className:"flex gap-3 pt-4",children:[e("div",{className:"h-12 bg-gray-300 rounded-xl flex-1"}),e("div",{className:"h-12 bg-gray-200 rounded-xl w-32"})]})]})})]})}function Ut(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"text-center mb-8",children:[e("div",{className:"h-12 bg-gray-300 rounded w-96 mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-[500px] mx-auto mb-2"}),e("div",{className:"h-5 bg-gray-200 rounded w-[450px] mx-auto"})]}),a("div",{className:"flex gap-2 mb-6",children:[e("div",{className:"h-10 bg-gray-300 rounded-lg w-32"}),e("div",{className:"h-10 bg-gray-200 rounded-lg w-32"})]}),a("div",{className:"bg-white/60 backdrop-blur-sm p-4 rounded-xl mb-6 flex flex-wrap items-center justify-between gap-4",children:[a("div",{className:"flex gap-2",children:[e("div",{className:"h-10 bg-gray-300 rounded-lg w-28"}),e("div",{className:"h-10 bg-gray-200 rounded-lg w-28"})]}),a("div",{className:"flex gap-2",children:[e("div",{className:"h-10 bg-blue-200 rounded-lg w-36"}),e("div",{className:"h-10 bg-green-200 rounded-lg w-32"})]})]}),e("div",{className:"flex flex-wrap gap-2 mb-6",children:[1,2,3,4,5].map(t=>e("div",{className:"h-10 bg-gray-200 rounded-lg w-24"},t))}),e("div",{className:"space-y-4",children:[1,2,3].map(t=>a("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a("div",{className:"p-6 pb-4",children:[a("div",{className:"flex items-start justify-between mb-3",children:[a("div",{className:"flex-1",children:[e("div",{className:"h-6 bg-gray-300 rounded w-48 mb-2"}),e("div",{className:"h-4 bg-gray-200 rounded w-64"})]}),e("div",{className:"h-8 bg-yellow-100 rounded-full w-32"})]}),e("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mt-4",children:[1,2,3,4,5].map(r=>a("div",{children:[e("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2"}),e("div",{className:"h-5 bg-gray-300 rounded w-20"})]},r))}),t===2&&a("div",{className:"mt-4 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e("div",{className:"h-4 bg-orange-200 rounded w-32 mb-2"}),e("div",{className:"h-4 bg-orange-100 rounded w-full"})]})]}),e("div",{className:"border-t border-gray-100"}),e("div",{className:"p-6 pt-4 bg-gray-50",children:a("div",{className:"flex flex-wrap gap-2",children:[e("div",{className:"h-10 bg-blue-200 rounded-lg w-32"}),e("div",{className:"h-10 bg-green-200 rounded-lg w-28"}),e("div",{className:"h-10 bg-gray-200 rounded-lg w-24"})]})})]},t))})]})})})}function at(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"text-center mb-8",children:[e("div",{className:"h-12 bg-gray-300 rounded w-96 mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-[450px] mx-auto"})]}),a("div",{className:"bg-white/60 backdrop-blur-sm p-6 md:p-8 rounded-3xl shadow-sm",children:[a("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[e("div",{className:"flex gap-2 flex-1",children:[1,2,3].map(t=>e("div",{className:"h-10 bg-gray-200 rounded-lg w-24"},t))}),a("div",{className:"flex gap-2",children:[e("div",{className:"h-10 bg-green-200 rounded-lg w-28"}),e("div",{className:"h-10 bg-orange-200 rounded-lg w-32"}),e("div",{className:"h-10 bg-red-200 rounded-lg w-28"})]})]}),e("div",{className:"space-y-4",children:[1,2,3].map(t=>a("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a("div",{className:"p-6 pb-4",children:[a("div",{className:"flex items-start justify-between mb-3 gap-2",children:[a("div",{className:"flex-1",children:[e("div",{className:"h-6 bg-gray-300 rounded w-48 mb-2"}),a("div",{className:"flex items-center gap-2",children:[e("div",{className:"h-4 bg-gray-200 rounded w-40"}),e("div",{className:"h-5 bg-blue-100 rounded-full w-16"})]})]}),e("div",{className:"h-8 bg-yellow-100 rounded-full w-28"})]}),e("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(r=>a("div",{children:[e("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2"}),e("div",{className:"h-5 bg-gray-300 rounded w-24"})]},r))})]}),e("div",{className:"border-t border-gray-100"}),e("div",{className:"p-6 pt-4 bg-gray-50",children:a("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e("div",{className:"h-10 bg-green-200 rounded-lg"}),e("div",{className:"h-10 bg-red-200 rounded-lg"}),e("div",{className:"h-10 bg-yellow-200 rounded-lg"}),e("div",{className:"h-10 bg-gray-200 rounded-lg"})]})})]},t))})]})]})})})}function qt(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 py-6 md:py-8 animate-pulse",children:a("div",{className:"max-w-7xl mx-auto",children:[e("div",{className:"mb-6 md:mb-8",children:e("div",{className:"bg-white/60 backdrop-blur-sm p-6 rounded-3xl shadow-sm",children:a("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a("div",{className:"flex-1",children:[e("div",{className:"h-10 bg-gray-300 rounded w-80 mb-2"}),e("div",{className:"h-5 bg-gray-200 rounded w-96"})]}),e("div",{className:"grid grid-cols-2 sm:flex gap-3",children:[1,2,3,4].map(t=>a("div",{className:"bg-white/80 px-3 py-2 rounded-xl",children:[e("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2"}),e("div",{className:"h-7 bg-gray-300 rounded w-12"})]},t))})]})})}),a("div",{className:"bg-white/60 backdrop-blur-sm p-6 md:p-8 rounded-3xl shadow-sm space-y-8",children:[e("div",{children:e("div",{className:"relative max-w-2xl",children:e("div",{className:"h-12 bg-gray-200 rounded-xl"})})}),a("div",{children:[e("div",{className:"h-6 bg-gray-300 rounded w-48 mb-4"}),e("div",{className:"flex flex-wrap gap-2",children:[1,2,3,4].map(t=>e("div",{className:"h-10 bg-gray-200 rounded-lg w-32"},t))})]}),a("div",{children:[e("div",{className:"h-6 bg-gray-300 rounded w-56 mb-4"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(t=>e("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:a("div",{className:"p-4",children:[a("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"h-4 bg-gray-300 rounded w-32"}),e("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),e("div",{className:"h-8 bg-gray-300 rounded w-16 mb-2"}),e("div",{className:"h-4 bg-gray-200 rounded w-28"})]})},t))})]}),e("div",{className:"space-y-4",children:[1,2,3].map(t=>a("div",{className:"bg-white/80 rounded-xl p-6",children:[a("div",{className:"flex items-start justify-between mb-3",children:[a("div",{className:"flex-1",children:[e("div",{className:"h-6 bg-gray-300 rounded w-48 mb-2"}),e("div",{className:"h-4 bg-gray-200 rounded w-64"})]}),e("div",{className:"h-8 bg-gray-200 rounded-full w-24"})]}),e("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mt-4",children:[1,2,3,4,5].map(r=>a("div",{children:[e("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2"}),e("div",{className:"h-5 bg-gray-300 rounded w-20"})]},r))}),a("div",{className:"flex gap-2 mt-4",children:[e("div",{className:"h-10 bg-gray-200 rounded-lg w-24"}),e("div",{className:"h-10 bg-gray-200 rounded-lg w-32"})]})]},t))})]})]})})})}function Bt(){return a("div",{className:"p-4 md:p-6 animate-pulse",children:[a("div",{className:"flex justify-between items-center mb-6",children:[a("div",{children:[e("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2"}),e("div",{className:"h-4 bg-gray-100 rounded w-64"})]}),a("div",{className:"flex gap-2",children:[e("div",{className:"h-10 bg-gray-200 rounded w-32"}),e("div",{className:"h-10 bg-gray-200 rounded w-24"})]})]}),e("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 mb-6",children:e("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[1,2,3].map(t=>a("div",{children:[e("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e("div",{className:"h-10 bg-gray-100 rounded-xl"})]},t))})}),a("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e("div",{className:"bg-gray-50 border-b border-gray-200",children:e("div",{className:"grid grid-cols-6 gap-4 p-4",children:[1,2,3,4,5,6].map(t=>e("div",{className:"h-4 bg-gray-300 rounded"},t))})}),[1,2,3,4,5,6,7].map(t=>e("div",{className:"border-b border-gray-100 last:border-b-0",children:e("div",{className:"grid grid-cols-6 gap-4 p-4",children:[1,2,3,4,5,6].map(r=>e("div",{className:"h-4 bg-gray-200 rounded"},r))})},t))]}),a("div",{className:"flex justify-between items-center mt-6",children:[e("div",{className:"h-4 bg-gray-200 rounded w-32"}),e("div",{className:"flex gap-2",children:[1,2,3].map(t=>e("div",{className:"h-10 w-10 bg-gray-200 rounded"},t))})]})]})}function Ft(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"text-center mb-12",children:[e("div",{className:"w-20 h-20 bg-blue-100 rounded-full mx-auto mb-6"}),e("div",{className:"h-12 bg-gray-300 rounded w-96 mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-64 mx-auto mb-2"}),e("div",{className:"h-5 bg-gray-200 rounded w-80 mx-auto"})]}),e("div",{className:"space-y-8",children:[1,2,3,4].map(t=>a("div",{className:"bg-white/60 backdrop-blur-sm rounded-3xl shadow-2xl overflow-hidden",children:[e("div",{className:"bg-gradient-to-r ".concat(t%4===0?"from-blue-600 to-blue-700":t%4===1?"from-green-600 to-green-700":t%4===2?"from-purple-600 to-purple-700":"from-orange-600 to-orange-700"," px-6 py-6"),children:a("div",{className:"flex items-center gap-4",children:[e("div",{className:"w-8 h-8 bg-white/30 rounded"}),e("div",{className:"h-7 bg-white/30 rounded w-48"})]})}),e("div",{className:"divide-y divide-gray-200",children:[1,2,3].map(r=>a("div",{className:"p-6",children:[a("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"h-5 bg-gray-300 rounded w-3/4"}),e("div",{className:"w-5 h-5 bg-gray-200 rounded"})]}),e("div",{className:"h-4 bg-gray-100 rounded w-full mt-3"}),e("div",{className:"h-4 bg-gray-100 rounded w-5/6 mt-2"})]},r))})]},t))})]})})})}function Ht(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"text-center mb-12",children:[e("div",{className:"w-20 h-20 bg-blue-100 rounded-full mx-auto mb-6"}),e("div",{className:"h-12 bg-gray-300 rounded w-80 mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-64 mx-auto"})]}),e("div",{className:"bg-white/60 backdrop-blur-sm p-8 rounded-3xl shadow-2xl space-y-8",children:[{color:"blue"},{color:"green"},{color:"purple"},{color:"orange"},{color:"red"},{color:"indigo"}].map((t,r)=>a("div",{className:"border-l-4 border-".concat(t.color,"-500 pl-6"),children:[e("div",{className:"h-7 bg-gray-300 rounded w-64 mb-4"}),r===1||r===2?e("div",{className:"space-y-4",children:a("div",{className:"bg-".concat(t.color,"-50 p-5 rounded-xl"),children:[e("div",{className:"h-5 bg-gray-300 rounded w-48 mb-3"}),e("div",{className:"space-y-2",children:[1,2,3,4].map(s=>e("div",{className:"h-4 bg-gray-200 rounded w-full"},s))})]})}):a("div",{className:"space-y-3",children:[e("div",{className:"h-4 bg-gray-200 rounded w-full"}),e("div",{className:"h-4 bg-gray-200 rounded w-11/12"}),e("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]},r))})]})})})}function Vt(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"text-center mb-12",children:[e("div",{className:"w-20 h-20 bg-indigo-100 rounded-full mx-auto mb-6"}),e("div",{className:"h-12 bg-gray-300 rounded w-96 mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-64 mx-auto mb-2"}),e("div",{className:"h-5 bg-gray-200 rounded w-48 mx-auto"})]}),e("div",{className:"bg-white/60 backdrop-blur-sm p-8 rounded-3xl shadow-2xl space-y-8",children:[{color:"indigo",hasHighlight:!0},{color:"blue",hasCards:!0},{color:"green",hasBoxes:!0},{color:"purple",hasBoxes:!0},{color:"red"},{color:"orange"}].map((t,r)=>a("div",{className:"border-l-4 border-".concat(t.color,"-500 pl-6 ").concat(t.hasHighlight?"bg-indigo-50 rounded-r-lg py-4 pr-6":""),children:[e("div",{className:"h-7 bg-gray-300 rounded w-80 mb-4"}),t.hasCards?e("div",{className:"space-y-3",children:[1,2,3,4].map(s=>a("div",{className:"flex items-start gap-3 bg-".concat(t.color,"-50 p-4 rounded-lg border-l-4 border-").concat(t.color,"-400"),children:[e("div",{className:"w-6 h-6 bg-gray-300 rounded"}),e("div",{className:"flex-1 h-4 bg-gray-300 rounded"})]},s))}):t.hasBoxes?a("div",{className:"bg-".concat(t.color,"-50 border border-").concat(t.color,"-200 rounded-xl p-5"),children:[e("div",{className:"h-6 bg-gray-300 rounded w-48 mb-4"}),e("div",{className:"space-y-3",children:[1,2,3,4].map(s=>e("div",{className:"bg-white p-3 rounded-lg",children:e("div",{className:"h-4 bg-gray-200 rounded w-full"})},s))})]}):a("div",{className:"space-y-3",children:[e("div",{className:"h-4 bg-gray-200 rounded w-full"}),e("div",{className:"h-4 bg-gray-200 rounded w-11/12"}),e("div",{className:"h-4 bg-gray-200 rounded w-10/12"})]})]},r))})]})})})}function Jt(){return e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"text-center mb-12",children:[e("div",{className:"h-12 bg-gray-300 rounded w-64 mx-auto mb-4"}),e("div",{className:"h-5 bg-gray-200 rounded w-96 mx-auto mb-2"}),e("div",{className:"h-5 bg-gray-200 rounded w-80 mx-auto"})]}),a("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a("div",{className:"bg-white/60 backdrop-blur-sm p-8 rounded-3xl shadow-2xl",children:[a("div",{className:"text-center",children:[e("div",{className:"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4"}),e("div",{className:"h-7 bg-gray-300 rounded w-48 mx-auto mb-4"}),a("div",{className:"space-y-2 mb-6",children:[e("div",{className:"h-4 bg-gray-200 rounded w-full"}),e("div",{className:"h-4 bg-gray-200 rounded w-5/6 mx-auto"}),e("div",{className:"h-4 bg-gray-200 rounded w-4/5 mx-auto"})]})]}),e("div",{className:"flex justify-center gap-4 mt-6",children:[1,2,3].map(t=>e("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"},t))})]}),a("div",{className:"bg-white/60 backdrop-blur-sm p-8 rounded-3xl shadow-2xl",children:[a("div",{className:"text-center mb-6",children:[e("div",{className:"w-16 h-16 bg-green-100 rounded-full mx-auto mb-4"}),e("div",{className:"h-7 bg-gray-300 rounded w-32 mx-auto mb-6"})]}),e("div",{className:"space-y-4",children:[1,2,3].map(t=>a("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-100",children:[e("div",{className:"w-5 h-5 bg-gray-300 rounded"}),e("div",{className:"h-4 bg-gray-300 rounded w-32"})]},t))})]}),a("div",{className:"bg-white/60 backdrop-blur-sm p-8 rounded-3xl shadow-2xl",children:[a("div",{className:"text-center mb-6",children:[e("div",{className:"w-16 h-16 bg-purple-100 rounded-full mx-auto mb-4"}),e("div",{className:"h-7 bg-gray-300 rounded w-24 mx-auto mb-6"})]}),e("div",{className:"space-y-4",children:[1,2,3,4].map(t=>a("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-100",children:[e("div",{className:"w-5 h-5 bg-gray-300 rounded"}),e("div",{className:"h-4 bg-gray-300 rounded w-32"})]},t))})]})]})]})})})}function Yt(){return e("div",{className:"flex items-center justify-center min-h-[60vh] p-4 animate-pulse",children:a("div",{className:"text-center",children:[e("div",{className:"w-32 h-32 bg-gray-200 rounded-full mx-auto mb-6"}),e("div",{className:"h-10 bg-gray-300 rounded w-64 mx-auto mb-4"}),e("div",{className:"h-4 bg-gray-200 rounded w-96 mx-auto mb-8"}),e("div",{className:"h-12 bg-gray-300 rounded-xl w-48 mx-auto"})]})})}function Gt(){return e("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:e("div",{className:"relative z-10 w-full max-w-md",children:a("div",{className:"backdrop-blur-md bg-white/20 border border-white/30 p-8 rounded-3xl shadow-2xl animate-pulse",children:[a("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/30 rounded-full mb-6"}),e("div",{className:"h-9 bg-white/30 rounded-lg w-3/4 mx-auto mb-2"}),e("div",{className:"h-6 bg-white/20 rounded-lg w-2/3 mx-auto"})]}),a("div",{className:"space-y-6",children:[a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-24 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]}),a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-20 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]}),e("div",{className:"text-center",children:e("div",{className:"h-4 bg-white/20 rounded w-32 mx-auto"})}),e("div",{className:"pt-4",children:e("div",{className:"h-14 bg-white/30 rounded-2xl"})})]}),e("div",{className:"mt-8 text-center",children:e("div",{className:"h-4 bg-white/20 rounded w-48 mx-auto"})})]})})})}function Kt(){return e("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:e("div",{className:"relative z-10 w-full max-w-md",children:a("div",{className:"backdrop-blur-md bg-white/20 border border-white/30 p-8 rounded-3xl shadow-2xl animate-pulse",children:[a("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/30 rounded-full mb-6"}),e("div",{className:"h-9 bg-white/30 rounded-lg w-3/4 mx-auto mb-2"}),e("div",{className:"h-6 bg-white/20 rounded-lg w-2/3 mx-auto"})]}),a("div",{className:"space-y-6",children:[[1,2].map(t=>a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-24 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]},t)),a("div",{className:"grid grid-cols-2 gap-4",children:[a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-16 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]}),a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-20 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]})]}),a("div",{className:"grid grid-cols-2 gap-4",children:[a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-16 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]}),a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-16 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]})]}),[1,2].map(t=>a("div",{children:[e("div",{className:"h-4 bg-white/30 rounded w-28 mb-3"}),e("div",{className:"h-14 bg-white/20 rounded-2xl"})]},"pass-".concat(t))),e("div",{className:"pt-4",children:e("div",{className:"h-14 bg-white/30 rounded-2xl"})})]}),e("div",{className:"mt-8 text-center",children:e("div",{className:"h-4 bg-white/20 rounded w-48 mx-auto"})})]})})})}class Xt extends mt.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,s){console.error("Error caught by boundary:",r,s),this.setState({error:r,errorInfo:s})}render(){return this.state.hasError?e("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a("div",{className:"max-w-md mx-auto text-center",children:[e("div",{className:"mb-4",children:e("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),e("p",{className:"text-gray-600 mb-4",children:"We're sorry, but there was an error loading the application."}),e("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Reload Page"}),!1]})}):this.props.children}}const je=new Map,Oe=new Map;function st(t){if(!t||t.startsWith("http://")||t.startsWith("https://"))return t;const r="https://academics-5bf1.onrender.com";return"".concat(r).concat(t)}async function Ae(t,r,s={}){const{cache:o=!0,ttl:n=30*1e3,timeout:l=8e3,dedupe:v=!0,retry:g=0,retryDelay:M=500,body:f,headers:N,raw:h=!1,responseType:b="json",dispatch:S=!0,dispatchEvent:_=null}=s,K=f&&!(f instanceof FormData)&&!h?JSON.stringify(f):f instanceof FormData?"[FormData]":"",P="".concat(t,":").concat(r,":").concat(K);if(o&&Oe.has(P)){const A=Oe.get(P);if(Date.now()-A.ts<(A.ttl||n))return A.data;Oe.delete(P)}if(v&&je.has(P))return je.get(P);const O=(async()=>{let A=0;for(;;){const V=new AbortController,ue=setTimeout(()=>V.abort(),l);try{let w;const $={};f&&!(f instanceof FormData)&&!h?(w=JSON.stringify(f),$["Content-Type"]="application/json"):w=f;const de=Object.assign({},N||{},$),T=await fetch(st(r),{method:t,headers:de,body:w,signal:V.signal});if(clearTimeout(ue),!T.ok){const J=await T.json().catch(()=>null),oe=new Error("HTTP ".concat(T.status));throw oe.status=T.status,oe.data=J,oe}let G=null;b==="json"?G=await T.json().catch(()=>null):b==="blob"?G=await T.blob():b==="arrayBuffer"?G=await T.arrayBuffer():b==="text"&&(G=await T.text()),o&&b==="json"&&Oe.set(P,{ts:Date.now(),data:G,ttl:n});try{if(t!=="GET"&&S){let J=[];if(_)J=Array.isArray(_)?_:[_];else{const oe=st(r).toLowerCase();oe.includes("/api/marksheets")&&J.push("marksheetsUpdated"),oe.includes("/api/leaves")&&J.push("notificationsUpdated"),oe.includes("/api/staff-approval")&&J.push("notificationsUpdated"),oe.includes("/api/notifications")&&J.push("notificationsUpdated"),oe.includes("/api/whatsapp-dispatch")&&J.push("marksheetsUpdated","notificationsUpdated")}Array.from(new Set(J)).forEach(oe=>{try{window.dispatchEvent(new Event(oe))}catch(fe){}})}}catch(J){console.debug("apiClient dispatch error",J)}return G}catch(w){A+=1;const $=w&&(w.name==="AbortError"||w.message&&w.message.includes("aborted"));if(A>g||$&&A>g)throw w;const de=Math.max(0,M*Math.pow(2,A-1));await new Promise(T=>setTimeout(T,de))}}})();return je.set(P,O),O.finally(()=>{try{je.delete(P)}catch(A){}}),O}const W={get:(t,r)=>Ae("GET",t,r),post:(t,r,s={})=>Ae("POST",t,Object.assign({},s,{body:r})),put:(t,r,s={})=>Ae("PUT",t,Object.assign({},s,{body:r})),patch:(t,r,s={})=>Ae("PATCH",t,Object.assign({},s,{body:r})),del:(t,r)=>Ae("DELETE",t,r)};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,s,o)=>o?o.toUpperCase():s.toLowerCase()),ot=t=>{const r=Qt(t);return r.charAt(0).toUpperCase()+r.slice(1)},pt=(...t)=>t.filter((r,s,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===s).join(" ").trim(),er=t=>{for(const r in t)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=i.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:n="",children:l,iconNode:v,...g},M)=>i.createElement("svg",{ref:M,...tr,width:r,height:r,stroke:t,strokeWidth:o?Number(s)*24/Number(r):s,className:pt("lucide",n),...!l&&!er(g)&&{"aria-hidden":"true"},...g},[...v.map(([f,N])=>i.createElement(f,N)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,r)=>{const s=i.forwardRef(({className:o,...n},l)=>i.createElement(rr,{ref:l,iconNode:r,className:pt("lucide-".concat(Zt(ot(t))),"lucide-".concat(t),o),...n}));return s.displayName=ot(t),s};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],He=we("bell",ar);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],or=we("circle-alert",sr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ce=we("circle-check-big",nr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lr=we("circle-x",ir);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qe=we("clock",cr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ur=we("info",dr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hr=we("triangle-alert",mr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ve=we("user-check",gr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],nt=we("user-x",fr);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],We=we("x",pr);function br({type:t="info",title:r,message:s,onClose:o,autoClose:n=!0,duration:l=5e3,position:v="top-right"}){i.useEffect(()=>{if(n&&o){const _=setTimeout(o,l);return()=>clearTimeout(_)}},[n,l,o]);const g=_=>{_.preventDefault(),_.stopPropagation(),o&&o()},M={success:e(Ce,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}),error:e(or,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"}),warning:e(hr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-500"}),info:e(ur,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500"})},f={success:"bg-gradient-to-br from-green-50 to-emerald-50",error:"bg-gradient-to-br from-red-50 to-rose-50",warning:"bg-gradient-to-br from-amber-50 to-yellow-50",info:"bg-gradient-to-br from-blue-50 to-cyan-50"},N={success:"border-green-300",error:"border-red-300",warning:"border-amber-300",info:"border-blue-300"},h={success:"bg-green-100",error:"bg-red-100",warning:"bg-amber-100",info:"bg-blue-100"},b={success:"from-green-500 to-emerald-500",error:"from-red-500 to-rose-500",warning:"from-amber-500 to-yellow-500",info:"from-blue-500 to-cyan-500"},S={"top-right":"notification-container notification-top-right","top-left":"notification-container notification-top-left","top-center":"notification-container notification-top-center","bottom-right":"notification-container notification-bottom-right","bottom-left":"notification-container notification-bottom-left","bottom-center":"notification-container notification-bottom-center",center:"notification-container notification-center"};return e("div",{className:"".concat(S[v]),children:a("div",{role:"alert",className:"\n          notification-card notification-interactive\n          relative w-11/12 sm:min-w-[340px] sm:max-w-md \n          rounded-lg sm:rounded-2xl\n          ".concat(f[t],"\n          border-2 ").concat(N[t],"\n          p-2.5 sm:p-5\n          shadow-xl\n          backdrop-blur-md\n          transform-gpu\n        "),style:{boxSizing:"border-box"},children:[o&&e("button",{type:"button",onClick:g,onTouchEnd:g,className:"absolute top-2 right-2 sm:top-3 sm:right-3 z-10\n                     p-1 sm:p-1.5 rounded-lg\n                     bg-white/90 hover:bg-white active:bg-gray-100\n                     border border-gray-300\n                     transition-all duration-200 \n                     hover:scale-110 active:scale-95\n                     shadow-md hover:shadow-lg\n                     cursor-pointer\n                     touch-manipulation","aria-label":"Close alert",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent",minWidth:"32px",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:e(We,{className:"w-4 h-4 sm:w-4 sm:h-4 text-gray-700 stroke-2"})}),a("div",{className:"flex items-start gap-2.5 sm:gap-4 pr-9 sm:pr-11",children:[e("div",{className:"flex-shrink-0 p-1.5 sm:p-2 rounded-lg ".concat(h[t]),children:M[t]}),a("div",{className:"flex-1 min-w-0 pt-0.5",children:[r&&e("h3",{className:"text-gray-900 font-bold text-sm sm:text-base mb-1 \n                           break-words leading-tight",children:r}),s&&e("p",{className:"text-gray-700 text-xs sm:text-sm leading-relaxed \n                          break-words",children:s})]})]}),n&&e("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200/50 overflow-hidden",style:{borderRadius:"0 0 12px 12px"},children:e("div",{className:"h-full bg-gradient-to-r ".concat(b[t]," shadow-sm"),style:{animation:"progress ".concat(l,"ms linear forwards"),transformOrigin:"left"}})})]})})}const bt=i.createContext();function vr({children:t}){const[r,s]=i.useState([]),o=i.useCallback(({type:f="info",title:N,message:h,duration:b=5e3,position:S="top-right",autoClose:_=!0})=>{const K=Date.now()+Math.random();return s(P=>[...P,{id:K,type:f,title:N,message:h,duration:b,position:S,autoClose:_}]),K},[]),n=i.useCallback(f=>{s(N=>N.filter(h=>h.id!==f))},[]),l=i.useCallback((f,N,h={})=>o({type:"success",title:f,message:N,...h}),[o]),v=i.useCallback((f,N,h={})=>o({type:"error",title:f,message:N,...h}),[o]),g=i.useCallback((f,N,h={})=>o({type:"warning",title:f,message:N,...h}),[o]),M=i.useCallback((f,N,h={})=>o({type:"info",title:f,message:N,...h}),[o]);return i.useEffect(()=>{const f=N=>{var h;try{const b=((h=N==null?void 0:N.detail)==null?void 0:h.reason)||"";let S=null;S=M("Update available",a("div",{className:"flex items-center gap-3",children:[e("span",{children:"New version available ‚Äî reload to apply the update."}),e("button",{onClick:()=>{try{window.location.reload()}catch(P){}S&&n(S)},className:"ml-3 px-3 py-1 bg-blue-600 text-white rounded-md text-xs",children:"Reload"})]}),{autoClose:!1,duration:0,position:"top-right"})}catch(b){}};return window.addEventListener("sw:reload-request",f),()=>window.removeEventListener("sw:reload-request",f)},[M,n]),a(bt.Provider,{value:{showAlert:o,hideAlert:n,showSuccess:l,showError:v,showWarning:g,showInfo:M},children:[t,r.map(f=>e(br,{type:f.type,title:f.title,message:f.message,duration:f.duration,position:f.position,autoClose:f.autoClose,onClose:()=>n(f.id)},f.id))]})}function wr(){const t=i.useContext(bt);if(!t)throw new Error("useAlert must be used within AlertProvider");return t}class xr{constructor(){this.registration=null,this.subscription=null}isSupported(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}getPermission(){return this.isSupported()?Notification.permission:"unsupported"}async requestPermission(){if(!this.isSupported())return console.warn("Push notifications are not supported in this browser"),alert("‚ö†Ô∏è Your browser does not support notifications.\n\nPlease use Chrome, Edge, or Firefox."),!1;try{if(Notification.permission==="granted")return console.log("‚úÖ Notification permission already granted"),!0;if(Notification.permission==="denied"){console.warn("‚ùå Notifications are blocked. Please enable them in browser settings.");const s=navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Edge"),o=navigator.userAgent.includes("Edg");let n="‚ùå Notifications are blocked!\n\nTo enable notifications:\n\n";return o?(n+="1. Click the üîí lock icon in the address bar\n",n+='2. Click "Permissions for this site"\n',n+='3. Find "Notifications" and select "Allow"\n',n+="4. Refresh the page"):s?(n+="1. Click the üîí lock icon in the address bar\n",n+='2. Click "Site settings"\n',n+='3. Find "Notifications" and select "Allow"\n',n+="4. Refresh the page"):n+="Go to Settings > Privacy > Notifications\nand allow notifications for this site.",alert(n),!1}console.log("üì¢ Requesting notification permission...");const r=await Notification.requestPermission();return console.log("Notification permission result:",r),r==="granted"?(console.log("‚úÖ Notification permission granted!"),(navigator.platform.includes("Win")||navigator.userAgent.includes("Windows"))&&(console.log("ü™ü Windows detected - sending test notification..."),setTimeout(()=>{this.showTestNotification()},500)),!0):r==="denied"?(console.warn("‚ùå User denied notification permission"),alert("‚ö†Ô∏è Notifications were blocked.\n\nYou won't receive event reminders.\nYou can enable them later in Settings."),!1):(console.log("‚ÑπÔ∏è User dismissed notification permission request"),!1)}catch(r){return console.error("‚ùå Error requesting notification permission:",r),alert("‚ö†Ô∏è Error enabling notifications: "+r.message),!1}}showTestNotification(){if(Notification.permission==="granted")try{const r=new Notification("üéâ Notifications Enabled!",{body:"MSEC Academics notifications are working!\nYou will receive event reminders here.",icon:"/images/android-chrome-192x192.png",badge:"/images/favicon-32x32.png",tag:"test-notification-"+Date.now(),requireInteraction:!1,silent:!1,timestamp:Date.now(),vibrate:[200,100,200],renotify:!0,dir:"auto",lang:"en-US"});r.onclick=function(s){s.preventDefault(),window.focus(),r.close()},setTimeout(()=>{r.close()},5e3),console.log("‚úÖ Test notification sent successfully")}catch(r){console.error("‚ùå Error showing test notification:",r),this.registration&&this.registration.showNotification("üéâ Notifications Enabled!",{body:"MSEC Academics notifications are working!",icon:"/images/android-chrome-192x192.png",tag:"test-notification-"+Date.now()})}}async registerServiceWorker(){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{const r=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});return console.log("Service Worker registered:",r),this.registration=r,await navigator.serviceWorker.ready,console.log("Service Worker is ready"),r}catch(r){return console.error("Service Worker registration failed:",r),null}}async getVapidPublicKey(){try{const r=await W.get("/api/notifications/vapid-public-key");return r&&r.publicKey?r.publicKey:(console.warn("Failed to fetch VAPID key from server, using fallback"),"BI3ZQwdtuxxYpepMvZjy5xkuzLbnsjG8J1jfBkGMi0AzbhWDocIASZkq6ocisfwCTnYCHuogo_O-PJSuyfGWwkU")}catch(r){return console.error("Error fetching VAPID key:",r),"BI3ZQwdtuxxYpepMvZjy5xkuzLbnsjG8J1jfBkGMi0AzbhWDocIASZkq6ocisfwCTnYCHuogo_O-PJSuyfGWwkU"}}async subscribe(){if(this.registration||await this.registerServiceWorker(),!this.registration)return console.error("Service Worker registration required"),null;try{let r=localStorage.getItem("userEmail");if(!r){const o=localStorage.getItem("auth");if(o)try{r=JSON.parse(o).email}catch(n){}}if(!r)return alert("Please login again to enable notifications"),null;let s=await this.registration.pushManager.getSubscription();if(!s){const o=await this.getVapidPublicKey();s=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(o)})}return this.subscription=s,await this.sendSubscriptionToServer(s,r),this.setUserPrefEnabled(!0),s}catch(r){return console.error("‚ùå Failed to subscribe to push notifications:",r),null}}async unsubscribe(){if(!this.subscription){const r=await navigator.serviceWorker.ready;this.subscription=await r.pushManager.getSubscription()}if(this.subscription)try{return await this.subscription.unsubscribe(),await this.removeSubscriptionFromServer(this.subscription),this.subscription=null,this.setUserPrefEnabled(!1),!0}catch(r){return console.error("Failed to unsubscribe:",r),!1}return this.setUserPrefEnabled(!1),!1}async sendSubscriptionToServer(r,s=null){var o;try{if(!s&&(s=localStorage.getItem("userEmail"),!s)){const l=localStorage.getItem("auth");if(l)try{s=JSON.parse(l).email}catch(v){console.error("Error parsing auth data:",v)}}if(console.log("üíæ Sending subscription to server...",{hasSubscription:!!r,userEmail:s,endpoint:((o=r==null?void 0:r.endpoint)==null?void 0:o.substring(0,50))+"..."}),!s)return console.error("‚ùå No userEmail found in localStorage"),alert("Please login again to enable push notifications."),!1;const n=await W.post("/api/notifications/subscribe",{subscription:r,userEmail:s});return console.log("‚úÖ Subscription sent to server successfully:",n),n&&n.message&&n.message.includes("reassigned")&&console.log("üîÑ This browser subscription was reassigned from a previous user"),n&&(n.success===void 0||n.success)?!0:(console.error("‚ùå Failed to send subscription to server:",n),!1)}catch(n){return console.error("‚ùå Error sending subscription to server:",n),!1}}async removeSubscriptionFromServer(r){var s;try{let o=localStorage.getItem("userEmail");if(!o){const n=localStorage.getItem("auth");if(n)try{o=JSON.parse(n).email}catch(l){console.error("Error parsing auth data:",l)}}if(console.log("Removing subscription from server...",{hasSubscription:!!r,userEmail:o,endpoint:((s=r==null?void 0:r.endpoint)==null?void 0:s.substring(0,50))+"..."}),!o)return console.error("No userEmail found in localStorage"),!1;try{const n=await W.post("/api/notifications/unsubscribe",{endpoint:r.endpoint,userEmail:o});return console.log("Subscription removed from server successfully",n),!0}catch(n){return console.error("Failed to remove subscription:",n),!1}}catch(o){return console.error("Error removing subscription from server:",o),!1}}async showLocalNotification(r,s={}){try{if(this.registration||(console.log("No service worker registration, attempting to register..."),await this.registerServiceWorker()),Notification.permission!=="granted"&&(console.log("Notification permission not granted, requesting..."),!await this.requestPermission()))throw console.warn("Notification permission denied"),new Error("Notification permission denied");const n={...{body:"",icon:"/images/android-chrome-192x192.png",badge:"/images/favicon-32x32.png",vibrate:[200,100,200],tag:"msec-notification-"+Date.now(),requireInteraction:!1,data:{},timestamp:Date.now()},...s};if(this.registration&&this.registration.showNotification)console.log("Using service worker showNotification"),await this.registration.showNotification(r,n);else if("serviceWorker"in navigator){console.log("Attempting to get service worker registration...");const l=await navigator.serviceWorker.getRegistration();if(l)console.log("Found service worker registration, using showNotification"),await l.showNotification(r,n);else if(console.log("No service worker found, using direct Notification API"),"Notification"in window)new Notification(r,n);else throw new Error("Notifications not supported")}else if(console.log("Service worker not supported, using direct Notification API"),"Notification"in window)new Notification(r,n);else throw new Error("Notifications not supported");console.log("Notification displayed successfully")}catch(o){throw console.error("Error showing notification:",o),o}}urlBase64ToUint8Array(r){const s="=".repeat((4-r.length%4)%4),o=(r+s).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(o),l=new Uint8Array(n.length);for(let v=0;v<n.length;++v)l[v]=n.charCodeAt(v);return l}getUserPrefEnabled(){try{const r=localStorage.getItem("auth"),s=localStorage.getItem("userEmail")||(r?JSON.parse(r).email:null);if(!s)return null;const o="notifications:".concat(s,":enabled"),n=localStorage.getItem(o);return n===null?null:n==="true"}catch(r){return null}}setUserPrefEnabled(r){try{const s=localStorage.getItem("auth"),o=localStorage.getItem("userEmail")||(s?JSON.parse(s).email:null);if(!o)return;const n="notifications:".concat(o,":enabled");localStorage.setItem(n,r?"true":"false")}catch(s){}}async initialize(){var r;if(!this.isSupported())return console.warn("Push notifications not supported"),!1;try{await this.registerServiceWorker();const s=this.getUserPrefEnabled();if(Notification.permission==="granted"){const o=await((r=this.registration)==null?void 0:r.pushManager.getSubscription());return o&&(this.subscription=o,s===!0?await this.sendSubscriptionToServer(o):console.log("Skipping auto-resync due to user preference OFF")),!0}return!1}catch(s){return console.error("Error initializing notifications:",s),!1}}async checkCurrentSubscription(){this.registration||await this.registerServiceWorker();try{const r=await this.registration.pushManager.getSubscription();if(!r)return console.log("‚ÑπÔ∏è No push subscription exists in this browser"),{found:!1};const s=await W.post("/api/subscription-check",{endpoint:r.endpoint});return s.found?(console.log("üîç This browser is subscribed as: ".concat(s.userEmail)),{found:!0,userEmail:s.userEmail,active:s.active,endpoint:r.endpoint}):(console.log("üîç This subscription is not registered to any user"),{found:!1})}catch(r){return console.error("‚ùå Error checking subscription:",r),{error:r.message}}}async handleLogout(){var r;try{let s=localStorage.getItem("userEmail");if(!s){const n=localStorage.getItem("auth");if(n)try{s=JSON.parse(n).email}catch(l){}}if(!s)return console.log("‚ùì No user email found during logout"),!1;try{await W.post("/api/notifications/deactivate",{userEmail:s}).catch(()=>{})}catch(n){}this.registration||await this.registerServiceWorker();const o=await((r=this.registration)==null?void 0:r.pushManager.getSubscription());if(o)try{await W.post("/api/notifications/deactivate",{userEmail:s,endpoint:o.endpoint}).catch(()=>{})}catch(n){}return this.subscription=null,!0}catch(s){return console.error("‚ùå Error in handleLogout:",s),!1}}}const _e=new xr,yr=()=>_e.requestPermission(),Be=()=>_e.subscribe(),it=()=>_e.unsubscribe(),Nr=()=>_e.isSupported(),kr=()=>_e.getPermission(),Sr=()=>_e.checkCurrentSubscription();function Er({isOpen:t,onClose:r,userEmail:s,userRole:o,isMobile:n=!1}){const l=ht(),{showSuccess:v,showError:g,showWarning:M,showInfo:f}=wr(),N=i.useRef(null),h=i.useRef(null),b=i.useRef(null),S=i.useRef(!0),[_,K]=i.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 768px)").matches),P=n||_,[O,A]=i.useState(!1),[V,ue]=i.useState(!0),[w]=i.useState(()=>Nr()),[$,de]=i.useState(()=>typeof window<"u"&&"Notification"in window?Notification.permission:"default"),[T,G]=i.useState(!1),[J,oe]=i.useState(!1),[fe,d]=i.useState("draw"),[y,k]=i.useState(null),[E,X]=i.useState(!1),[q,z]=i.useState(!1),[te,Ne]=i.useState(""),[u,x]=i.useState(""),[j,p]=i.useState(""),[ne,B]=i.useState(""),[le,U]=i.useState(!1),[m,D]=i.useState(!1);i.useState(0),i.useRef(O);const I=i.useRef(!1);i.useEffect(()=>(S.current=!0,()=>{S.current=!1}),[]),i.useEffect(()=>{if(!(n||_))return;let c;return t&&(c=document.body.style.overflow,document.body.style.overflow="hidden"),()=>{t&&(document.body.style.overflow=c)}},[t,n,_]),i.useEffect(()=>{if(!t)return;let c=!1;return D(!0),(async()=>{try{let C="default";w&&("Notification"in window?C=Notification.permission:C=kr()),console.log("Current notification permission:",C),c||de(C);const re=localStorage.getItem("userSettings");let ie=!1;if(re){const he=JSON.parse(re);ie=he.notificationsEnabled===!0,console.log("Loaded user preference:",ie),c||(ue(he.emailNotifications!==!1),A(ie))}else console.log("New user - defaulting notifications to OFF"),c||(A(!1),localStorage.setItem("userSettings",JSON.stringify({notificationsEnabled:!1,emailNotifications:!0})));try{const he=await Sr(),ce=(he==null?void 0:he.found)===!0;console.log("Current subscription status:",ce,"| User wants:",ie),ie&&!ce&&C==="granted"?(console.log("Creating missing subscription..."),await Be()):!ie&&ce&&(console.log("Removing unwanted subscription..."),await it())}catch(he){console.error("Error syncing subscription:",he)}}catch(C){console.error("Error loading settings:",C)}finally{c||D(!1)}})(),()=>{c=!0}},[t,w]),i.useEffect(()=>{if(P)return;const c=L=>{N.current&&!N.current.contains(L.target)&&(m||r())};return t&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[t,r,P,m]),i.useEffect(()=>{if(P)return;const c=L=>{L.key==="Escape"&&t&&r()};return t&&document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[t,r,P]);const Z=async()=>{if(I.current){console.log("Toggle already in progress, ignoring...");return}if(T||!w||m){console.log("Toggle blocked: loading=",T,"supported=",w,"initializing=",m);return}const c=!O;console.log("Toggle clicked - changing from",O,"to",c),A(c),F("notificationsEnabled",c),I.current=!0,G(!0);try{if(c){console.log("Enabling notifications...");const L="Notification"in window?Notification.permission:"default";if(console.log("Current browser permission:",L),L==="granted"){console.log("Permission already granted, subscribing..."),de("granted");const C=await Be();C?(console.log("Subscription successful:",C),v("Notifications Enabled","Push notifications activated!")):(console.error("Subscription returned null"),A(!1),F("notificationsEnabled",!1),g("Subscription Failed","Unable to subscribe to notifications. Try again."))}else if(L==="denied")console.log("Permission denied by browser"),A(!1),F("notificationsEnabled",!1),de("denied"),g("Permission Blocked","Please enable notifications in your browser settings");else if(console.log("Requesting permission..."),await yr()){de("granted");const re=await Be();re?(console.log("Subscription successful:",re),v("Notifications Enabled","Push notifications activated!")):(console.error("Subscription returned null"),A(!1),F("notificationsEnabled",!1),g("Subscription Failed","Unable to subscribe to notifications. Try again."))}else console.log("Permission request denied"),A(!1),F("notificationsEnabled",!1),de("denied"),g("Permission Blocked","Please enable notifications in your browser settings")}else{console.log("Disabling notifications...");const L=await it();console.log("Unsubscribe result:",L),f("Notifications Disabled","Push notifications turned off")}}catch(L){console.error("Notification toggle error:",L),A(!c),F("notificationsEnabled",!c),g("Error","Failed to update notification settings")}finally{G(!1),I.current=!1}},Q=()=>{const c=!V;ue(c),F("emailNotifications",c)},F=(c,L)=>{const C=JSON.parse(localStorage.getItem("userSettings")||"{}");C[c]=L,localStorage.setItem("userSettings",JSON.stringify(C))},se=async()=>{if(B(""),!te||!u||!j){B("All fields are required");return}if(u!==j){B("New passwords do not match");return}if(u.length<6){B("New password must be at least 6 characters");return}U(!0);try{const c=localStorage.getItem("userId");if(!c){B("Session expired. Please log out and log in again.");return}const L=await W.patch("/api/users?action=reset-password&userId=".concat(c),{currentPassword:te,newPassword:u});if(!L||!L.success){B((L==null?void 0:L.error)||"Failed to reset password");return}v("Success","Password changed successfully!"),H()}catch(c){console.error("Password reset error:",c),B("Error: "+c.message)}finally{U(!1)}},H=()=>{z(!1),Ne(""),x(""),p(""),B("")},R=(c,L)=>c.touches&&c.touches[0]?{x:c.touches[0].clientX-L.left,y:c.touches[0].clientY-L.top}:{x:c.clientX-L.left,y:c.clientY-L.top},pe=c=>{c.preventDefault(),X(!0);const L=h.current.getBoundingClientRect(),C=h.current.getContext("2d"),re=R(c,L);C.beginPath(),C.moveTo(re.x,re.y)},be=c=>{if(!E)return;c.preventDefault();const L=h.current.getBoundingClientRect(),C=h.current.getContext("2d"),re=R(c,L);C.lineTo(re.x,re.y),C.stroke()},Ee=c=>{c&&c.preventDefault(),X(!1)},De=c=>{var re;const L=(re=c.target.files)==null?void 0:re[0];if(!L)return;if(L.size>2*1024*1024){g("File too large","Maximum 2MB allowed");return}const C=new FileReader;C.onload=ie=>{const he=new Image;he.onload=()=>{const ce=document.createElement("canvas");ce.width=he.width,ce.height=he.height;const Pe=ce.getContext("2d");Pe.fillStyle="#FFFFFF",Pe.fillRect(0,0,ce.width,ce.height),Pe.drawImage(he,0,0);const Le=Pe.getImageData(0,0,ce.width,ce.height).data;let xe=ce.width,ye=ce.height,ke=0,Se=0;for(let me=0;me<Le.length;me+=4){const Ie=Le[me],Ct=Le[me+1],_t=Le[me+2],Rt=Le[me+3];if((Ie<250||Ct<250||_t<250)&&Rt>128){const Ke=me/4,Xe=Ke%ce.width,Ze=Math.floor(Ke/ce.width);xe=Math.min(xe,Xe),ye=Math.min(ye,Ze),ke=Math.max(ke,Xe),Se=Math.max(Se,Ze)}}const Te=10;if(xe=Math.max(0,xe-Te),ye=Math.max(0,ye-Te),ke=Math.min(ce.width,ke+Te),Se=Math.min(ce.height,Se+Te),xe<ke&&ye<Se){const me=document.createElement("canvas");me.width=ke-xe,me.height=Se-ye;const Ie=me.getContext("2d");Ie.fillStyle="#FFFFFF",Ie.fillRect(0,0,me.width,me.height),Ie.drawImage(ce,xe,ye,ke-xe,Se-ye,0,0,me.width,me.height),k(me.toDataURL("image/png"))}else k(ce.toDataURL("image/png"))},he.src=ie.target.result},C.readAsDataURL(L)},Re=()=>{h.current&&h.current.getContext("2d").clearRect(0,0,h.current.width,h.current.height),k(null),b.current&&(b.current.value="")},xt=async()=>{var L;const c=fe==="draw"?(L=h.current)==null?void 0:L.toDataURL("image/png"):y;if(!c){g("No signature","Please draw or upload a signature");return}try{const C=JSON.parse(localStorage.getItem("auth")||"{}"),re=(C==null?void 0:C.id)||localStorage.getItem("userId");if(C.eSignature=c,localStorage.setItem("auth",JSON.stringify(C)),re)try{const ie=await W.patch("/api/users?action=update-signature&userId=".concat(re),{eSignature:c});(!ie||!ie.success)&&console.warn("Could not persist signature to backend:",ie==null?void 0:ie.error)}catch(ie){console.warn("Backend signature save failed:",ie&&ie.message?ie.message:ie)}try{window.dispatchEvent(new Event("authStateChanged"))}catch(ie){}v("Saved","Signature saved successfully!"),oe(!1),d("draw"),k(null)}catch(C){console.error("Signature save error:",C),g("Error","Failed to save signature")}},Ge=()=>{oe(!1),d("draw"),k(null),Re()},yt=()=>{try{r()}catch(c){console.error("Error closing modal:",c)}localStorage.removeItem("auth"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("authStateChanged"));try{l("/login")}catch(c){window.location.href="/login"}},Nt=c=>{c.stopPropagation(),c.preventDefault(),window.location.href="mailto:support@msecacademics.edu?subject=MSEC Academics Support",setTimeout(()=>{r()},300)};if(!t)return null;const kt=()=>{const c=(()=>{if(o==="student")try{const C=JSON.parse(localStorage.getItem("auth")||"{}");return(C==null?void 0:C.name)||s}catch(C){return s}return s})(),L=(()=>{var C;if(o==="student")try{const re=JSON.parse(localStorage.getItem("auth")||"{}");return((C=re==null?void 0:re.name)==null?void 0:C.charAt(0).toUpperCase())||"S"}catch(re){return"S"}return(s==null?void 0:s.charAt(0).toUpperCase())||"?"})();return a(ge,{children:[e("button",{type:"button",onClick:C=>{C.stopPropagation(),m||r()},className:"absolute z-10 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 active:bg-gray-300 transition-colors touch-manipulation ".concat(_?"top-3 right-3 sm:top-4 sm:right-4":"top-3 right-3"),"aria-label":"Close settings",style:{touchAction:"manipulation",boxSizing:"border-box"},children:e("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e("div",{className:"px-4 sm:px-4 py-3 sm:py-4 border-b border-[#e7edf4] hover:bg-gray-50/50 transition-colors duration-200",children:a("div",{className:"flex items-center gap-3 pr-6",children:[e("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center flex-shrink-0 group-hover:shadow-md group-hover:scale-105 transition-all duration-200",children:e("span",{className:"text-base font-bold text-yellow-600 group-hover:text-yellow-700 transition-colors duration-200",children:L})}),a("div",{className:"flex-1 min-w-0",children:[e("h3",{className:"text-[#0b1220] font-semibold text-sm truncate group-hover:text-black transition-colors duration-200",children:c}),a("p",{className:"text-[#475569] text-xs capitalize group-hover:text-[#374151] transition-colors duration-200",children:[o," Account"]})]})]})})]})},St=()=>a("div",{className:"px-3 sm:px-4 py-3 sm:py-4 space-y-4 sm:space-y-5 flex-1 overflow-y-auto overflow-x-hidden smooth-scroll settings-content",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",touchAction:"pan-y",WebkitTapHighlightColor:"transparent",scrollBehavior:"smooth",width:"100%",boxSizing:"border-box"},children:[o!=="student"&&a("div",{children:[a("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Account"]}),a("div",{className:"space-y-2",children:[a("button",{type:"button",onClick:c=>{c.stopPropagation(),oe(!0)},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] cursor-pointer group",style:{touchAction:"manipulation",pointerEvents:"auto"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a("div",{className:"flex-1 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] transition-colors duration-200",children:"Add Signature"}),e("p",{className:"text-xs text-[#60758a] group-hover:text-[#4a5568] mt-0.5 transition-colors duration-200",children:"Draw your digital signature for PDFs"})]}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),a("button",{type:"button",onClick:c=>{c.stopPropagation(),z(!0),B("")},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] cursor-pointer group",style:{touchAction:"manipulation",pointerEvents:"auto"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a("div",{className:"flex-1 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] transition-colors duration-200",children:"Reset Password"}),e("p",{className:"text-xs text-[#60758a] group-hover:text-[#4a5568] mt-0.5 transition-colors duration-200",children:"Change your account password"})]}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),o==="student"&&a("div",{children:[a("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Account"]}),e("div",{className:"space-y-2",children:a("button",{type:"button",onClick:c=>{c.stopPropagation(),z(!0),B("")},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] cursor-pointer group",style:{touchAction:"manipulation",pointerEvents:"auto"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a("div",{className:"flex-1 min-w-0",children:[e("p",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] transition-colors duration-200",children:"Change Password"}),e("p",{className:"text-xs text-[#60758a] group-hover:text-[#4a5568] mt-0.5 transition-colors duration-200",children:"Update your login password"})]}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),a("div",{className:"border-t border-[#e7edf4] pt-3",children:[a("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),"Notifications"]}),!w&&e("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-3",children:e("p",{className:"text-xs text-yellow-700",children:"Browser notifications not supported"})}),$==="denied"&&e("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-3",children:e("p",{className:"text-xs text-red-700",children:"Notifications blocked. Enable in browser settings."})}),O&&$==="granted"&&e("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 mb-3",children:e("p",{className:"text-xs text-green-700",children:"‚úì Notifications enabled successfully!"})}),a("div",{className:"space-y-3",children:[a("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/6 min-h-[52px]",children:[a("div",{className:"flex-1",children:[e("p",{className:"text-sm font-medium text-[#111418]",children:"Push Notifications"}),e("p",{className:"text-xs text-[#60758a]",children:"Get academic notifications"})]}),e("div",{className:"flex-shrink-0 toggle-touch-area",children:e("button",{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),console.log("Button clicked by user"),Z()},disabled:T||!w||$==="denied"||m,className:"toggle-switch ".concat(O?"enabled":"disabled"," ").concat(T||m?"toggle-loading":""," disabled:opacity-50 disabled:cursor-not-allowed"),style:{touchAction:"manipulation",pointerEvents:"auto"},"aria-label":"".concat(O?"Disable":"Enable"," push notifications"),children:T?e("div",{className:"toggle-knob",children:a("svg",{className:"animate-spin h-3 w-3 text-theme-gold-600 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e("div",{className:"toggle-knob ".concat(O?"enabled":"disabled")})})})]}),a("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/6 min-h-[52px]",children:[a("div",{className:"flex-1",children:[e("p",{className:"text-sm font-medium text-[#111418]",children:"Email Notifications"}),e("p",{className:"text-xs text-[#60758a]",children:"Receive academic updates via email"})]}),e("div",{className:"flex-shrink-0 toggle-touch-area",children:e("button",{type:"button",onClick:c=>{c.stopPropagation(),Q()},className:"toggle-switch ".concat(V?"enabled":"disabled"),style:{touchAction:"manipulation",pointerEvents:"auto"},"aria-label":"".concat(V?"Disable":"Enable"," email notifications"),children:e("div",{className:"toggle-knob ".concat(V?"enabled":"disabled")})})})]})]})]}),a("div",{className:"border-t border-[#e7edf4] pt-3",children:[a("h4",{className:"text-sm font-semibold text-[#111418] group-hover:text-[#0b1220] mb-2 flex items-center gap-2 transition-colors duration-200",children:[e("svg",{className:"w-4 h-4 group-hover:text-yellow-600 transition-colors duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),"Help & Support"]}),e("div",{className:"space-y-2",children:a("button",{type:"button",onClick:Nt,className:"w-full flex items-center gap-3 p-3 rounded-lg bg-white/6 hover:bg-white/12 hover:shadow-sm active:bg-white/5 transition-all duration-200 text-left min-h-[52px] cursor-pointer group",style:{touchAction:"manipulation",pointerEvents:"auto"},children:[e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] flex-shrink-0 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e("span",{className:"text-sm font-medium text-[#111418] group-hover:text-[#0b1220] flex-1 transition-colors duration-200",children:"Email Support"}),e("svg",{className:"w-4 h-4 text-[#60758a] group-hover:text-[#4a5568] group-hover:translate-x-1 group-hover:-translate-y-1 flex-shrink-0 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),e("div",{className:"border-t border-[#e7edf4] pt-3 mt-3",children:a("button",{type:"button",onClick:c=>{c.stopPropagation(),yt()},className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-red-50 hover:bg-red-100 active:bg-red-200 text-red-600 font-semibold text-sm transition-colors min-h-[48px] cursor-pointer",style:{touchAction:"manipulation",pointerEvents:"auto"},children:[e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})})]}),Ue=a("div",{ref:N,onClick:c=>c.stopPropagation(),onMouseDown:c=>c.stopPropagation(),className:(_?"inner-panel pointer-events-auto":"settings-glass-card no-mobile-backdrop pointer-events-auto")+" rounded-xl shadow-lg overflow-hidden w-full max-w-sm mx-auto flex flex-col group "+(_?"rounded-b-2xl sm:rounded-xl max-w-md":"absolute top-full right-0 mt-2 w-80"),style:{boxShadow:"0 8px 28px rgba(2,6,23,0.06)",background:_?"#ffffff":void 0,maxHeight:_?"calc(100vh - 80px)":"90vh",overflowY:"auto",..._&&{marginTop:"100px",marginLeft:"auto",marginRight:"auto"}},onMouseEnter:()=>{!P&&typeof document<"u"&&document.body.classList.add("settings-hover-active")},onMouseLeave:()=>{!P&&typeof document<"u"&&document.body.classList.remove("settings-hover-active")},children:[e(kt,{}),e(St,{}),q&&e("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:c=>{c.currentTarget===c.target&&H()},children:a("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm mx-4 shadow-2xl max-h-[90vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[e("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reset Password"}),ne&&e("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e("p",{className:"text-sm text-red-700",children:ne})}),a("div",{className:"space-y-4 mb-6",children:[a("div",{children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),e("input",{type:"password",value:te,onChange:c=>Ne(c.target.value),placeholder:"Enter current password",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-500 focus:outline-none text-base",autoComplete:"current-password"})]}),a("div",{children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),e("input",{type:"password",value:u,onChange:c=>x(c.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-500 focus:outline-none text-base",autoComplete:"new-password"})]}),a("div",{children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),e("input",{type:"password",value:j,onChange:c=>p(c.target.value),placeholder:"Confirm new password",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-500 focus:outline-none text-base",autoComplete:"new-password"})]})]}),a("div",{className:"flex gap-3",children:[e("button",{onClick:H,className:"flex-1 px-4 py-2.5 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold text-sm transition-colors",children:"Cancel"}),e("button",{onClick:se,disabled:le,className:"flex-1 px-4 py-2.5 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 disabled:opacity-60 font-semibold text-sm transition-colors",children:le?"Resetting...":"Reset Password"})]})]})}),J&&e("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:c=>{c.currentTarget===c.target&&Ge()},children:a("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4 shadow-2xl max-h-[90vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[e("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add Your Signature"}),e("p",{className:"text-sm text-gray-600 mb-5",children:"This signature will be used in generated PDFs"}),a("div",{className:"flex gap-2 mb-5 bg-gray-100 p-1 rounded-lg",children:[e("button",{onClick:()=>d("draw"),className:"flex-1 py-2.5 px-4 rounded-md font-semibold text-sm transition-all ".concat(fe==="draw"?"bg-white text-gray-900 shadow-md":"text-gray-600 hover:text-gray-900"),children:"‚úçÔ∏è Draw"}),e("button",{onClick:()=>d("upload"),className:"flex-1 py-2.5 px-4 rounded-md font-semibold text-sm transition-all ".concat(fe==="upload"?"bg-white text-gray-900 shadow-md":"text-gray-600 hover:text-gray-900"),children:"üì§ Upload"})]}),fe==="draw"&&e("div",{className:"mb-5 border-2 border-gray-300 rounded-xl overflow-hidden bg-white",style:{height:"160px"},children:e("canvas",{ref:h,width:400,height:160,onMouseDown:pe,onMouseMove:be,onMouseUp:Ee,onMouseLeave:Ee,onTouchStart:pe,onTouchMove:be,onTouchEnd:Ee,className:"w-full h-full cursor-crosshair",style:{touchAction:"none",display:"block"}})}),fe==="upload"&&a("div",{className:"mb-5",children:[e("input",{ref:b,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:De,className:"hidden",id:"signature-upload"}),y?e("div",{className:"border-2 border-gray-300 rounded-xl overflow-hidden bg-white flex items-center justify-center",style:{height:"160px"},children:e("img",{src:y,alt:"Uploaded",className:"max-w-full max-h-full object-contain"})}):a("label",{htmlFor:"signature-upload",className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-xl p-8 cursor-pointer hover:border-yellow-500 hover:bg-yellow-50 transition-all",style:{height:"160px"},children:[e("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Click to upload signature"}),e("p",{className:"text-xs text-gray-500",children:"JPEG or PNG (max 2MB)"})]})]}),a("div",{className:"flex gap-2",children:[e("button",{onClick:Re,className:"flex-1 px-4 py-2.5 border-2 border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 font-semibold text-sm transition-colors",children:"Clear"}),e("button",{onClick:Ge,className:"flex-1 px-4 py-2.5 border-2 border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 font-semibold text-sm transition-colors",children:"Cancel"}),e("button",{onClick:xt,className:"flex-1 px-4 py-2.5 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 font-semibold text-sm transition-colors shadow-md",children:"Save"})]})]})})]});if(!P)return Ue;const Et=e("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/60 backdrop-blur-sm",onClick:c=>{c.currentTarget===c.target&&r()},children:e("div",{className:"w-full flex-1 overflow-y-auto",children:Ue})});return _?ze.createPortal(Et,document.body):Ue}function vt({children:t,actions:r=[],onSwipe:s}){const[o,n]=i.useState(0),[l,v]=i.useState(!1),[g,M]=i.useState(!1),f=i.useRef(0),N=i.useRef(0),h=i.useRef(0),b=i.useRef(null),S=50,_=200,K=200;i.useEffect(()=>{const w=$=>{b.current&&!b.current.contains($.target)&&g&&V()};return document.addEventListener("mousedown",w),document.addEventListener("touchstart",w),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("touchstart",w)}},[g]);const P=w=>{f.current=w.touches[0].clientX,N.current=w.touches[0].clientY,v(!0)},O=w=>{if(!l)return;const $=w.touches[0].clientX,de=w.touches[0].clientY,T=$-f.current,G=de-N.current,J=10;if(!(Math.abs(T)>J&&Math.abs(T)>Math.abs(G)*1.5))return;const fe=T>0,d=T<0,y=r.some(X=>X.direction==="right"),k=r.some(X=>X.direction!=="right");if(fe&&!y||d&&!k)return;let E=Math.max(Math.min(T,_),-_);h.current=E,n(E)},A=()=>{if(v(!1),Math.abs(h.current)>S){const w=h.current>0,$=r.filter(G=>w?G.direction==="right":G.direction!=="right");if(w&&$.some(G=>G.autoTrigger)){const G=$.find(J=>J.autoTrigger);if(G){V(),G.onClick&&G.onClick();return}}const de=Math.min($.length*K,_),T=w?de:-de;n(T),M(!0),s&&s()}else V()},V=()=>{n(0),M(!1),h.current=0},ue=w=>{V(),w.onClick&&w.onClick()};return a("div",{ref:b,className:"relative overflow-hidden rounded-xl shadow-sm border border-gray-200",style:{touchAction:"pan-y",transform:"translateZ(0)",willChange:l?"transform":"auto"},children:[e("div",{className:"absolute inset-y-0 right-0 flex flex-col items-center justify-center gap-3 py-3 z-0",style:{width:"200px"},children:r.filter(w=>w.direction!=="right").map((w,$)=>a("button",{onClick:()=>ue(w),className:"flex items-center justify-center gap-2 px-6 py-3 font-semibold transition-all duration-200 text-sm rounded-lg shadow-md hover:shadow-lg active:scale-95 ".concat(w.className||"border-gray-200 text-gray-600 bg-white"),style:{minWidth:"140px",minHeight:"48px"},title:w.label,children:[w.icon,e("span",{children:w.label})]},$))}),e("div",{className:"absolute inset-y-0 left-0 flex flex-col items-center justify-center gap-3 py-3 z-0",style:{width:"200px"},children:r.filter(w=>w.direction==="right").map((w,$)=>a("button",{onClick:()=>ue(w),className:"flex items-center justify-center gap-2 px-6 py-3 font-semibold transition-all duration-200 text-sm rounded-lg shadow-md hover:shadow-lg active:scale-95 ".concat(w.className||"border-gray-200 text-gray-600 bg-white"),style:{minWidth:"140px",minHeight:"48px"},title:w.label,children:[w.icon,e("span",{children:w.label})]},$))}),e("div",{className:"relative z-10 bg-white rounded-xl",style:{transform:"translate3d(".concat(o,"px, 0, 0)"),transition:l?"none":"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:l?"transform":"auto",boxShadow:g?"0 4px 6px -1px rgba(0, 0, 0, 0.1)":"none"},onTouchStart:P,onTouchMove:O,onTouchEnd:A,children:t})]})}function Cr(t={}){i.useEffect(()=>{if(!("serviceWorker"in navigator)){console.warn("Service Workers not supported");return}const r=s=>{if(!s.data)return;const{type:o,data:n}=s.data;o==="NOTIFICATION_RECEIVED"&&t[n==null?void 0:n.notificationType]&&(console.log("üì≤ Push notification received: ".concat(n.notificationType)),console.log("   Triggering refresh handler..."),t[n.notificationType](n))};return navigator.serviceWorker.addEventListener("message",r),()=>{navigator.serviceWorker.removeEventListener("message",r)}},[t])}function da(t){i.useEffect(()=>{const r=()=>{document.hidden||(console.log("üì± Page came into focus, refreshing data..."),t==null||t())};return document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)}},[t])}const _r=i.memo(({notification:t,onMarkRead:r})=>{var s;return e("div",{className:"border rounded-xl p-4 sm:p-5 transition-all ".concat(t.read?"bg-white border-gray-200":"bg-blue-50 border-blue-200"),children:a("div",{className:"flex items-start justify-between gap-3",children:[a("div",{className:"flex-1 min-w-0",children:[a("div",{className:"flex items-center gap-2 mb-1",children:[e("span",{className:"text-xs font-bold px-2 py-1 rounded-full ".concat(t.read?"bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700"),children:((s=t.type)==null?void 0:s.replace(/_/g," "))||"notification"}),!t.read&&e("span",{className:"text-[11px] font-semibold text-blue-700",children:"NEW"})]}),e("h3",{className:"text-sm sm:text-base font-bold text-gray-900 break-words",children:t.title}),e("p",{className:"text-xs sm:text-sm text-gray-700 mt-1 break-words",children:t.body}),e("p",{className:"text-[11px] text-gray-500 mt-2",children:t.createdAt?new Date(t.createdAt).toLocaleString():"Just now"})]}),!t.read&&e("button",{onClick:()=>r(t._id),className:"text-xs font-semibold text-green-700 bg-green-50 border border-green-100 px-3 py-1.5 rounded-lg hover:bg-green-100",children:"Mark read"})]})})}),Rr=i.memo(({request:t,onApprove:r,processing:s})=>{var n,l,v,g;const o=i.useMemo(()=>[{label:"Record",icon:e(Ce,{className:"w-5 h-5"}),onClick:()=>r(t),className:"bg-green-600 hover:bg-green-700 text-white"}],[r,t]);return e(vt,{actions:o,children:a("div",{className:"bg-gradient-to-br from-white to-amber-50 border-2 border-amber-200 rounded-lg p-3 hover:border-amber-400 transition-all",children:[a("div",{className:"flex items-start justify-between mb-2",children:[a("div",{children:[e("p",{className:"font-semibold text-gray-900",children:(n=t.data)==null?void 0:n.studentName}),e("p",{className:"text-xs text-gray-600",children:(l=t.data)==null?void 0:l.regNumber})]}),e("span",{className:"text-xs font-bold px-2 py-1 rounded-full bg-amber-100 text-amber-800",children:"Late"})]}),a("p",{className:"text-sm text-gray-700 mb-2",children:[e("strong",{children:"Reason:"})," ",(v=t.data)==null?void 0:v.reason]}),a("p",{className:"text-xs text-gray-600 mb-3",children:["Expected: ",new Date((g=t.data)==null?void 0:g.expectedArrivalTime).toLocaleString()]}),e("p",{className:"text-xs text-green-600 mb-3 font-semibold",children:"üëâ Student will confirm arrival in their dashboard"}),e("button",{onClick:()=>r(t),disabled:s===t._id,className:"hidden sm:flex w-full items-center justify-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white text-sm font-semibold rounded-lg transition-colors",children:s===t._id?a(ge,{children:[a("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Recording..."]}):a(ge,{children:[e(Ce,{className:"w-4 h-4"}),"Record"]})})]})})}),Lr=i.memo(({request:t,onApprove:r,onReject:s,processing:o})=>{var l,v;const n=i.useMemo(()=>[{label:"Reject",icon:e(nt,{className:"w-5 h-5"}),onClick:()=>s(t),className:"bg-red-600 hover:bg-red-700 text-white"},{label:"Accept",icon:e(Ve,{className:"w-5 h-5"}),onClick:()=>r(t),className:"bg-green-600 hover:bg-green-700 text-white"}],[r,s,t]);return e(vt,{actions:n,children:a("div",{className:"bg-gradient-to-br from-white to-gray-50 border-2 border-gray-200 rounded-xl p-4 sm:p-5 hover:border-theme-gold/30 transition-all duration-200",children:[e("div",{className:"mb-3 flex items-center justify-between",children:e("span",{className:"text-xs font-bold px-2 py-1 rounded-full ".concat(t.type==="staff_account_approval"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"),children:t.type==="staff_account_approval"?"üë§ Staff Account":"üìã Leave Request"})}),t.type==="staff_account_approval"?a("div",{className:"mb-4",children:[a("div",{className:"flex items-start justify-between mb-3",children:[a("div",{className:"flex-1",children:[e("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-1",children:t.data.staffName}),e("p",{className:"text-sm text-gray-600 break-all",children:t.data.staffEmail}),t.data.phoneNumber&&a("p",{className:"text-sm text-gray-600 mt-1",children:["üì± ",t.data.phoneNumber]})]}),e("div",{className:"w-10 h-10 rounded-full bg-theme-gold-gradient flex items-center justify-center flex-shrink-0 ml-3",children:e("span",{className:"text-white font-bold text-sm",children:(l=t.data.staffName)==null?void 0:l.charAt(0).toUpperCase()})})]}),a("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[a("div",{className:"bg-white rounded-lg p-2 sm:p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Department"}),e("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:t.data.department})]}),a("div",{className:"bg-white rounded-lg p-2 sm:p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Year"}),e("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:t.data.year})]}),a("div",{className:"bg-white rounded-lg p-2 sm:p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Section"}),e("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:t.data.section})]})]})]}):a("div",{className:"mb-4",children:[a("div",{className:"flex items-start justify-between mb-4",children:[a("div",{className:"flex-1",children:[e("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-2",children:t.data.studentName||"Unknown Student"}),a("div",{className:"space-y-1 text-sm",children:[a("p",{className:"text-gray-600",children:[e("span",{className:"text-gray-500",children:"Reg:"})," ",t.data.regNumber||"‚Äî"]}),a("p",{className:"text-gray-600 capitalize",children:[e("span",{className:"text-gray-500",children:"Leave Type:"})," ",t.data.type||"‚Äî"]})]})]}),e("div",{className:"w-12 h-12 rounded-full bg-orange-gradient flex items-center justify-center flex-shrink-0 ml-3",children:e("span",{className:"text-white font-bold text-lg",children:(v=t.data.studentName)==null?void 0:v.charAt(0).toUpperCase()})})]}),a("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 mb-3",children:[a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Year"}),e("p",{className:"text-sm font-bold text-gray-900",children:t.data.year||"‚Äî"})]}),a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Section"}),e("p",{className:"text-sm font-bold text-gray-900",children:t.data.section||"‚Äî"})]}),a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"From"}),e("p",{className:"text-sm font-bold text-gray-900",children:t.data.startDate?new Date(t.data.startDate).toLocaleDateString("en-IN",{month:"short",day:"numeric"}):"‚Äî"})]}),a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"To"}),e("p",{className:"text-sm font-bold text-gray-900",children:t.data.endDate?new Date(t.data.endDate).toLocaleDateString("en-IN",{month:"short",day:"numeric"}):"‚Äî"})]})]}),t.data.reason&&a("div",{className:"bg-white rounded-lg p-3 border border-gray-200 mb-3",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Reason"}),e("p",{className:"text-sm text-gray-700 line-clamp-2",children:t.data.reason})]})]}),a("p",{className:"text-xs text-gray-500 mb-3",children:["Requested ",new Date(t.createdAt).toLocaleDateString()," at ",new Date(t.createdAt).toLocaleTimeString()]}),a("div",{className:"hidden sm:flex gap-2 sm:gap-3",children:[a("button",{onClick:()=>r(t),disabled:o===t._id,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg font-semibold transition-all duration-200 text-sm sm:text-base",children:[e(Ve,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e("span",{children:o===t._id?"Processing...":"Accept"})]}),a("button",{onClick:()=>s(t),disabled:o===t._id,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg font-semibold transition-all duration-200 text-sm sm:text-base",children:[e(nt,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e("span",{children:o===t._id?"Processing...":"Reject"})]})]})]})})});function Ir({isOpen:t,onClose:r,setUnreadCount:s}){const[o,n]=i.useState([]),[l,v]=i.useState(!0),[g,M]=i.useState(null),[f,N]=i.useState(""),[h,b]=i.useState(null),[S,_]=i.useState({open:!1,request:null,reason:""});i.useEffect(()=>{var d;if(t){const y=JSON.parse(localStorage.getItem("auth")||"{}"),k=(y==null?void 0:y.role)||((d=y.user)==null?void 0:d.role)||"";N(k),v(!0),O({force:!1,immediate:!0})}},[t]),i.useEffect(()=>{const d=()=>{t&&O({force:!0,immediate:!0})};return window.addEventListener("authStateChanged",d),()=>window.removeEventListener("authStateChanged",d)},[t]),i.useEffect(()=>{if(!t)return;const d=()=>O({force:!0});return window.addEventListener("notificationsUpdated",d),window.addEventListener("marksheetsUpdated",d),()=>{window.removeEventListener("notificationsUpdated",d),window.removeEventListener("marksheetsUpdated",d)}},[t]),Cr(t?{late_arrival:()=>{console.log("üîî Late arrival notification triggered refresh in NotificationRequests"),A()},leave_request:()=>{console.log("üîî Leave request notification triggered refresh in NotificationRequests"),A()},staff_approval:()=>{console.log("üîî Staff approval notification triggered refresh in NotificationRequests"),A()},marksheet_dispatch:()=>{console.log("üîî Marksheet dispatch notification triggered refresh in NotificationRequests"),A()}}:{});const K=i.useRef(null),P=i.useRef(!1),O=(d={})=>{const{force:y=!1,immediate:k=!1}=d;return k?(K.current&&(clearTimeout(K.current),K.current=null),P.current?new Promise(E=>{K.current=setTimeout(async()=>{try{await A({force:y})}catch(X){}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(X){}E()},200)}):(P.current=!0,A({force:y}).finally(()=>{P.current=!1}).then(E=>{try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(X){}return E}))):(K.current&&clearTimeout(K.current),K.current=setTimeout(async()=>{if(!P.current){P.current=!0;try{await A({force:y})}catch(E){}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(E){}P.current=!1}},150),Promise.resolve())},A=async(d={})=>{var k,E,X,q,z,te,Ne,u,x,j;const{force:y=!1}=d;try{console.log("[NotificationRequests] fetchRequests called"),v(!0);const p=JSON.parse(localStorage.getItem("auth")||"{}");console.log("[NotificationRequests] Full auth object:",p),console.log("[NotificationRequests] Auth user object:",p.user);const ne=(p==null?void 0:p.role)||((k=p.user)==null?void 0:k.role),B=(p==null?void 0:p.id)||((E=p.user)==null?void 0:E.id);if(console.log("[NotificationRequests] Fetching for user:",ne,B),ne==="hod"){const le=B;if(console.log("[NotificationRequests] HOD ID to send:",le),!le){console.error("[NotificationRequests] ERROR: No HOD ID found!"),n([]),v(!1);return}const U="/api/staff-approval?action=pending&hodId=".concat(le),m=JSON.parse(localStorage.getItem("auth")||"{}"),D=(m==null?void 0:m.department)||((X=m.user)==null?void 0:X.department),I="/api/leaves?department=".concat(D,"&type=leave");console.log("[NotificationRequests] Staff API URL:",U),console.log("[NotificationRequests] Leave API URL:",I);try{const Z=y?{cache:!1,dedupe:!1}:{},[Q,F]=await Promise.all([W.get(U,Z),W.get(I,Z)]);console.log("[NotificationRequests] Staff Data:",Q),console.log("[NotificationRequests] Leave Data:",F);const se=[];if(Q.success&&Q.requests){const H=(Q.requests||[]).map(R=>({_id:R.id,type:"staff_account_approval",createdAt:R.createdAt,data:{requestId:R.id,staffName:R.name,staffEmail:R.email,phoneNumber:R.phoneNumber,department:R.department,year:R.year,section:R.section,status:"pending"}}));console.log("[NotificationRequests] Converted staff requests:",H),se.push(...H)}if(F.success&&F.requests){const H=(F.requests||[]).filter(R=>R.status==="requested").map(R=>{var pe,be,Ee,De,Re;return{_id:R._id,type:"leave_request",createdAt:R.createdAt,data:{requestId:R._id,studentName:(pe=R.studentDetails)==null?void 0:pe.name,regNumber:(be=R.studentDetails)==null?void 0:be.regNumber,department:(Ee=R.studentDetails)==null?void 0:Ee.department,year:(De=R.studentDetails)==null?void 0:De.year,section:(Re=R.studentDetails)==null?void 0:Re.section,reason:R.reason,startDate:R.startDate,endDate:R.endDate,type:R.type,status:"pending"}}});console.log("[NotificationRequests] Converted leave requests:",H),se.push(...H)}if(console.log("[NotificationRequests] Total requests:",se.length),n(se),s)try{s(se.filter(H=>{var R;return((R=H.data)==null?void 0:R.status)==="pending"||!H.read}).length)}catch(H){s(se.length)}}catch(Z){console.error("[NotificationRequests] Error fetching requests:",Z),n([])}}else if(ne==="staff"){const le=await W.get("/api/notifications?userEmail=".concat((p==null?void 0:p.email)||((q=p.user)==null?void 0:q.email)),y?{cache:!1,dedupe:!1}:{});let U=[];if(le.success){const m=le.notifications.find(D=>{var I,Z;return D.type==="staff_account_approval"&&((I=D.data)==null?void 0:I.staffEmail)===((p==null?void 0:p.email)||((Z=p.user)==null?void 0:Z.email))});m&&b({status:((z=m.data)==null?void 0:z.status)||"pending",processedAt:(te=m.data)==null?void 0:te.processedAt,department:(Ne=m.data)==null?void 0:Ne.department,year:(u=m.data)==null?void 0:u.year,section:(x=m.data)==null?void 0:x.section,createdAt:m.createdAt})}if(p!=null&&p.year&&(p!=null&&p.section)&&(p!=null&&p.department))try{const m=await W.get("/api/leaves?department=".concat(p.department,"&type=late&status=requested"),y?{cache:!1,dedupe:!1}:{});if(m.success&&m.requests){const D=(m.requests||[]).filter(I=>{var Z,Q;return((Z=I.studentDetails)==null?void 0:Z.year)===p.year&&((Q=I.studentDetails)==null?void 0:Q.section)===p.section}).map(I=>{var Z,Q,F,se,H;return{_id:I._id,type:"late_arrival",createdAt:I.createdAt,data:{requestId:I._id,studentName:(Z=I.studentDetails)==null?void 0:Z.name,regNumber:(Q=I.studentDetails)==null?void 0:Q.regNumber,department:(F=I.studentDetails)==null?void 0:F.department,year:(se=I.studentDetails)==null?void 0:se.year,section:(H=I.studentDetails)==null?void 0:H.section,reason:I.reason,expectedArrivalTime:I.expectedArrivalTime,type:I.type,status:"pending"}}});console.log("[NotificationRequests] Late requests for staff:",D),U=[...U,...D]}}catch(m){console.error("[NotificationRequests] Error fetching late requests:",m)}n(U)}else if(ne==="admin"){const le=(p==null?void 0:p.email)||((j=p.user)==null?void 0:j.email);if(!le)n([]);else{const U=await W.get("/api/notifications?userEmail=".concat(encodeURIComponent(le)),y?{cache:!1,dedupe:!1}:{});if(U.success&&Array.isArray(U.notifications)){const m=U.notifications.map(D=>({_id:D._id,type:D.type||"system",title:D.title||"System notification",body:D.body||D.message||"No details provided",createdAt:D.createdAt,read:!!D.read,data:D.data||{}}));n(m),s&&s(m.filter(D=>!D.read).length)}else n([])}}}catch(p){console.error("Error fetching requests:",p)}finally{v(!1)}},V=async d=>{var y,k;if(d.type==="late_arrival"){M(d._id);try{const E=JSON.parse(localStorage.getItem("auth")||"{}"),X=(E==null?void 0:E.id)||((y=E.user)==null?void 0:y.id);try{await W.patch("/api/leaves?id=".concat(d.data.requestId,"&action=acknowledge"),{staffId:X}),n(q=>{const z=q.filter(te=>te._id!==d._id);return s&&s(z.filter(te=>!te.read).length),z}),console.log("‚úÖ Late arrival recorded, waiting for student confirmation")}catch(q){console.error("Error recording late arrival:",q)}}catch(E){console.error("Error recording late arrival:",E)}finally{M(null)}return}M(d._id);try{const E=JSON.parse(localStorage.getItem("auth")||"{}"),X=(E==null?void 0:E.id)||((k=E.user)==null?void 0:k.id);let q;try{if(d.type==="staff_account_approval"){await W.patch("/api/staff-approval",{requestId:d.data.requestId,action:"approve",hodId:X},{timeout:2e4,retry:1,dispatch:!1}),await O({force:!0,immediate:!0});try{Y(()=>import("./notificationEvents-12cfbdaf.js"),[]).then(z=>z.notifyNotificationsUpdated())}catch(z){try{window.dispatchEvent(new Event("notificationsUpdated"))}catch(te){}}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(z){}}else if(d.type==="leave_request"){await W.patch("/api/leaves?id=".concat(d.data.requestId,"&action=approve"),{hodId:X},{timeout:6e4,retry:1,dispatch:!1}),await O({force:!0,immediate:!0});try{Y(()=>import("./notificationEvents-12cfbdaf.js"),[]).then(z=>z.notifyNotificationsUpdated())}catch(z){try{window.dispatchEvent(new Event("notificationsUpdated"))}catch(te){}}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(z){}}console.log("[NotificationRequests] Request approved:",d._id)}catch(z){if(console.error("Error approving request:",z),z&&(z.name==="AbortError"||z.message&&z.message.includes("aborted"))){console.warn("[NotificationRequests] Approve request aborted locally; refreshing requests to reflect server state");try{await A({force:!0})}catch(te){console.error("Error refreshing requests after abort:",te)}}}}catch(E){console.error("Error approving request:",E)}finally{M(null)}},ue=async d=>{_({open:!0,request:d,reason:""})},w=()=>{_({open:!1,request:null,reason:""}),M(null)},$=async()=>{var y;if(!S||!S.request)return;const d=S.request;M(d._id);try{const k=JSON.parse(localStorage.getItem("auth")||"{}"),E=(k==null?void 0:k.id)||((y=k.user)==null?void 0:y.id),X=(S.reason||"").trim();try{d.type==="staff_account_approval"?await W.patch("/api/staff-approval",{requestId:d.data.requestId,action:"reject",hodId:E,rejectionReason:X},{dispatch:!1}):d.type==="leave_request"&&await W.patch("/api/leaves?id=".concat(d.data.requestId,"&action=reject"),{hodId:E,reason:X},{dispatch:!1}),n(q=>{const z=q.filter(te=>te._id!==d._id);return s&&s(z.filter(te=>!te.read).length),z});try{Y(()=>import("./notificationEvents-12cfbdaf.js"),[]).then(q=>q.notifyNotificationsUpdated())}catch(q){try{window.dispatchEvent(new Event("notificationsUpdated"))}catch(z){}}try{window.refreshNotificationCount&&window.refreshNotificationCount()}catch(q){}}catch(q){console.error("Error rejecting request:",q)}}catch(k){console.error("Error rejecting request:",k)}finally{w()}},de=i.useCallback(async d=>{try{await W.patch("/api/notifications/".concat(d,"/read")),n(y=>{const k=y.map(E=>E._id===d?{...E,read:!0}:E);return s&&s(k.filter(E=>!E.read).length),k})}catch(y){console.error("Error marking notification as read:",y)}},[s]),T=i.useCallback(async()=>{try{const d=o.filter(y=>!y.read);await Promise.all(d.map(y=>W.patch("/api/notifications/".concat(y._id,"/read")))),n(y=>y.map(k=>({...k,read:!0}))),s&&s(0)}catch(d){console.error("Error marking all notifications as read:",d)}},[o,s]),G=i.useCallback(V,[V]),J=i.useCallback(ue,[ue]);if(i.useCallback($,[$]),!t)return null;if(f==="admin"){const d=o.filter(k=>!k.read).length,y=e("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:k=>{k.target===k.currentTarget&&r()},children:a("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",onClick:k=>k.stopPropagation(),children:[a("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-theme-gold/10 to-theme-gold/5",children:[a("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-theme-gold-gradient flex items-center justify-center",children:e(He,{className:"w-5 h-5 text-white"})}),a("div",{children:[e("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Notifications"}),e("p",{className:"text-xs sm:text-sm text-gray-600",children:"System updates for admin"})]})]}),a("div",{className:"flex items-center gap-2",children:[d>0&&e("button",{onClick:T,className:"text-xs sm:text-sm font-semibold text-blue-700 bg-blue-50 border border-blue-100 px-3 py-1.5 rounded-lg hover:bg-blue-100",children:"Mark all read"}),e("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:e(We,{className:"w-5 h-5 text-gray-500"})})]})]}),e("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-theme-gold"})}):o.length===0?a("div",{className:"text-center py-12",children:[e("div",{className:"w-16 h-16 rounded-full bg-gray-100 mx-auto mb-4 flex items-center justify-center",children:e(Ce,{className:"w-8 h-8 text-gray-400"})}),e("p",{className:"text-gray-600 font-medium",children:"No notifications"}),e("p",{className:"text-sm text-gray-500 mt-1",children:"Everything is up to date"})]}):e("div",{className:"space-y-3",children:o.map(k=>e(_r,{notification:k,onMarkRead:de},k._id))})})]})});return ze.createPortal(y,document.body)}if(f==="staff"){const d=e("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:y=>{y.target===y.currentTarget&&r()},children:a("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",onClick:y=>y.stopPropagation(),children:[a("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-theme-gold/10 to-theme-gold/5",children:[a("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-theme-gold-gradient flex items-center justify-center",children:e(qe,{className:"w-5 h-5 text-white"})}),a("div",{children:[e("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Notifications"}),e("p",{className:"text-xs sm:text-sm text-gray-600",children:"Your account status & late arrivals"})]})]}),e("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:e(We,{className:"w-5 h-5 text-gray-500"})})]}),e("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-theme-gold"})}):a("div",{className:"space-y-4",children:[h&&a(ge,{children:[e("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:"Account Status"}),a("div",{className:"rounded-xl p-5 border-2 ".concat(h.status==="approved"?"bg-green-50 border-green-300":h.status==="rejected"?"bg-red-50 border-red-300":"bg-blue-50 border-blue-300"),children:[a("div",{className:"flex items-center gap-3 mb-3",children:[h.status==="approved"?e(Ce,{className:"w-8 h-8 text-green-600"}):h.status==="rejected"?e(lr,{className:"w-8 h-8 text-red-600"}):e(qe,{className:"w-8 h-8 text-blue-600"}),a("div",{children:[e("h3",{className:"text-lg font-bold text-gray-900",children:h.status==="approved"?"Account Approved":h.status==="rejected"?"Account Rejected":"Pending Approval"}),e("p",{className:"text-sm text-gray-600",children:h.status==="approved"?"Your account has been approved by HOD":h.status==="rejected"?"Your registration was not approved":"Waiting for HOD approval"})]})]}),a("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Department"}),e("p",{className:"text-sm font-bold text-gray-900",children:h.department})]}),a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Year"}),e("p",{className:"text-sm font-bold text-gray-900",children:h.year})]}),a("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e("p",{className:"text-xs text-gray-500 mb-1",children:"Section"}),e("p",{className:"text-sm font-bold text-gray-900",children:h.section})]})]}),a("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a("p",{className:"text-xs text-gray-600",children:["Requested: ",new Date(h.createdAt).toLocaleDateString()," at"," ",new Date(h.createdAt).toLocaleTimeString()]}),h.processedAt&&a("p",{className:"text-xs text-gray-600 mt-1",children:[h.status==="approved"?"Approved":"Rejected",": ",new Date(h.processedAt).toLocaleDateString()," at"," ",new Date(h.processedAt).toLocaleTimeString()]})]})]}),h.status==="pending"&&e("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4",children:e("p",{className:"text-sm text-blue-800",children:"Your registration is under review. You will be notified once the HOD processes your request."})}),h.status==="rejected"&&e("div",{className:"bg-red-100 border border-red-300 rounded-lg p-4",children:e("p",{className:"text-sm text-red-800",children:"Please contact your HOD or administrator for more information."})})]}),o.length>0&&e(ge,{children:a("div",{className:h?"mt-6 pt-4 border-t border-gray-200":"",children:[a("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:["Late Arrivals (",o.length,")"]}),e("div",{className:"space-y-3",children:o.map(y=>e(Rr,{request:y,onApprove:G,processing:g},y._id))})]})}),!h&&o.length===0&&a("div",{className:"text-center py-12",children:[e("div",{className:"w-16 h-16 rounded-full bg-gray-100 mx-auto mb-4 flex items-center justify-center",children:e(Ce,{className:"w-8 h-8 text-gray-400"})}),e("p",{className:"text-gray-600 font-medium",children:"All set!"}),e("p",{className:"text-sm text-gray-500 mt-1",children:"No pending notifications"})]})]})})]})});return ze.createPortal(d,document.body)}console.log("[NotificationRequests] Rendering with userRole:",f,"requests count:",o.length,"loading:",l);const oe=e("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:d=>{d.target===d.currentTarget&&r()},children:a("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",onClick:d=>d.stopPropagation(),children:[a("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-theme-gold/10 to-theme-gold/5",children:[a("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-10 h-10 rounded-full bg-theme-gold-gradient flex items-center justify-center",children:e(qe,{className:"w-5 h-5 text-white"})}),a("div",{children:[e("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Requests"}),a("p",{className:"text-xs sm:text-sm text-gray-600",children:["Staff signups & leave/late - ",o.length," pending ",o.length===1?"request":"requests"]})]})]}),e("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:e(We,{className:"w-5 h-5 text-gray-500"})})]}),e("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:l?e("div",{className:"flex items-center justify-center py-12",children:e("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-theme-gold"})}):o.length===0?a("div",{className:"text-center py-12",children:[e("div",{className:"w-16 h-16 rounded-full bg-gray-100 mx-auto mb-4 flex items-center justify-center",children:e(Ve,{className:"w-8 h-8 text-gray-400"})}),e("p",{className:"text-gray-600 font-medium",children:"No pending requests"}),e("p",{className:"text-sm text-gray-500 mt-1",children:"All requests have been processed"})]}):e("div",{className:"space-y-4",children:o.map(d=>e(Lr,{request:d,onApprove:G,onReject:J,processing:g},d._id))})})]})}),fe=S&&S.open?e("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/60 p-4",onClick:d=>{d.target===d.currentTarget&&w()},children:a("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-4 sm:p-6",onClick:d=>d.stopPropagation(),children:[e("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Enter rejection reason (optional)"}),e("p",{className:"text-sm text-gray-600 mb-3",children:"This will be sent to the student/parent as a plain text message."}),e("textarea",{value:S.reason,onChange:d=>_(y=>({...y,reason:d.target.value})),rows:4,placeholder:"Reason for rejection (optional)",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-blue-500 focus:outline-none mb-4"}),a("div",{className:"flex justify-end gap-3",children:[e("button",{onClick:w,className:"px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-sm font-semibold",children:"Cancel"}),e("button",{onClick:$,disabled:g===(S.request&&S.request._id),className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm font-semibold disabled:opacity-50",children:g===(S.request&&S.request._id)?"Processing‚Ä¶":"Reject"})]})]})}):null;return ze.createPortal(a(ge,{children:[oe,fe]}),document.body)}function Ar({src:t,alt:r="",className:s="",sizes:o="100vw",widths:n=null,lazy:l=!0}){if(!t)return null;const v=t.lastIndexOf("."),g=v===-1?t:t.slice(0,v),M=h=>Array.isArray(n)&&n.length>0?n.map(b=>"".concat(g,"-").concat(b,".").concat(h," ").concat(b,"w")).join(", "):"".concat(g,".").concat(h),f=M("avif"),N=M("webp");return a("picture",{className:s,children:[e("source",{type:"image/avif",srcSet:f,sizes:o}),e("source",{type:"image/webp",srcSet:N,sizes:o}),e("img",{src:t,alt:r,loading:l?"lazy":"eager",decoding:"async",style:{width:"100%",height:"100%",objectFit:"contain"}})]})}function Dr(){const t=Je(),r=ht(),s=["/login","/signup"].includes(t.pathname),[o,n]=i.useState(!1),[l,v]=i.useState(""),[g,M]=i.useState(""),[f,N]=i.useState(""),[h,b]=i.useState(!1),[S,_]=i.useState(!1),[K,P]=i.useState(!1),[O,A]=i.useState(0),[V,ue]=i.useState([]),[w,$]=i.useState(!1),[de,T]=i.useState(!1),[G,J]=i.useState("unknown"),[oe,fe]=i.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 1023px)").matches),d=u=>t.pathname===u?"text-[#000000] text-sm font-bold leading-normal":"text-[#111418] text-sm font-medium leading-normal hover:text-[#000000] hover:font-bold transition-all duration-200",y=i.useRef(null),k=i.useRef(null),E=i.useRef(null);i.useEffect(()=>{X();const u=()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{fe(window.matchMedia("(max-width: 1023px)").matches)},120)};u(),window.addEventListener("resize",u),window.addEventListener("orientationchange",u);const x=()=>{X();try{b(!1),_(!1)}catch(p){}};window.addEventListener("authStateChanged",x);const j=()=>{try{if(!(o&&l&&g))return;E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{q(l,g,!0).catch(()=>{}),E.current=null},350)}catch(p){}};return window.addEventListener("notificationsUpdated",j),y.current&&clearInterval(y.current),y.current=setInterval(()=>{if(o&&l&&(g==="hod"||g==="staff"||g==="admin"))if(typeof requestIdleCallback=="function")try{requestIdleCallback(()=>q(l,g),{timeout:2e3})}catch(p){q(l,g)}else q(l,g)},3e4),()=>{window.removeEventListener("authStateChanged",x),window.removeEventListener("notificationsUpdated",j),window.removeEventListener("resize",u),window.removeEventListener("orientationchange",u),E.current&&(clearTimeout(E.current),E.current=null),k.current&&(clearTimeout(k.current),k.current=null),y.current&&clearInterval(y.current)}},[o,l,g]),i.useEffect(()=>{try{window.refreshNotificationCount=()=>{try{o&&l&&g&&q(l,g,!0)}catch(u){}}}catch(u){}return()=>{try{delete window.refreshNotificationCount}catch(u){}}},[o,l,g]),i.useEffect(()=>{if(typeof navigator<"u"&&navigator.serviceWorker){navigator.serviceWorker.getRegistrations().then(x=>{x&&x.length>0?J("registered"):navigator.serviceWorker.controller?J("controlled"):J("none")}).catch(()=>J("error"));const u=x=>{try{const j=x==null?void 0:x.data;if(!j)return;j.type==="SW_STATUS"&&J(j.status||"unknown")}catch(j){}};return navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",u),()=>{navigator.serviceWorker.removeEventListener&&navigator.serviceWorker.removeEventListener("message",u)}}},[o,g]);const X=()=>{const u=localStorage.getItem("auth");if(u)try{const x=JSON.parse(u);n(x.isAuthenticated||!1),v(x.email||""),M(x.role||""),(x.role==="hod"||x.role==="staff"||x.role==="admin")&&x.email&&q(x.email,x.role)}catch(x){console.error("Error parsing auth data:",x);const j=localStorage.getItem("isLoggedIn")==="true",p=localStorage.getItem("userEmail"),ne=localStorage.getItem("userRole");n(j),v(p||""),M(ne||""),(ne==="hod"||ne==="staff"||ne==="admin")&&p&&q(p,ne)}else{const x=localStorage.getItem("isLoggedIn")==="true",j=localStorage.getItem("userEmail"),p=localStorage.getItem("userRole");n(x),v(j||""),M(p||""),(p==="hod"||p==="staff"||p==="admin")&&j&&q(j,p)}},q=async(u,x,j=!1)=>{var p,ne,B,le,U;try{if(x==="hod"){const m=JSON.parse(localStorage.getItem("auth")||"{}"),D=(m==null?void 0:m.id)||((p=m.user)==null?void 0:p.id),I=(m==null?void 0:m.department)||((ne=m.user)==null?void 0:ne.department);if(D&&I){const Z=j?{cache:!1,dedupe:!1}:{},[Q,F]=await Promise.all([W.get("/api/staff-approval?action=pending&hodId=".concat(D),Z),W.get("/api/leaves?department=".concat(I,"&type=leave"),Z)]);let se=0,H=0;Q.success&&Q.requests&&(se=Q.requests.length),F.success&&F.requests&&(H=F.requests.filter(R=>R.status==="requested").length),A(se+H)}}else if(x==="staff"){const m=JSON.parse(localStorage.getItem("auth")||"{}"),D=(m==null?void 0:m.year)||((B=m.user)==null?void 0:B.year),I=(m==null?void 0:m.section)||((le=m.user)==null?void 0:le.section),Z=(m==null?void 0:m.department)||((U=m.user)==null?void 0:U.department);let Q=0;const F=await W.get("/api/notifications?userEmail=".concat(u),j?{cache:!1,dedupe:!1}:{});if(F!=null&&F.success&&F.notifications.find(H=>{var R,pe,be;return H.type==="staff_account_approval"&&((R=H.data)==null?void 0:R.staffEmail)===u&&!H.read&&(((pe=H.data)==null?void 0:pe.status)==="approved"||((be=H.data)==null?void 0:be.status)==="rejected")})&&(Q+=1),D&&I&&Z)try{const se=await W.get("/api/leaves?department=".concat(Z,"&type=late&status=requested"),j?{cache:!1,dedupe:!1}:{});if(se.success&&se.requests){const H=(se.requests||[]).filter(R=>{var pe,be;return((pe=R.studentDetails)==null?void 0:pe.year)===D&&((be=R.studentDetails)==null?void 0:be.section)===I}).length;Q+=H}}catch(se){console.error("Error fetching late arrivals:",se)}A(Q)}else if(x==="admin"){const m=await W.get("/api/notifications?userEmail=".concat(encodeURIComponent(u)),j?{cache:!1,dedupe:!1}:{});if(m!=null&&m.success&&Array.isArray(m.notifications)){const D=m.notifications.filter(I=>!I.read).length;A(D)}}}catch(m){console.error("Error fetching notification count:",m)}},z=async u=>{if(N(u),!u.trim()){ue([]),T(!1);return}$(!0),T(!0);try{const x=u.trim().toLowerCase(),j=localStorage.getItem("auth"),p=j?JSON.parse(j):null;if(!p){ue([]),$(!1);return}const ne=[];if(p.role==="staff"||p.role==="hod")try{let B="/api/marksheets?includeAll=true";if(p.role==="staff"){const U=p._id||p.id||localStorage.getItem("userId");B+="&staffId=".concat(U)}else p.role==="hod"&&(B+="&department=".concat(p.department));const le=await W.get(B);le.success&&le.marksheets.filter(m=>{var Q,F;const D=(((Q=m.studentDetails)==null?void 0:Q.name)||"").toLowerCase(),I=(((F=m.studentDetails)==null?void 0:F.regNumber)||"").toLowerCase(),Z=(m.examinationName||"").toLowerCase();return D.includes(x)||I.includes(x)||Z.includes(x)}).slice(0,5).forEach(m=>{var D,I;ne.push({type:"marksheet",id:m._id,title:((D=m.studentDetails)==null?void 0:D.name)||"Unknown Student",subtitle:"".concat(((I=m.studentDetails)==null?void 0:I.regNumber)||""," ‚Ä¢ ").concat(m.examinationName||""),status:m.status,link:"/marksheets/".concat(m._id)})})}catch(B){console.error("Error searching marksheets:",B)}if(p.role==="hod")try{const B=await W.get("/api/users?department=".concat(p.department));B.success&&B.users.filter(U=>{const m=(U.name||"").toLowerCase(),D=(U.email||"").toLowerCase();return m.includes(x)||D.includes(x)}).slice(0,3).forEach(U=>{ne.push({type:"user",id:U._id,title:U.name||U.email,subtitle:"".concat(U.role||"Staff"," ‚Ä¢ ").concat(U.email||""),link:"/department-overview"})})}catch(B){console.error("Error searching users:",B)}ue(ne)}catch(x){console.error("Search error:",x),ue([])}$(!1)},te=u=>{u==null||u.preventDefault(),f.trim()&&V.length>0?(r(V[0].link),N(""),ue([]),T(!1)):f.trim()&&(r("/records?search=".concat(encodeURIComponent(f.trim()))),N(""),T(!1))},Ne=(u,x)=>{u.preventDefault(),u.stopPropagation(),T(!1),N(""),ue([]),setTimeout(()=>{r(x)},0)};return a("header",{className:"sticky top-0 z-50 glass-card flex items-center justify-between whitespace-nowrap px-3 sm:px-4 md:px-6 lg:px-8 xl:px-10 py-3 sm:py-4 mx-2 sm:mx-3 md:mx-4 mt-2 sm:mt-3 md:mt-4",onMouseEnter:()=>{typeof document<"u"&&document.body.classList.add("header-hover-active")},onMouseLeave:()=>{typeof document<"u"&&document.body.classList.remove("header-hover-active")},children:[a("div",{className:"flex items-center gap-3 sm:gap-4 md:gap-6 lg:gap-8 flex-1 min-w-0",children:[a("div",{className:"flex items-center gap-2 md:gap-3 flex-shrink-0",children:[e("div",{className:"size-9 sm:size-10 md:size-10",children:e(Ar,{src:"/images/mseclogo.png",alt:"MSEC Logo",className:"w-full h-full",sizes:"(max-width:640px) 64px, 128px",widths:[64,128,256],lazy:!0})}),a("h2",{className:"text-base sm:text-lg md:text-xl font-bold leading-tight tracking-[-0.015em] whitespace-nowrap",children:[e("span",{className:"text-[#111418]",children:"MSEC"})," ",e("span",{className:"wave-text",children:"Academics"})]})]}),!s&&a("nav",{className:"hidden lg:flex items-center gap-4 xl:gap-5 2xl:gap-6 flex-shrink min-w-0",children:[o&&g==="student"?a(ge,{children:[e(ee,{className:d("/student"),to:"/student",title:"My Marksheets",children:"My Marksheets"}),e(ee,{className:d("/leave"),to:"/leave",title:"Leave/Late",children:"Leave/Late"})]}):e(ee,{className:d("/home"),to:"/home",title:"Dashboard",children:"Dashboard"}),o&&g==="staff"&&a(ge,{children:[e(ee,{className:d("/marksheets"),to:"/marksheets",title:"Marksheets",children:"Marksheets"}),a(ee,{className:d("/dispatch-requests"),to:"/dispatch-requests",title:"Dispatch Requests",children:[e("span",{className:"hidden xl:inline",children:"Dispatch Requests"}),e("span",{className:"xl:hidden",children:"Dispatch"})]}),e(ee,{className:d("/records"),to:"/records",title:"Records",children:"Records"})]}),o&&g==="hod"&&a(ge,{children:[a(ee,{className:d("/department-overview"),to:"/department-overview",title:"Department Overview",children:[e("span",{className:"hidden xl:inline",children:"Department Overview"}),e("span",{className:"xl:hidden",children:"Department"})]}),a(ee,{className:d("/approval-requests"),to:"/approval-requests",title:"Approval Requests",children:[e("span",{className:"hidden xl:inline",children:"Approval Requests"}),e("span",{className:"xl:hidden",children:"Approvals"})]}),e(ee,{className:d("/reports"),to:"/reports",title:"Reports",children:"Reports"})]}),!o||g!=="student"?e(ee,{className:d("/contact"),to:"/contact",title:"Contact",children:"Contact"}):null]})]}),!s&&a("div",{className:"hidden lg:flex items-center gap-2 lg:gap-3 xl:gap-4 flex-shrink-0",children:[a("form",{onSubmit:te,className:"relative !h-9 lg:!h-10 w-40 lg:w-48 xl:w-64",children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-[#60758a] pointer-events-none z-10",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",fill:"currentColor",viewBox:"0 0 256 256",className:"lg:w-5 lg:h-5",children:e("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})}),e("input",{type:"text",value:f,onChange:u=>z(u.target.value),onFocus:()=>V.length>0&&T(!0),onBlur:()=>setTimeout(()=>T(!1),300),placeholder:"Search students, exams...",className:"form-input w-full h-full text-[#111418] focus:outline-0 focus:ring-0 border border-white/10 bg-white/30 backdrop-blur-sm placeholder:text-[#60758a] pl-9 lg:pl-10 pr-3 text-xs lg:text-sm font-normal leading-normal rounded-lg lg:rounded-xl relative z-0",onKeyPress:u=>{u.key==="Enter"&&te(u)}}),de&&V.length>0&&e("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden z-50 max-h-96 overflow-y-auto",children:w?e("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Searching..."}):a(ge,{children:[V.map((u,x)=>e("button",{onClick:j=>Ne(j,u.link),onMouseDown:j=>j.preventDefault(),className:"w-full px-4 py-3 hover:bg-gray-50 text-left border-b border-gray-100 last:border-b-0 transition-colors",children:a("div",{className:"flex items-start gap-3",children:[e("div",{className:"mt-0.5 w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ".concat(u.type==="marksheet"?"bg-blue-100 text-blue-600":u.type==="user"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"),children:u.type==="marksheet"?"üìÑ":u.type==="user"?"üë§":"üìã"}),a("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-medium text-gray-900 text-sm truncate",children:u.title}),e("div",{className:"text-xs text-gray-500 truncate",children:u.subtitle}),u.status&&e("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs ".concat(u.status==="draft"?"bg-gray-100 text-gray-700":u.status==="verified_by_staff"?"bg-blue-100 text-blue-700":u.status==="dispatch_requested"?"bg-yellow-100 text-yellow-700":u.status==="approved_by_hod"?"bg-green-100 text-green-700":u.status==="dispatched"?"bg-purple-100 text-purple-700":"bg-red-100 text-red-700"),children:u.status.replace(/_/g," ")})]})]})},x)),f&&a("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),T(!1),N(""),setTimeout(()=>{r("/records?search=".concat(encodeURIComponent(f.trim())))},0)},onMouseDown:u=>u.preventDefault(),className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 text-left text-sm text-blue-600 font-medium transition-colors",children:['View all results for "',f,'"']})]})})]}),e("div",{className:"flex items-center gap-1 lg:gap-2 flex-shrink-0",children:o?a("div",{className:"flex items-center gap-1 lg:gap-2 relative",children:[a("button",{onClick:()=>P(!0),className:"hidden lg:flex items-center justify-center w-9 lg:w-10 h-9 lg:h-10 rounded-lg hover:bg-[#f0f2f5] transition-colors relative",title:"Notifications",children:[e(He,{className:"w-5 h-5 text-[#60758a] hover:text-theme-gold transition-colors"}),O>0&&e("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse shadow-lg",children:O>9?"9+":O})]}),a("button",{onClick:()=>_(!S),className:"flex items-center gap-2 px-2 lg:px-3 h-9 lg:h-10 rounded-lg hover:bg-[#f0f2f5] transition-colors group",title:"Settings",children:[e("div",{className:"w-7 lg:w-8 h-7 lg:h-8 rounded-full bg-theme-gold-gradient flex items-center justify-center flex-shrink-0",children:e("span",{className:"text-xs lg:text-sm font-bold text-white",children:(()=>{var u;if(g==="student")try{const x=JSON.parse(localStorage.getItem("auth")||"{}");return((u=x==null?void 0:x.name)==null?void 0:u.charAt(0).toUpperCase())||"S"}catch(x){return"S"}return l==null?void 0:l.charAt(0).toUpperCase()})()})}),e("span",{className:"text-xs lg:text-sm font-medium text-[#111418] hidden xl:inline truncate max-w-[120px] lg:max-w-[150px] group-hover:text-theme-gold",children:l}),e("svg",{className:"w-3 lg:w-4 h-3 lg:h-4 text-[#60758a] transition-transform ".concat(S?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}):e(ee,{to:"/login",className:"flex min-w-[60px] lg:min-w-[70px] cursor-pointer items-center justify-center overflow-hidden rounded-lg lg:rounded-xl h-9 lg:h-10 px-3 lg:px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-xs lg:text-sm font-bold leading-normal tracking-[0.015em] whitespace-nowrap transition-all duration-200",children:e("span",{className:"truncate",children:"Login"})})})]}),!s&&a("div",{className:"lg:hidden flex items-center gap-1",children:[o&&a("button",{onClick:()=>P(!0),className:"flex items-center justify-center p-1.5 sm:p-2 text-[#111418] hover:bg-gray-100 rounded-lg transition-colors duration-200 flex-shrink-0 relative","aria-label":"Notifications",children:[e(He,{className:"w-5 sm:w-6 h-5 sm:h-6"}),O>0&&e("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse shadow-lg",children:O>9?"9+":O})]}),e("button",{onClick:()=>_(!0),className:"flex items-center justify-center p-1.5 sm:p-2 text-[#111418] hover:bg-gray-100 rounded-lg transition-colors duration-200 flex-shrink-0","aria-label":"Open settings",children:e("svg",{className:"w-5 sm:w-6 h-5 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),!s&&h&&e("div",{className:"lg:hidden absolute top-full left-0 right-0 bg-white/95 backdrop-blur-md border-b border-[#f0f2f5] shadow-lg rounded-b-2xl mx-2 sm:mx-3 md:mx-4",children:a("div",{className:"flex flex-col p-4 sm:p-5 space-y-4 sm:space-y-5",children:[e("form",{onSubmit:te,className:"flex flex-col w-full",children:e("div",{className:"flex w-full items-stretch rounded-xl h-11 sm:h-12",children:a("div",{className:"relative w-full",children:[e("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 sm:pl-4 text-[#60758a] pointer-events-none z-10",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",fill:"currentColor",viewBox:"0 0 256 256",className:"sm:w-5 sm:h-5",children:e("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})}),e("input",{type:"text",value:f,onChange:u=>N(u.target.value),placeholder:"Search",className:"form-input w-full h-full text-[#111418] focus:outline-0 focus:ring-0 border border-gray-200 bg-gray-50 placeholder:text-[#60758a] pl-10 sm:pl-12 pr-3 sm:pr-4 text-sm sm:text-base font-normal leading-normal rounded-xl relative z-0"})]})})}),a("nav",{className:"flex flex-col space-y-2 sm:space-y-3",children:[e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/home",onClick:()=>b(!1),children:"Dashboard"}),o&&g==="staff"&&a(ge,{children:[e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/marksheets",onClick:()=>b(!1),children:"Marksheets"}),e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/dispatch-requests",onClick:()=>b(!1),children:"Dispatch Requests"}),e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/records",onClick:()=>b(!1),children:"Records"})]}),o&&g==="hod"&&a(ge,{children:[e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/department-overview",onClick:()=>b(!1),children:"Department Overview"}),e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/approval-requests",onClick:()=>b(!1),children:"Approval Requests"}),e(ee,{className:"text-[#111418] text-sm sm:text-base font-medium py-2.5 sm:py-3 px-3 sm:px-4 hover:text-theme-gold-500 hover:bg-theme-gold-50 rounded-lg transition-all duration-200 mobile-nav-item",to:"/reports",onClick:()=>b(!1),children:"Reports"})]})]}),e("div",{className:"flex flex-col gap-3 sm:gap-4 pt-3 sm:pt-4 border-t border-[#f0f2f5]",children:o?a(ge,{children:[a("button",{onClick:()=>{_(!S),b(!1)},className:"flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[e("div",{className:"w-10 sm:w-12 h-10 sm:h-12 rounded-full bg-theme-gold-gradient flex items-center justify-center flex-shrink-0",children:e("span",{className:"text-sm sm:text-base font-bold text-white",children:(()=>{var u;if(g==="student")try{const x=JSON.parse(localStorage.getItem("auth")||"{}");return((u=x==null?void 0:x.name)==null?void 0:u.charAt(0).toUpperCase())||"S"}catch(x){return"S"}return l==null?void 0:l.charAt(0).toUpperCase()})()})}),a("div",{className:"flex-1 text-left min-w-0",children:[e("p",{className:"text-sm sm:text-base font-medium text-[#111418] truncate",children:l}),e("p",{className:"text-xs sm:text-sm text-[#60758a] capitalize",children:g})]}),a("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-[#60758a] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})]}),g==="staff"&&e(ee,{to:"/marksheets",className:"flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-sm sm:text-base font-bold mobile-btn tablet-btn desktop-btn transition-all duration-200",onClick:()=>b(!1),children:"Go to Marksheets"}),g==="hod"&&e(ee,{to:"/approval-requests",className:"flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-sm sm:text-base font-bold mobile-btn tablet-btn desktop-btn transition-all duration-200",onClick:()=>b(!1),children:"Approval Requests"})]}):a("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e(ee,{to:"/login",className:"flex-1 flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 bg-theme-gold hover:bg-theme-gold-500 text-white text-sm sm:text-base font-bold mobile-btn tablet-btn desktop-btn transition-all duration-200",onClick:()=>b(!1),children:"Login"}),e(ee,{to:"/login",className:"flex-1 flex items-center justify-center rounded-xl h-11 sm:h-12 px-4 border-2 border-theme-gold text-theme-gold hover:bg-theme-gold hover:text-white text-sm sm:text-base font-bold transition-all duration-200",onClick:()=>b(!1),children:"Get Started"})]})})]})}),S&&e(Er,{isOpen:S,onClose:()=>_(!1),userEmail:l,userRole:g,isMobile:oe}),e(Ir,{isOpen:K,onClose:()=>{P(!1),l&&g&&q(l,g)},setUnreadCount:A})]})}function Pr(){const t=Je(),[r,s]=i.useState(""),[o,n]=i.useState(!1),[l,v]=i.useState(0);i.useEffect(()=>{g();const b=()=>{g()};window.addEventListener("authStateChanged",b);const S=()=>M(!0);return window.addEventListener("notificationsUpdated",S),window.addEventListener("marksheetsUpdated",S),()=>{window.removeEventListener("authStateChanged",b),window.removeEventListener("notificationsUpdated",S),window.removeEventListener("marksheetsUpdated",S)}},[]),i.useEffect(()=>{if(o){M();const b=setInterval(M,3e4);return()=>clearInterval(b)}},[o]);const g=()=>{const b=localStorage.getItem("auth");if(b)try{const S=JSON.parse(b);n(S.isAuthenticated||!1),s(S.role||"")}catch(S){n(!1),s("")}},M=async(b=!1)=>{var S,_;try{const K=localStorage.getItem("auth");if(!K)return;const P=JSON.parse(K),O=encodeURIComponent(P.email||((S=P.user)==null?void 0:S.email)||"");if(!O)return;const A=b?{cache:!1,dedupe:!1}:void 0,V=await W.get("/api/notifications?userEmail=".concat(O,"&unreadOnly=true"),A);V!=null&&V.success&&v(((_=V.notifications)==null?void 0:_.length)||0)}catch(K){console.debug("Could not fetch notifications:",K.message)}},f=()=>{const b=[{name:"Home",path:"/home",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}];return r==="staff"?[...b,{name:"Marksheets",path:"/marksheets",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{name:"Requests",path:"/dispatch-requests",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})},{name:"Records",path:"/records",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}]:r==="hod"?[...b,{name:"Overview",path:"/department-overview",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{name:"Approvals",path:"/approval-requests",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{name:"Reports",path:"/reports",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}]:r==="student"?[{name:"My Marksheets",path:"/student",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{name:"Leave/Late",path:"/leave",icon:e("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}]:b},N=b=>b==="/home"?t.pathname==="/"||t.pathname==="/home":t.pathname.startsWith(b);if(!o)return null;const h=f();return e("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-md border-t border-gray-200 shadow-lg safe-area-inset-bottom",style:{transform:"translateZ(0)",willChange:"transform"},children:e("div",{className:"flex items-center justify-around px-2 py-2",children:h.map(b=>a(ee,{to:b.path,className:"flex flex-col items-center justify-center px-3 py-2 rounded-lg transition-all duration-200 min-w-[60px] ".concat(N(b.path)?"text-theme-gold bg-theme-gold-50":"text-gray-600 hover:text-theme-gold-500 hover:bg-gray-50"),children:[a("div",{className:"relative",children:[b.icon,b.name==="Profile"&&l>0&&e("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:l>9?"9+":l})]}),e("span",{className:"text-xs mt-1 font-medium ".concat(N(b.path)?"font-bold":""),children:b.name})]},b.path))})})}const Tr=i.lazy(()=>Y(()=>import("./Home-5093b2fd.js"),["assets/js/Home-5093b2fd.js","assets/js/react-vendor-ad4d5528.js"])),Mr=i.lazy(()=>Y(()=>import("./ImportMarks-8cf4abaf.js"),["assets/js/ImportMarks-8cf4abaf.js","assets/js/react-vendor-ad4d5528.js"])),jr=i.lazy(()=>Y(()=>import("./Marksheets-002b01bf.js"),["assets/js/Marksheets-002b01bf.js","assets/js/react-vendor-ad4d5528.js","assets/js/ConfirmDialog-1072291d.js","assets/js/Confetti-f7abded4.js","assets/js/ContextualHelp-dcc8d512.js","assets/js/resultUtils-190b400a.js","assets/js/usePullToRefresh-f728b668.js"])),Or=i.lazy(()=>Y(()=>import("./MarksheetDetails-6901686e.js"),["assets/js/MarksheetDetails-6901686e.js","assets/js/react-vendor-ad4d5528.js","assets/js/resultUtils-190b400a.js"])),zr=i.lazy(()=>Y(()=>import("./DispatchRequests-e3637090.js"),["assets/js/DispatchRequests-e3637090.js","assets/js/react-vendor-ad4d5528.js","assets/js/RefreshButton-435ed63c.js","assets/js/usePullToRefresh-f728b668.js"])),Wr=i.lazy(()=>Y(()=>import("./Records-dc7c96ff.js"),["assets/js/Records-dc7c96ff.js","assets/js/react-vendor-ad4d5528.js","assets/js/resultUtils-190b400a.js"])),$r=i.lazy(()=>Y(()=>import("./DepartmentOverview-202196a4.js"),["assets/js/DepartmentOverview-202196a4.js","assets/js/react-vendor-ad4d5528.js"])),Ur=i.lazy(()=>Y(()=>import("./ApprovalRequests-a6c3f730.js"),["assets/js/ApprovalRequests-a6c3f730.js","assets/js/react-vendor-ad4d5528.js","assets/js/RefreshButton-435ed63c.js","assets/js/Confetti-f7abded4.js","assets/js/ContextualHelp-dcc8d512.js","assets/js/usePullToRefresh-f728b668.js"])),qr=i.lazy(()=>Y(()=>import("./Reports-6b54302d.js"),["assets/js/Reports-6b54302d.js","assets/js/react-vendor-ad4d5528.js","assets/js/ContextualHelp-dcc8d512.js","assets/js/resultUtils-190b400a.js"])),Br=i.lazy(()=>Y(()=>import("./Login-1e61ce06.js"),["assets/js/Login-1e61ce06.js","assets/js/react-vendor-ad4d5528.js"])),Fr=i.lazy(()=>Y(()=>import("./SignUp-4516b4af.js"),["assets/js/SignUp-4516b4af.js","assets/js/react-vendor-ad4d5528.js"])),Hr=i.lazy(()=>Y(()=>import("./Contact-8a4ba01b.js"),["assets/js/Contact-8a4ba01b.js","assets/js/react-vendor-ad4d5528.js"])),Vr=i.lazy(()=>Y(()=>import("./StudentDashboard-d721e8e8.js"),["assets/js/StudentDashboard-d721e8e8.js","assets/js/react-vendor-ad4d5528.js"])),Jr=i.lazy(()=>Y(()=>import("./Leave-77ee4461.js"),["assets/js/Leave-77ee4461.js","assets/js/react-vendor-ad4d5528.js","assets/js/Confetti-f7abded4.js","assets/js/ConfirmDialog-1072291d.js"])),Yr=i.lazy(()=>Y(()=>import("./LeaveApprovals-2a91d2c8.js"),["assets/js/LeaveApprovals-2a91d2c8.js","assets/js/react-vendor-ad4d5528.js","assets/js/usePullToRefresh-f728b668.js"])),Gr=i.lazy(()=>Y(()=>import("./LateAcknowledgment-af4e40d0.js"),["assets/js/LateAcknowledgment-af4e40d0.js","assets/js/react-vendor-ad4d5528.js"])),Kr=i.lazy(()=>Y(()=>import("./PrivacyPolicy-567ed89e.js"),["assets/js/PrivacyPolicy-567ed89e.js","assets/js/react-vendor-ad4d5528.js"])),Xr=i.lazy(()=>Y(()=>import("./TermsOfService-93bd7de5.js"),["assets/js/TermsOfService-93bd7de5.js","assets/js/react-vendor-ad4d5528.js"])),Zr=i.lazy(()=>Y(()=>import("./FAQ-06fb2a13.js"),["assets/js/FAQ-06fb2a13.js","assets/js/react-vendor-ad4d5528.js"])),Qr=i.lazy(()=>Y(()=>import("./NotFound-0526c5ab.js"),["assets/js/NotFound-0526c5ab.js","assets/js/react-vendor-ad4d5528.js"])),ea=i.lazy(()=>Y(()=>import("./AdminDashboard-3419c157.js"),["assets/js/AdminDashboard-3419c157.js","assets/js/react-vendor-ad4d5528.js","assets/js/ConfirmDialog-1072291d.js"])),ta=()=>{const t=localStorage.getItem("auth");if(!t)return e(ve,{to:"/login",replace:!0});const r=JSON.parse(t);return(r==null?void 0:r.role)==="student"?e(ve,{to:"/student",replace:!0}):(r==null?void 0:r.role)==="admin"?e(ve,{to:"/admin-dashboard",replace:!0}):e(ve,{to:"/home",replace:!0})},ra=()=>{const t=localStorage.getItem("auth");if(!t)return e(ve,{to:"/login",replace:!0});const r=JSON.parse(t);return(r==null?void 0:r.role)==="student"?e(ve,{to:"/student",replace:!0}):(r==null?void 0:r.role)==="admin"?e(ve,{to:"/admin-dashboard",replace:!0}):e(Tr,{})},aa=()=>{const t=localStorage.getItem("auth");if(!t)return e(ve,{to:"/login",replace:!0});const r=JSON.parse(t);return(r==null?void 0:r.role)!=="student"?e(ve,{to:"/home",replace:!0}):e(Vr,{})},sa=()=>{const t=localStorage.getItem("auth");if(!t)return e(ve,{to:"/login",replace:!0});const r=JSON.parse(t);return(r==null?void 0:r.role)!=="admin"?e(ve,{to:"/home",replace:!0}):e(ea,{})};function oa(){const t=Je(),r=t.pathname==="/login"||t.pathname==="/signup";return i.useEffect(()=>{if(!r)document.body.style.backgroundImage="none";else try{const s="image-set(url('/images/campus.avif') type('image/avif') 1x, url('/images/campus.webp') type('image/webp') 1x, url('/images/campus.jpeg') 1x)";typeof CSS<"u"&&CSS.supports&&CSS.supports("background-image",s)?document.body.style.backgroundImage=s:typeof CSS<"u"&&CSS.supports&&CSS.supports("background-image","url('/images/campus.webp')")?document.body.style.backgroundImage="url('/images/campus.webp')":document.body.style.backgroundImage="url('/images/campus.jpeg')"}catch(s){document.body.style.backgroundImage="url('/images/campus.jpeg')"}},[r]),i.useEffect(()=>{W.get("/api/generate-pdf?test=true").catch(()=>{})},[]),a(ge,{children:[a("div",{className:"flex w-full flex-col smooth-scroll ".concat(r?"relative":""),style:{fontFamily:"Inter, Manrope, sans-serif",WebkitOverflowScrolling:"touch"},children:[r&&e("div",{className:"fixed inset-0 bg-black/40 z-0"}),a("div",{className:"layout-container flex h-full grow flex-col max-w-full ".concat(r?"relative z-10":"bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"),children:[e(Dr,{}),e("div",{className:"flex flex-1 justify-center w-full",children:e("div",{className:"layout-content-container flex flex-col w-full max-w-full ".concat(r?"":"pb-20 md:pb-0"),children:a(At,{children:[e(ae,{path:"/",element:e(ta,{})}),e(ae,{path:"/home",element:e(i.Suspense,{fallback:e(Me,{}),children:e(ra,{})})}),e(ae,{path:"/student",element:e(i.Suspense,{fallback:e(Me,{}),children:e(aa,{})})}),e(ae,{path:"/admin-dashboard",element:e(i.Suspense,{fallback:e(Me,{}),children:e(sa,{})})}),e(ae,{path:"/leave",element:e(i.Suspense,{fallback:e(rt,{}),children:e(Jr,{})})}),e(ae,{path:"/import-marks",element:e(i.Suspense,{fallback:e(rt,{}),children:e(Mr,{})})}),e(ae,{path:"/marksheets",element:e(i.Suspense,{fallback:e(tt,{}),children:e(jr,{})})}),e(ae,{path:"/marksheets/:id",element:e(i.Suspense,{fallback:e($t,{}),children:e(Or,{})})}),e(ae,{path:"/dispatch-requests",element:e(i.Suspense,{fallback:e(Ut,{}),children:e(zr,{})})}),e(ae,{path:"/records",element:e(i.Suspense,{fallback:e(qt,{}),children:e(Wr,{})})}),e(ae,{path:"/department-overview",element:e(i.Suspense,{fallback:e(Me,{}),children:e($r,{})})}),e(ae,{path:"/approval-requests",element:e(i.Suspense,{fallback:e(at,{}),children:e(Ur,{})})}),e(ae,{path:"/leave-approvals",element:e(i.Suspense,{fallback:e(at,{}),children:e(Yr,{})})}),e(ae,{path:"/late-acknowledgment",element:e(i.Suspense,{fallback:e(tt,{}),children:e(Gr,{})})}),e(ae,{path:"/reports",element:e(i.Suspense,{fallback:e(Bt,{}),children:e(qr,{})})}),e(ae,{path:"/login",element:e(i.Suspense,{fallback:e(Gt,{}),children:e(Br,{})})}),e(ae,{path:"/signup",element:e(i.Suspense,{fallback:e(Kt,{}),children:e(Fr,{})})}),e(ae,{path:"/contact",element:e(i.Suspense,{fallback:e(Jt,{}),children:e(Hr,{})})}),e(ae,{path:"/privacy-policy",element:e(i.Suspense,{fallback:e(Ht,{}),children:e(Kr,{})})}),e(ae,{path:"/terms-of-service",element:e(i.Suspense,{fallback:e(Vt,{}),children:e(Xr,{})})}),e(ae,{path:"/faq",element:e(i.Suspense,{fallback:e(Ft,{}),children:e(Zr,{})})}),e(ae,{path:"*",element:e(i.Suspense,{fallback:e(Yt,{}),children:e(Qr,{})})})]})})})]})]}),!r&&e(Pr,{})]})}function lt(){return e(Xt,{children:e(vr,{children:e(It,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e(oa,{})})})})}window.addEventListener("unhandledrejection",t=>{var r,s,o,n;if((s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("Receiving end does not exist")||(n=(o=t.reason)==null?void 0:o.message)!=null&&n.includes("Could not establish connection")){t.preventDefault();return}});var dt,ut;typeof navigator<"u"&&"serviceWorker"in navigator&&((ut=(dt=navigator.serviceWorker).addEventListener)==null||ut.call(dt,"message",t=>{try{const r=t&&t.data?t.data:null;if(!r||!r.type)return;if(r.type==="RELOAD_REQUEST"){console.info("Service worker requested reload (dispatching event):",r.reason||"unknown");try{window.dispatchEvent(new CustomEvent("sw:reload-request",{detail:{reason:r.reason}}))}catch(s){setTimeout(()=>{try{window.location.reload()}catch(o){}},150)}}else if(r.type==="NOTIFICATION_RECEIVED")try{Y(()=>import("./notificationEvents-12cfbdaf.js"),[]).then(s=>{try{s.notifyNotificationsUpdated(r,300)}catch(o){try{window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:r}))}catch(n){}}}).catch(()=>{try{window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:r}))}catch(s){}})}catch(s){try{window.dispatchEvent(new Event("notificationsUpdated"))}catch(o){}}}catch(r){}}));const wt=document.getElementById("root");if(!wt)throw new Error("Root element not found");const ct=Fe.createRoot(wt);try{ct.render(e(mt.StrictMode,{children:e(lt,{})}))}catch(t){console.error("Failed to render app:",t),ct.render(e(lt,{}))}if(typeof window<"u"){async function t(){try{if("serviceWorker"in navigator){try{const r=await navigator.serviceWorker.getRegistrations();console.info("[sw-debug] registrations:",r.map(s=>({scope:s.scope,active:!!s.active,waiting:!!s.waiting})))}catch(r){console.warn("[sw-debug] getRegistrations failed",r)}try{console.info("[sw-debug] controller:",navigator.serviceWorker.controller)}catch(r){}}else console.info("[sw-debug] serviceWorker not supported in this browser");if("caches"in window)try{const r=await caches.keys();console.info("[sw-debug] CacheStorage keys:",r);for(const s of r)try{const n=await(await caches.open(s)).keys();console.info("[sw-debug] cache:".concat(s," entries:"),n.map(l=>l.url).slice(0,50))}catch(o){console.warn("[sw-debug] reading cache",s,o)}}catch(r){console.warn("[sw-debug] caches.keys failed",r)}else console.info("[sw-debug] CacheStorage not available")}catch(r){console.error("[sw-debug] unexpected error",r)}}setTimeout(()=>{t().catch(()=>{})},300),window.debugSWStatus=t}typeof navigator<"u"&&"serviceWorker"in navigator&&(async()=>{try{const t=await navigator.serviceWorker.getRegistrations();if(t&&t.length>0)console.info("[sw-auto] already registered",t.map(r=>r.scope));else{console.info("[sw-auto] attempting to register /service-worker.js");try{const r=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});console.info("[sw-auto] registration success",r.scope,r),await navigator.serviceWorker.ready,console.info("[sw-auto] service worker ready"),setTimeout(()=>{window.debugSWStatus&&window.debugSWStatus().catch(()=>{})},200)}catch(r){console.warn("[sw-auto] registration failed",r)}}}catch(t){console.warn("[sw-auto] failed to check/register",t)}})();typeof window<"u"&&(window.findCoveringElements=()=>{try{const r=Array.from(document.body.querySelectorAll("*")).filter(o=>{const n=o.getBoundingClientRect();return n.width>0&&n.height>0&&n.top<=0&&n.left<=0&&n.right>=window.innerWidth&&n.bottom>=window.innerHeight}),s=r.map(o=>({tag:o.tagName,id:o.id||null,class:o.className||null,zIndex:getComputedStyle(o).zIndex,pointerEvents:getComputedStyle(o).pointerEvents,position:getComputedStyle(o).position}));return console.info("[debug] covering elements:",s),r}catch(t){return console.warn("[debug] findCoveringElements failed",t),[]}},window.toggleCoveringPointerEvents=()=>{const t=window.findCoveringElements();t.forEach(r=>{try{const s=r.style.pointerEvents||getComputedStyle(r).pointerEvents;r.dataset.__origPointer=r.dataset.__origPointer||s,r.style.pointerEvents=s==="none"?r.dataset.__origPointer||"":"none"}catch(s){}}),console.info("[debug] toggled pointer-events on",t.length,"elements")},window.forceTempScroll=(t=2e3)=>{const r=document.documentElement.style.overflow,s=document.body.style.overflow;document.documentElement.style.overflow="auto",document.body.style.overflow="auto",console.info("[debug] forced overflow:auto for",t,"ms"),setTimeout(()=>{document.documentElement.style.overflow=r,document.body.style.overflow=s,console.info("[debug] restored overflow")},t)},window.addEventListener("keydown",t=>{t.ctrlKey&&t.shiftKey&&t.key.toLowerCase()==="d"&&(t.preventDefault(),window.findCoveringElements()),t.ctrlKey&&t.shiftKey&&t.key.toLowerCase()==="f"&&(t.preventDefault(),window.toggleCoveringPointerEvents()),t.ctrlKey&&t.shiftKey&&t.key.toLowerCase()==="s"&&(t.preventDefault(),window.forceTempScroll(2e3))}),window.disableVisualEffects=()=>{if(document.getElementById("debug-disable-visuals"))return;const t=document.createElement("style");t.id="debug-disable-visuals",t.innerHTML='\n      .backdrop-blur-sm, [class*="backdrop-blur"], .backdrop-blur-md, .glass-card, .settings-modal, .notification-card, .notification-container {\n        backdrop-filter: none !important;\n        -webkit-backdrop-filter: none !important;\n      }\n      * {\n        filter: none !important;\n        will-change: auto !important;\n        transform: none !important;\n      }\n    ',document.head.appendChild(t),console.info("[debug] visual effects disabled")},window.restoreVisualEffects=()=>{const t=document.getElementById("debug-disable-visuals");t&&t.remove(),console.info("[debug] visual effects restored")},window.startTouchTrace=(t=200)=>{if(window.__touchTraceRunning)return console.info("[touch-trace] already running");window.__touchTrace=[],window.__touchTraceRunning=!0;const r=s=>{try{const o=s.touches&&s.touches[0]?s.touches[0]:s.changedTouches&&s.changedTouches[0]||{},n={time:Date.now(),type:s.type,target:s.target&&(s.target.tagName||s.target.nodeName),id:s.target&&(s.target.id||null),class:s.target&&(s.target.className||null),x:o.clientX||null,y:o.clientY||null,defaultPrevented:s.defaultPrevented};window.__touchTrace.push(n),window.__touchTrace.length>t&&window.__touchTrace.shift(),console.debug("[touch-trace]",n.type,n.target,"dp=",n.defaultPrevented)}catch(o){}};window.__touchTraceHandlers={touchstart:s=>r(s),touchmove:s=>r(s),touchend:s=>r(s)},document.addEventListener("touchstart",window.__touchTraceHandlers.touchstart,{passive:!0}),document.addEventListener("touchmove",window.__touchTraceHandlers.touchmove,{passive:!0}),document.addEventListener("touchend",window.__touchTraceHandlers.touchend,{passive:!0}),console.info("[touch-trace] started (check window.__touchTrace for recent events)")},window.stopTouchTrace=()=>{if(!window.__touchTraceRunning)return console.info("[touch-trace] not running");document.removeEventListener("touchstart",window.__touchTraceHandlers.touchstart),document.removeEventListener("touchmove",window.__touchTraceHandlers.touchmove),document.removeEventListener("touchend",window.__touchTraceHandlers.touchend),window.__touchTraceRunning=!1,console.info("[touch-trace] stopped")});export{ca as B,Ce as C,ge as F,Ar as R,vt as S,We as X,Y as _,ia as __vite_legacy_guard,W as a,a as b,we as c,Cr as d,da as e,lr as f,or as g,e as j,wr as u};
