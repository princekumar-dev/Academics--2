import{d as Ft,e as Pt,a as bt,j as X,b as nt,F as vt,S as Ut}from"./index-a36099b1.js";import{g as At,h as jt,r as ht}from"./react-vendor-ad4d5528.js";import{R as Lt}from"./RefreshButton-4223bdd0.js";import{u as Zt,P as Wt}from"./usePullToRefresh-291be9c1.js";function zt(at){throw new Error('Could not dynamically require "'+at+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ot={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(at,ot){(function(_){at.exports=_()})(function(){return function _(Z,x,h){function l(b,w){if(!x[b]){if(!Z[b]){var m=typeof zt=="function"&&zt;if(!w&&m)return m(b,!0);if(i)return i(b,!0);var y=new Error("Cannot find module '"+b+"'");throw y.code="MODULE_NOT_FOUND",y}var s=x[b]={exports:{}};Z[b][0].call(s.exports,function(u){var n=Z[b][1][u];return l(n||u)},s,s.exports,_,Z,x,h)}return x[b].exports}for(var i=typeof zt=="function"&&zt,d=0;d<h.length;d++)l(h[d]);return l}({1:[function(_,Z,x){var h=_("./utils"),l=_("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(d){for(var b,w,m,y,s,u,n,c=[],o=0,f=d.length,v=f,z=h.getTypeOf(d)!=="string";o<d.length;)v=f-o,m=z?(b=d[o++],w=o<f?d[o++]:0,o<f?d[o++]:0):(b=d.charCodeAt(o++),w=o<f?d.charCodeAt(o++):0,o<f?d.charCodeAt(o++):0),y=b>>2,s=(3&b)<<4|w>>4,u=1<v?(15&w)<<2|m>>6:64,n=2<v?63&m:64,c.push(i.charAt(y)+i.charAt(s)+i.charAt(u)+i.charAt(n));return c.join("")},x.decode=function(d){var b,w,m,y,s,u,n=0,c=0,o="data:";if(d.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var f,v=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===i.charAt(64)&&v--,d.charAt(d.length-2)===i.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=l.uint8array?new Uint8Array(0|v):new Array(0|v);n<d.length;)b=i.indexOf(d.charAt(n++))<<2|(y=i.indexOf(d.charAt(n++)))>>4,w=(15&y)<<4|(s=i.indexOf(d.charAt(n++)))>>2,m=(3&s)<<6|(u=i.indexOf(d.charAt(n++))),f[c++]=b,s!==64&&(f[c++]=w),u!==64&&(f[c++]=m);return f}},{"./support":30,"./utils":32}],2:[function(_,Z,x){var h=_("./external"),l=_("./stream/DataWorker"),i=_("./stream/Crc32Probe"),d=_("./stream/DataLengthProbe");function b(w,m,y,s,u){this.compressedSize=w,this.uncompressedSize=m,this.crc32=y,this.compression=s,this.compressedContent=u}b.prototype={getContentWorker:function(){var w=new l(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return w.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new l(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(w,m,y){return w.pipe(new i).pipe(new d("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},Z.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(_,Z,x){var h=_("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},x.DEFLATE=_("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(_,Z,x){var h=_("./utils"),l=function(){for(var i,d=[],b=0;b<256;b++){i=b;for(var w=0;w<8;w++)i=1&i?3988292384^i>>>1:i>>>1;d[b]=i}return d}();Z.exports=function(i,d){return i!==void 0&&i.length?h.getTypeOf(i)!=="string"?function(b,w,m,y){var s=l,u=y+m;b^=-1;for(var n=y;n<u;n++)b=b>>>8^s[255&(b^w[n])];return-1^b}(0|d,i,i.length,0):function(b,w,m,y){var s=l,u=y+m;b^=-1;for(var n=y;n<u;n++)b=b>>>8^s[255&(b^w.charCodeAt(n))];return-1^b}(0|d,i,i.length,0):0}},{"./utils":32}],5:[function(_,Z,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(_,Z,x){var h=null;h=typeof Promise<"u"?Promise:_("lie"),Z.exports={Promise:h}},{lie:37}],7:[function(_,Z,x){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=_("pako"),i=_("./utils"),d=_("./stream/GenericWorker"),b=h?"uint8array":"array";function w(m,y){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}x.magic="\b\0",i.inherits(w,d),w.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(b,m.data),!1)},w.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},x.compressWorker=function(m){return new w("Deflate",m)},x.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(_,Z,x){function h(s,u){var n,c="";for(n=0;n<u;n++)c+=String.fromCharCode(255&s),s>>>=8;return c}function l(s,u,n,c,o,f){var v,z,C=s.file,T=s.compression,D=f!==b.utf8encode,j=i.transformTo("string",f(C.name)),O=i.transformTo("string",b.utf8encode(C.name)),M=C.comment,Y=i.transformTo("string",f(M)),g=i.transformTo("string",b.utf8encode(M)),B=O.length!==C.name.length,e=g.length!==M.length,U="",Q="",W="",tt=C.dir,$=C.date,J={crc32:0,compressedSize:0,uncompressedSize:0};u&&!n||(J.crc32=s.crc32,J.compressedSize=s.compressedSize,J.uncompressedSize=s.uncompressedSize);var E=0;u&&(E|=8),D||!B&&!e||(E|=2048);var I=0,V=0;tt&&(I|=16),o==="UNIX"?(V=798,I|=function(H,lt){var ft=H;return H||(ft=lt?16893:33204),(65535&ft)<<16}(C.unixPermissions,tt)):(V=20,I|=function(H){return 63&(H||0)}(C.dosPermissions)),v=$.getUTCHours(),v<<=6,v|=$.getUTCMinutes(),v<<=5,v|=$.getUTCSeconds()/2,z=$.getUTCFullYear()-1980,z<<=4,z|=$.getUTCMonth()+1,z<<=5,z|=$.getUTCDate(),B&&(Q=h(1,1)+h(w(j),4)+O,U+="up"+h(Q.length,2)+Q),e&&(W=h(1,1)+h(w(Y),4)+g,U+="uc"+h(W.length,2)+W);var K="";return K+="\n\0",K+=h(E,2),K+=T.magic,K+=h(v,2),K+=h(z,2),K+=h(J.crc32,4),K+=h(J.compressedSize,4),K+=h(J.uncompressedSize,4),K+=h(j.length,2),K+=h(U.length,2),{fileRecord:m.LOCAL_FILE_HEADER+K+j+U,dirRecord:m.CENTRAL_FILE_HEADER+h(V,2)+K+h(Y.length,2)+"\0\0\0\0"+h(I,4)+h(c,4)+j+U+Y}}var i=_("../utils"),d=_("../stream/GenericWorker"),b=_("../utf8"),w=_("../crc32"),m=_("../signature");function y(s,u,n,c){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=u,this.zipPlatform=n,this.encodeFileName=c,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(y,d),y.prototype.push=function(s){var u=s.meta.percent||0,n=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,d.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:n?(u+100*(n-c-1))/n:100}}))},y.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var u=this.streamFiles&&!s.file.dir;if(u){var n=l(s,u,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(s){this.accumulate=!1;var u=this.streamFiles&&!s.file.dir,n=l(s,u,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),u)this.push({data:function(c){return m.DATA_DESCRIPTOR+h(c.crc32,4)+h(c.compressedSize,4)+h(c.uncompressedSize,4)}(s),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var s=this.bytesWritten,u=0;u<this.dirRecords.length;u++)this.push({data:this.dirRecords[u],meta:{percent:100}});var n=this.bytesWritten-s,c=function(o,f,v,z,C){var T=i.transformTo("string",C(z));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(o,2)+h(o,2)+h(f,4)+h(v,4)+h(T.length,2)+T}(this.dirRecords.length,n,s,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(s){this._sources.push(s);var u=this;return s.on("data",function(n){u.processChunk(n)}),s.on("end",function(){u.closedSource(u.previous.streamInfo),u._sources.length?u.prepareNextSource():u.end()}),s.on("error",function(n){u.error(n)}),this},y.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(s){var u=this._sources;if(!d.prototype.error.call(this,s))return!1;for(var n=0;n<u.length;n++)try{u[n].error(s)}catch(c){}return!0},y.prototype.lock=function(){d.prototype.lock.call(this);for(var s=this._sources,u=0;u<s.length;u++)s[u].lock()},Z.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(_,Z,x){var h=_("../compressions"),l=_("./ZipFileWorker");x.generateWorker=function(i,d,b){var w=new l(d.streamFiles,b,d.platform,d.encodeFileName),m=0;try{i.forEach(function(y,s){m++;var u=function(f,v){var z=f||v,C=h[z];if(!C)throw new Error(z+" is not a valid compression method !");return C}(s.options.compression,d.compression),n=s.options.compressionOptions||d.compressionOptions||{},c=s.dir,o=s.date;s._compressWorker(u,n).withStreamInfo("file",{name:y,dir:c,date:o,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(w)}),w.entriesCount=m}catch(y){w.error(y)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(_,Z,x){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new h;for(var i in this)typeof this[i]!="function"&&(l[i]=this[i]);return l}}(h.prototype=_("./object")).loadAsync=_("./load"),h.support=_("./support"),h.defaults=_("./defaults"),h.version="3.10.1",h.loadAsync=function(l,i){return new h().loadAsync(l,i)},h.external=_("./external"),Z.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(_,Z,x){var h=_("./utils"),l=_("./external"),i=_("./utf8"),d=_("./zipEntries"),b=_("./stream/Crc32Probe"),w=_("./nodejsUtils");function m(y){return new l.Promise(function(s,u){var n=y.decompressed.getContentWorker().pipe(new b);n.on("error",function(c){u(c)}).on("end",function(){n.streamInfo.crc32!==y.decompressed.crc32?u(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}Z.exports=function(y,s){var u=this;return s=h.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),w.isNode&&w.isStream(y)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",y,!0,s.optimizedBinaryString,s.base64).then(function(n){var c=new d(s);return c.load(n),c}).then(function(n){var c=[l.Promise.resolve(n)],o=n.files;if(s.checkCRC32)for(var f=0;f<o.length;f++)c.push(m(o[f]));return l.Promise.all(c)}).then(function(n){for(var c=n.shift(),o=c.files,f=0;f<o.length;f++){var v=o[f],z=v.fileNameStr,C=h.resolve(v.fileNameStr);u.file(C,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:s.createFolders}),v.dir||(u.file(C).unsafeOriginalName=z)}return c.zipComment.length&&(u.comment=c.zipComment),u})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(_,Z,x){var h=_("../utils"),l=_("../stream/GenericWorker");function i(d,b){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(b)}h.inherits(i,l),i.prototype._bindStream=function(d){var b=this;(this._stream=d).pause(),d.on("data",function(w){b.push({data:w,meta:{percent:0}})}).on("error",function(w){b.isPaused?this.generatedError=w:b.error(w)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},i.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Z.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(_,Z,x){var h=_("readable-stream").Readable;function l(i,d,b){h.call(this,d),this._helper=i;var w=this;i.on("data",function(m,y){w.push(m)||w._helper.pause(),b&&b(y)}).on("error",function(m){w.emit("error",m)}).on("end",function(){w.push(null)})}_("../utils").inherits(l,h),l.prototype._read=function(){this._helper.resume()},Z.exports=l},{"../utils":32,"readable-stream":16}],14:[function(_,Z,x){Z.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,l);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,l)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var l=new Buffer(h);return l.fill(0),l},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(_,Z,x){function h(C,T,D){var j,O=i.getTypeOf(T),M=i.extend(D||{},w);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(C=o(C)),M.createFolders&&(j=c(C))&&f.call(this,j,!0);var Y=O==="string"&&M.binary===!1&&M.base64===!1;D&&D.binary!==void 0||(M.binary=!Y),(T instanceof m&&T.uncompressedSize===0||M.dir||!T||T.length===0)&&(M.base64=!1,M.binary=!0,T="",M.compression="STORE",O="string");var g=null;g=T instanceof m||T instanceof d?T:u.isNode&&u.isStream(T)?new n(C,T):i.prepareContent(C,T,M.binary,M.optimizedBinaryString,M.base64);var B=new y(C,g,M);this.files[C]=B}var l=_("./utf8"),i=_("./utils"),d=_("./stream/GenericWorker"),b=_("./stream/StreamHelper"),w=_("./defaults"),m=_("./compressedObject"),y=_("./zipObject"),s=_("./generate"),u=_("./nodejsUtils"),n=_("./nodejs/NodejsStreamInputAdapter"),c=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var T=C.lastIndexOf("/");return 0<T?C.substring(0,T):""},o=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},f=function(C,T){return T=T!==void 0?T:w.createFolders,C=o(C),this.files[C]||h.call(this,C,null,{dir:!0,createFolders:T}),this.files[C]};function v(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var T,D,j;for(T in this.files)j=this.files[T],(D=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&C(D,j)},filter:function(C){var T=[];return this.forEach(function(D,j){C(D,j)&&T.push(j)}),T},file:function(C,T,D){if(arguments.length!==1)return C=this.root+C,h.call(this,C,T,D),this;if(v(C)){var j=C;return this.filter(function(M,Y){return!Y.dir&&j.test(M)})}var O=this.files[this.root+C];return O&&!O.dir?O:null},folder:function(C){if(!C)return this;if(v(C))return this.filter(function(O,M){return M.dir&&C.test(O)});var T=this.root+C,D=f.call(this,T),j=this.clone();return j.root=D.name,j},remove:function(C){C=this.root+C;var T=this.files[C];if(T||(C.slice(-1)!=="/"&&(C+="/"),T=this.files[C]),T&&!T.dir)delete this.files[C];else for(var D=this.filter(function(O,M){return M.name.slice(0,C.length)===C}),j=0;j<D.length;j++)delete this.files[D[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var T,D={};try{if((D=i.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");i.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var j=D.comment||this.comment||"";T=s.generateWorker(this,D,j)}catch(O){(T=new d("error")).error(O)}return new b(T,D.type||"string",D.mimeType)},generateAsync:function(C,T){return this.generateInternalStream(C).accumulate(T)},generateNodeStream:function(C,T){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(T)}};Z.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(_,Z,x){Z.exports=_("stream")},{stream:void 0}],17:[function(_,Z,x){var h=_("./DataReader");function l(i){h.call(this,i);for(var d=0;d<this.data.length;d++)i[d]=255&i[d]}_("../utils").inherits(l,h),l.prototype.byteAt=function(i){return this.data[this.zero+i]},l.prototype.lastIndexOfSignature=function(i){for(var d=i.charCodeAt(0),b=i.charCodeAt(1),w=i.charCodeAt(2),m=i.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===d&&this.data[y+1]===b&&this.data[y+2]===w&&this.data[y+3]===m)return y-this.zero;return-1},l.prototype.readAndCheckSignature=function(i){var d=i.charCodeAt(0),b=i.charCodeAt(1),w=i.charCodeAt(2),m=i.charCodeAt(3),y=this.readData(4);return d===y[0]&&b===y[1]&&w===y[2]&&m===y[3]},l.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,d},Z.exports=l},{"../utils":32,"./DataReader":18}],18:[function(_,Z,x){var h=_("../utils");function l(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var d,b=0;for(this.checkOffset(i),d=this.index+i-1;d>=this.index;d--)b=(b<<8)+this.byteAt(d);return this.index+=i,b},readString:function(i){return h.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},Z.exports=l},{"../utils":32}],19:[function(_,Z,x){var h=_("./Uint8ArrayReader");function l(i){h.call(this,i)}_("../utils").inherits(l,h),l.prototype.readData=function(i){this.checkOffset(i);var d=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,d},Z.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(_,Z,x){var h=_("./DataReader");function l(i){h.call(this,i)}_("../utils").inherits(l,h),l.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},l.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},l.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},l.prototype.readData=function(i){this.checkOffset(i);var d=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,d},Z.exports=l},{"../utils":32,"./DataReader":18}],21:[function(_,Z,x){var h=_("./ArrayReader");function l(i){h.call(this,i)}_("../utils").inherits(l,h),l.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,d},Z.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(_,Z,x){var h=_("../utils"),l=_("../support"),i=_("./ArrayReader"),d=_("./StringReader"),b=_("./NodeBufferReader"),w=_("./Uint8ArrayReader");Z.exports=function(m){var y=h.getTypeOf(m);return h.checkSupport(y),y!=="string"||l.uint8array?y==="nodebuffer"?new b(m):l.uint8array?new w(h.transformTo("uint8array",m)):new i(h.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(_,Z,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(_,Z,x){var h=_("./GenericWorker"),l=_("../utils");function i(d){h.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(i,h),i.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},Z.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(_,Z,x){var h=_("./GenericWorker"),l=_("../crc32");function i(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}_("../utils").inherits(i,h),i.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},Z.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(_,Z,x){var h=_("../utils"),l=_("./GenericWorker");function i(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}h.inherits(i,l),i.prototype.processChunk=function(d){if(d){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+d.data.length}l.prototype.processChunk.call(this,d)},Z.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(_,Z,x){var h=_("../utils"),l=_("./GenericWorker");function i(d){l.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(w){b.dataIsReady=!0,b.data=w,b.max=w&&w.length||0,b.type=h.getTypeOf(w),b.isPaused||b._tickAndRepeat()},function(w){b.error(w)})}h.inherits(i,l),i.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,b);break;case"uint8array":d=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":d=this.data.slice(this.index,b)}return this.index=b,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},Z.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(_,Z,x){function h(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,i){return this._listeners[l].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,i){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,i)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var i=this;return l.on("data",function(d){i.processChunk(d)}),l.on("end",function(){i.end()}),l.on("error",function(d){i.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,i){return this.extraStreamInfo[l]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},Z.exports=h},{}],29:[function(_,Z,x){var h=_("../utils"),l=_("./ConvertWorker"),i=_("./GenericWorker"),d=_("../base64"),b=_("../support"),w=_("../external"),m=null;if(b.nodestream)try{m=_("../nodejs/NodejsStreamOutputAdapter")}catch(u){}function y(u,n){return new w.Promise(function(c,o){var f=[],v=u._internalType,z=u._outputType,C=u._mimeType;u.on("data",function(T,D){f.push(T),n&&n(D)}).on("error",function(T){f=[],o(T)}).on("end",function(){try{var T=function(D,j,O){switch(D){case"blob":return h.newBlob(h.transformTo("arraybuffer",j),O);case"base64":return d.encode(j);default:return h.transformTo(D,j)}}(z,function(D,j){var O,M=0,Y=null,g=0;for(O=0;O<j.length;O++)g+=j[O].length;switch(D){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(Y=new Uint8Array(g),O=0;O<j.length;O++)Y.set(j[O],M),M+=j[O].length;return Y;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+D+"'")}}(v,f),C);c(T)}catch(D){o(D)}f=[]}).resume()})}function s(u,n,c){var o=n;switch(n){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=n,this._mimeType=c,h.checkSupport(o),this._worker=u.pipe(new l(o)),u.lock()}catch(f){this._worker=new i("error"),this._worker.error(f)}}s.prototype={accumulate:function(u){return y(this,u)},on:function(u,n){var c=this;return u==="data"?this._worker.on(u,function(o){n.call(c,o.data,o.meta)}):this._worker.on(u,function(){h.delay(n,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},u)}},Z.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(_,Z,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=typeof Buffer<"u",x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var h=new ArrayBuffer(0);try{x.blob=new Blob([h],{type:"application/zip"}).size===0}catch(i){try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(h),x.blob=l.getBlob("application/zip").size===0}catch(d){x.blob=!1}}}try{x.nodestream=!!_("readable-stream").Readable}catch(i){x.nodestream=!1}},{"readable-stream":16}],31:[function(_,Z,x){for(var h=_("./utils"),l=_("./support"),i=_("./nodejsUtils"),d=_("./stream/GenericWorker"),b=new Array(256),w=0;w<256;w++)b[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;b[254]=b[254]=1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function y(){d.call(this,"utf-8 encode")}x.utf8encode=function(s){return l.nodebuffer?i.newBufferFrom(s,"utf-8"):function(u){var n,c,o,f,v,z=u.length,C=0;for(f=0;f<z;f++)(64512&(c=u.charCodeAt(f)))==55296&&f+1<z&&(64512&(o=u.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),f++),C+=c<128?1:c<2048?2:c<65536?3:4;for(n=l.uint8array?new Uint8Array(C):new Array(C),f=v=0;v<C;f++)(64512&(c=u.charCodeAt(f)))==55296&&f+1<z&&(64512&(o=u.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(o-56320),f++),c<128?n[v++]=c:(c<2048?n[v++]=192|c>>>6:(c<65536?n[v++]=224|c>>>12:(n[v++]=240|c>>>18,n[v++]=128|c>>>12&63),n[v++]=128|c>>>6&63),n[v++]=128|63&c);return n}(s)},x.utf8decode=function(s){return l.nodebuffer?h.transformTo("nodebuffer",s).toString("utf-8"):function(u){var n,c,o,f,v=u.length,z=new Array(2*v);for(n=c=0;n<v;)if((o=u[n++])<128)z[c++]=o;else if(4<(f=b[o]))z[c++]=65533,n+=f-1;else{for(o&=f===2?31:f===3?15:7;1<f&&n<v;)o=o<<6|63&u[n++],f--;1<f?z[c++]=65533:o<65536?z[c++]=o:(o-=65536,z[c++]=55296|o>>10&1023,z[c++]=56320|1023&o)}return z.length!==c&&(z.subarray?z=z.subarray(0,c):z.length=c),h.applyFromCharCode(z)}(s=h.transformTo(l.uint8array?"uint8array":"array",s))},h.inherits(m,d),m.prototype.processChunk=function(s){var u=h.transformTo(l.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var n=u;(u=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),u.set(n,this.leftOver.length)}else u=this.leftOver.concat(u);this.leftOver=null}var c=function(f,v){var z;for((v=v||f.length)>f.length&&(v=f.length),z=v-1;0<=z&&(192&f[z])==128;)z--;return z<0||z===0?v:z+b[f[z]]>v?z:v}(u),o=u;c!==u.length&&(l.uint8array?(o=u.subarray(0,c),this.leftOver=u.subarray(c,u.length)):(o=u.slice(0,c),this.leftOver=u.slice(c,u.length))),this.push({data:x.utf8decode(o),meta:s.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=m,h.inherits(y,d),y.prototype.processChunk=function(s){this.push({data:x.utf8encode(s.data),meta:s.meta})},x.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(_,Z,x){var h=_("./support"),l=_("./base64"),i=_("./nodejsUtils"),d=_("./external");function b(n){return n}function w(n,c){for(var o=0;o<n.length;++o)c[o]=255&n.charCodeAt(o);return c}_("setimmediate"),x.newBlob=function(n,c){x.checkSupport("blob");try{return new Blob([n],{type:c})}catch(f){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(n),o.getBlob(c)}catch(v){throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(n,c,o){var f=[],v=0,z=n.length;if(z<=o)return String.fromCharCode.apply(null,n);for(;v<z;)c==="array"||c==="nodebuffer"?f.push(String.fromCharCode.apply(null,n.slice(v,Math.min(v+o,z)))):f.push(String.fromCharCode.apply(null,n.subarray(v,Math.min(v+o,z)))),v+=o;return f.join("")},stringifyByChar:function(n){for(var c="",o=0;o<n.length;o++)c+=String.fromCharCode(n[o]);return c},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(n){return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch(n){return!1}}()}};function y(n){var c=65536,o=x.getTypeOf(n),f=!0;if(o==="uint8array"?f=m.applyCanBeUsed.uint8array:o==="nodebuffer"&&(f=m.applyCanBeUsed.nodebuffer),f)for(;1<c;)try{return m.stringifyByChunk(n,o,c)}catch(v){c=Math.floor(c/2)}return m.stringifyByChar(n)}function s(n,c){for(var o=0;o<n.length;o++)c[o]=n[o];return c}x.applyFromCharCode=y;var u={};u.string={string:b,array:function(n){return w(n,new Array(n.length))},arraybuffer:function(n){return u.string.uint8array(n).buffer},uint8array:function(n){return w(n,new Uint8Array(n.length))},nodebuffer:function(n){return w(n,i.allocBuffer(n.length))}},u.array={string:y,array:b,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return i.newBufferFrom(n)}},u.arraybuffer={string:function(n){return y(new Uint8Array(n))},array:function(n){return s(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:b,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return i.newBufferFrom(new Uint8Array(n))}},u.uint8array={string:y,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:b,nodebuffer:function(n){return i.newBufferFrom(n)}},u.nodebuffer={string:y,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return u.nodebuffer.uint8array(n).buffer},uint8array:function(n){return s(n,new Uint8Array(n.length))},nodebuffer:b},x.transformTo=function(n,c){if(c=c||"",!n)return c;x.checkSupport(n);var o=x.getTypeOf(c);return u[o][n](c)},x.resolve=function(n){for(var c=n.split("/"),o=[],f=0;f<c.length;f++){var v=c[f];v==="."||v===""&&f!==0&&f!==c.length-1||(v===".."?o.pop():o.push(v))}return o.join("/")},x.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":h.nodebuffer&&i.isBuffer(n)?"nodebuffer":h.uint8array&&n instanceof Uint8Array?"uint8array":h.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(n){if(!h[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(n){var c,o,f="";for(o=0;o<(n||"").length;o++)f+="\\x"+((c=n.charCodeAt(o))<16?"0":"")+c.toString(16).toUpperCase();return f},x.delay=function(n,c,o){setImmediate(function(){n.apply(o||null,c||[])})},x.inherits=function(n,c){function o(){}o.prototype=c.prototype,n.prototype=new o},x.extend=function(){var n,c,o={};for(n=0;n<arguments.length;n++)for(c in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],c)&&o[c]===void 0&&(o[c]=arguments[n][c]);return o},x.prepareContent=function(n,c,o,f,v){return d.Promise.resolve(c).then(function(z){return h.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new d.Promise(function(C,T){var D=new FileReader;D.onload=function(j){C(j.target.result)},D.onerror=function(j){T(j.target.error)},D.readAsArrayBuffer(z)}):z}).then(function(z){var C=x.getTypeOf(z);return C?(C==="arraybuffer"?z=x.transformTo("uint8array",z):C==="string"&&(v?z=l.decode(z):o&&f!==!0&&(z=function(T){return w(T,h.uint8array?new Uint8Array(T.length):new Array(T.length))}(z))),z):d.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(_,Z,x){var h=_("./reader/readerFor"),l=_("./utils"),i=_("./signature"),d=_("./zipEntry"),b=_("./support");function w(m){this.files=[],this.loadOptions=m}w.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(y)+", expected "+l.pretty(m)+")")}},isSignature:function(m,y){var s=this.reader.index;this.reader.setIndex(m);var u=this.reader.readString(4)===y;return this.reader.setIndex(s),u},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=b.uint8array?"uint8array":"array",s=l.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,s,u=this.zip64EndOfCentralSize-44;0<u;)m=this.reader.readInt(2),y=this.reader.readInt(4),s=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var u=y-s;if(0<u)this.isSignature(y,i.CENTRAL_FILE_HEADER)||(this.reader.zero=u);else if(u<0)throw new Error("Corrupted zip: missing "+Math.abs(u)+" bytes.")},prepareReader:function(m){this.reader=h(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Z.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(_,Z,x){var h=_("./reader/readerFor"),l=_("./utils"),i=_("./compressedObject"),d=_("./crc32"),b=_("./utf8"),w=_("./compressions"),m=_("./support");function y(s,u){this.options=s,this.loadOptions=u}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var u,n;if(s.skip(22),this.fileNameLength=s.readInt(2),n=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((u=function(c){for(var o in w)if(Object.prototype.hasOwnProperty.call(w,o)&&w[o].magic===c)return w[o];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,u,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var u=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(u),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=h(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var u,n,c,o=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<o;)u=s.readInt(2),n=s.readInt(2),c=s.readData(n),this.extraFields[u]={id:u,length:n,value:c};s.setIndex(o)},handleUTF8:function(){var s=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();if(u!==null)this.fileNameStr=u;else{var n=l.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var o=l.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var u=h(s.value);return u.readInt(1)!==1||d(this.fileName)!==u.readInt(4)?null:b.utf8decode(u.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var u=h(s.value);return u.readInt(1)!==1||d(this.fileComment)!==u.readInt(4)?null:b.utf8decode(u.readData(s.length-5))}return null}},Z.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(_,Z,x){function h(u,n,c){this.name=u,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=n,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var l=_("./stream/StreamHelper"),i=_("./stream/DataWorker"),d=_("./utf8"),b=_("./compressedObject"),w=_("./stream/GenericWorker");h.prototype={internalStream:function(u){var n=null,c="string";try{if(!u)throw new Error("No output type specified.");var o=(c=u.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),n=this._decompressWorker();var f=!this._dataBinary;f&&!o&&(n=n.pipe(new d.Utf8EncodeWorker)),!f&&o&&(n=n.pipe(new d.Utf8DecodeWorker))}catch(v){(n=new w("error")).error(v)}return new l(n,c,"")},async:function(u,n){return this.internalStream(u).accumulate(n)},nodeStream:function(u,n){return this.internalStream(u||"nodebuffer").toNodejsStream(n)},_compressWorker:function(u,n){if(this._data instanceof b&&this._data.compression.magic===u.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new d.Utf8EncodeWorker)),b.createWorkerFrom(c,u,n)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof w?this._data:new i(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<m.length;s++)h.prototype[m[s]]=y;Z.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(_,Z,x){(function(h){var l,i,d=h.MutationObserver||h.WebKitMutationObserver;if(d){var b=0,w=new d(u),m=h.document.createTextNode("");w.observe(m,{characterData:!0}),l=function(){m.data=b=++b%2}}else if(h.setImmediate||h.MessageChannel===void 0)l="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var n=h.document.createElement("script");n.onreadystatechange=function(){u(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},h.document.documentElement.appendChild(n)}:function(){setTimeout(u,0)};else{var y=new h.MessageChannel;y.port1.onmessage=u,l=function(){y.port2.postMessage(0)}}var s=[];function u(){var n,c;i=!0;for(var o=s.length;o;){for(c=s,s=[],n=-1;++n<o;)c[n]();o=s.length}i=!1}Z.exports=function(n){s.push(n)!==1||i||l()}}).call(this,typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(_,Z,x){var h=_("immediate");function l(){}var i={},d=["REJECTED"],b=["FULFILLED"],w=["PENDING"];function m(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,o!==l&&n(this,o)}function y(o,f,v){this.promise=o,typeof f=="function"&&(this.onFulfilled=f,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function s(o,f,v){h(function(){var z;try{z=f(v)}catch(C){return i.reject(o,C)}z===o?i.reject(o,new TypeError("Cannot resolve promise with itself")):i.resolve(o,z)})}function u(o){var f=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof f=="function")return function(){f.apply(o,arguments)}}function n(o,f){var v=!1;function z(D){v||(v=!0,i.reject(o,D))}function C(D){v||(v=!0,i.resolve(o,D))}var T=c(function(){f(C,z)});T.status==="error"&&z(T.value)}function c(o,f){var v={};try{v.value=o(f),v.status="success"}catch(z){v.status="error",v.value=z}return v}(Z.exports=m).prototype.finally=function(o){if(typeof o!="function")return this;var f=this.constructor;return this.then(function(v){return f.resolve(o()).then(function(){return v})},function(v){return f.resolve(o()).then(function(){throw v})})},m.prototype.catch=function(o){return this.then(null,o)},m.prototype.then=function(o,f){if(typeof o!="function"&&this.state===b||typeof f!="function"&&this.state===d)return this;var v=new this.constructor(l);return this.state!==w?s(v,this.state===b?o:f,this.outcome):this.queue.push(new y(v,o,f)),v},y.prototype.callFulfilled=function(o){i.resolve(this.promise,o)},y.prototype.otherCallFulfilled=function(o){s(this.promise,this.onFulfilled,o)},y.prototype.callRejected=function(o){i.reject(this.promise,o)},y.prototype.otherCallRejected=function(o){s(this.promise,this.onRejected,o)},i.resolve=function(o,f){var v=c(u,f);if(v.status==="error")return i.reject(o,v.value);var z=v.value;if(z)n(o,z);else{o.state=b,o.outcome=f;for(var C=-1,T=o.queue.length;++C<T;)o.queue[C].callFulfilled(f)}return o},i.reject=function(o,f){o.state=d,o.outcome=f;for(var v=-1,z=o.queue.length;++v<z;)o.queue[v].callRejected(f);return o},m.resolve=function(o){return o instanceof this?o:i.resolve(new this(l),o)},m.reject=function(o){var f=new this(l);return i.reject(f,o)},m.all=function(o){var f=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=o.length,z=!1;if(!v)return this.resolve([]);for(var C=new Array(v),T=0,D=-1,j=new this(l);++D<v;)O(o[D],D);return j;function O(M,Y){f.resolve(M).then(function(g){C[Y]=g,++T!==v||z||(z=!0,i.resolve(j,C))},function(g){z||(z=!0,i.reject(j,g))})}},m.race=function(o){var f=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=o.length,z=!1;if(!v)return this.resolve([]);for(var C=-1,T=new this(l);++C<v;)D=o[C],f.resolve(D).then(function(j){z||(z=!0,i.resolve(T,j))},function(j){z||(z=!0,i.reject(T,j))});var D;return T}},{immediate:36}],38:[function(_,Z,x){var h={};(0,_("./lib/utils/common").assign)(h,_("./lib/deflate"),_("./lib/inflate"),_("./lib/zlib/constants")),Z.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(_,Z,x){var h=_("./zlib/deflate"),l=_("./utils/common"),i=_("./utils/strings"),d=_("./zlib/messages"),b=_("./zlib/zstream"),w=Object.prototype.toString,m=0,y=-1,s=0,u=8;function n(o){if(!(this instanceof n))return new n(o);this.options=l.assign({level:y,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},o||{});var f=this.options;f.raw&&0<f.windowBits?f.windowBits=-f.windowBits:f.gzip&&0<f.windowBits&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var v=h.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(v!==m)throw new Error(d[v]);if(f.header&&h.deflateSetHeader(this.strm,f.header),f.dictionary){var z;if(z=typeof f.dictionary=="string"?i.string2buf(f.dictionary):w.call(f.dictionary)==="[object ArrayBuffer]"?new Uint8Array(f.dictionary):f.dictionary,(v=h.deflateSetDictionary(this.strm,z))!==m)throw new Error(d[v]);this._dict_set=!0}}function c(o,f){var v=new n(f);if(v.push(o,!0),v.err)throw v.msg||d[v.err];return v.result}n.prototype.push=function(o,f){var v,z,C=this.strm,T=this.options.chunkSize;if(this.ended)return!1;z=f===~~f?f:f===!0?4:0,typeof o=="string"?C.input=i.string2buf(o):w.call(o)==="[object ArrayBuffer]"?C.input=new Uint8Array(o):C.input=o,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new l.Buf8(T),C.next_out=0,C.avail_out=T),(v=h.deflate(C,z))!==1&&v!==m)return this.onEnd(v),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(l.shrinkBuf(C.output,C.next_out))):this.onData(l.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&v!==1);return z===4?(v=h.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===m):z!==2||(this.onEnd(m),!(C.avail_out=0))},n.prototype.onData=function(o){this.chunks.push(o)},n.prototype.onEnd=function(o){o===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},x.Deflate=n,x.deflate=c,x.deflateRaw=function(o,f){return(f=f||{}).raw=!0,c(o,f)},x.gzip=function(o,f){return(f=f||{}).gzip=!0,c(o,f)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(_,Z,x){var h=_("./zlib/inflate"),l=_("./utils/common"),i=_("./utils/strings"),d=_("./zlib/constants"),b=_("./zlib/messages"),w=_("./zlib/zstream"),m=_("./zlib/gzheader"),y=Object.prototype.toString;function s(n){if(!(this instanceof s))return new s(n);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},n||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||n&&n.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var o=h.inflateInit2(this.strm,c.windowBits);if(o!==d.Z_OK)throw new Error(b[o]);this.header=new m,h.inflateGetHeader(this.strm,this.header)}function u(n,c){var o=new s(c);if(o.push(n,!0),o.err)throw o.msg||b[o.err];return o.result}s.prototype.push=function(n,c){var o,f,v,z,C,T,D=this.strm,j=this.options.chunkSize,O=this.options.dictionary,M=!1;if(this.ended)return!1;f=c===~~c?c:c===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof n=="string"?D.input=i.binstring2buf(n):y.call(n)==="[object ArrayBuffer]"?D.input=new Uint8Array(n):D.input=n,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new l.Buf8(j),D.next_out=0,D.avail_out=j),(o=h.inflate(D,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&O&&(T=typeof O=="string"?i.string2buf(O):y.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,o=h.inflateSetDictionary(this.strm,T)),o===d.Z_BUF_ERROR&&M===!0&&(o=d.Z_OK,M=!1),o!==d.Z_STREAM_END&&o!==d.Z_OK)return this.onEnd(o),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&o!==d.Z_STREAM_END&&(D.avail_in!==0||f!==d.Z_FINISH&&f!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=i.utf8border(D.output,D.next_out),z=D.next_out-v,C=i.buf2string(D.output,v),D.next_out=z,D.avail_out=j-z,z&&l.arraySet(D.output,D.output,v,z,0),this.onData(C)):this.onData(l.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(M=!0)}while((0<D.avail_in||D.avail_out===0)&&o!==d.Z_STREAM_END);return o===d.Z_STREAM_END&&(f=d.Z_FINISH),f===d.Z_FINISH?(o=h.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===d.Z_OK):f!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(D.avail_out=0))},s.prototype.onData=function(n){this.chunks.push(n)},s.prototype.onEnd=function(n){n===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},x.Inflate=s,x.inflate=u,x.inflateRaw=function(n,c){return(c=c||{}).raw=!0,u(n,c)},x.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(_,Z,x){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(d){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var w=b.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var m in w)w.hasOwnProperty(m)&&(d[m]=w[m])}}return d},x.shrinkBuf=function(d,b){return d.length===b?d:d.subarray?d.subarray(0,b):(d.length=b,d)};var l={arraySet:function(d,b,w,m,y){if(b.subarray&&d.subarray)d.set(b.subarray(w,w+m),y);else for(var s=0;s<m;s++)d[y+s]=b[w+s]},flattenChunks:function(d){var b,w,m,y,s,u;for(b=m=0,w=d.length;b<w;b++)m+=d[b].length;for(u=new Uint8Array(m),b=y=0,w=d.length;b<w;b++)s=d[b],u.set(s,y),y+=s.length;return u}},i={arraySet:function(d,b,w,m,y){for(var s=0;s<m;s++)d[y+s]=b[w+s]},flattenChunks:function(d){return[].concat.apply([],d)}};x.setTyped=function(d){d?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,l)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,i))},x.setTyped(h)},{}],42:[function(_,Z,x){var h=_("./common"),l=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(m){l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){i=!1}for(var d=new h.Buf8(256),b=0;b<256;b++)d[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function w(m,y){if(y<65537&&(m.subarray&&i||!m.subarray&&l))return String.fromCharCode.apply(null,h.shrinkBuf(m,y));for(var s="",u=0;u<y;u++)s+=String.fromCharCode(m[u]);return s}d[254]=d[254]=1,x.string2buf=function(m){var y,s,u,n,c,o=m.length,f=0;for(n=0;n<o;n++)(64512&(s=m.charCodeAt(n)))==55296&&n+1<o&&(64512&(u=m.charCodeAt(n+1)))==56320&&(s=65536+(s-55296<<10)+(u-56320),n++),f+=s<128?1:s<2048?2:s<65536?3:4;for(y=new h.Buf8(f),n=c=0;c<f;n++)(64512&(s=m.charCodeAt(n)))==55296&&n+1<o&&(64512&(u=m.charCodeAt(n+1)))==56320&&(s=65536+(s-55296<<10)+(u-56320),n++),s<128?y[c++]=s:(s<2048?y[c++]=192|s>>>6:(s<65536?y[c++]=224|s>>>12:(y[c++]=240|s>>>18,y[c++]=128|s>>>12&63),y[c++]=128|s>>>6&63),y[c++]=128|63&s);return y},x.buf2binstring=function(m){return w(m,m.length)},x.binstring2buf=function(m){for(var y=new h.Buf8(m.length),s=0,u=y.length;s<u;s++)y[s]=m.charCodeAt(s);return y},x.buf2string=function(m,y){var s,u,n,c,o=y||m.length,f=new Array(2*o);for(s=u=0;s<o;)if((n=m[s++])<128)f[u++]=n;else if(4<(c=d[n]))f[u++]=65533,s+=c-1;else{for(n&=c===2?31:c===3?15:7;1<c&&s<o;)n=n<<6|63&m[s++],c--;1<c?f[u++]=65533:n<65536?f[u++]=n:(n-=65536,f[u++]=55296|n>>10&1023,f[u++]=56320|1023&n)}return w(f,u)},x.utf8border=function(m,y){var s;for((y=y||m.length)>m.length&&(y=m.length),s=y-1;0<=s&&(192&m[s])==128;)s--;return s<0||s===0?y:s+d[m[s]]>y?s:y}},{"./common":41}],43:[function(_,Z,x){Z.exports=function(h,l,i,d){for(var b=65535&h|0,w=h>>>16&65535|0,m=0;i!==0;){for(i-=m=2e3<i?2e3:i;w=w+(b=b+l[d++]|0)|0,--m;);b%=65521,w%=65521}return b|w<<16|0}},{}],44:[function(_,Z,x){Z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(_,Z,x){var h=function(){for(var l,i=[],d=0;d<256;d++){l=d;for(var b=0;b<8;b++)l=1&l?3988292384^l>>>1:l>>>1;i[d]=l}return i}();Z.exports=function(l,i,d,b){var w=h,m=b+d;l^=-1;for(var y=b;y<m;y++)l=l>>>8^w[255&(l^i[y])];return-1^l}},{}],46:[function(_,Z,x){var h,l=_("../utils/common"),i=_("./trees"),d=_("./adler32"),b=_("./crc32"),w=_("./messages"),m=0,y=4,s=0,u=-2,n=-1,c=4,o=2,f=8,v=9,z=286,C=30,T=19,D=2*z+1,j=15,O=3,M=258,Y=M+O+1,g=42,B=113,e=1,U=2,Q=3,W=4;function tt(t,A){return t.msg=w[A],A}function $(t){return(t<<1)-(4<t?9:0)}function J(t){for(var A=t.length;0<=--A;)t[A]=0}function E(t){var A=t.state,k=A.pending;k>t.avail_out&&(k=t.avail_out),k!==0&&(l.arraySet(t.output,A.pending_buf,A.pending_out,k,t.next_out),t.next_out+=k,A.pending_out+=k,t.total_out+=k,t.avail_out-=k,A.pending-=k,A.pending===0&&(A.pending_out=0))}function I(t,A){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,A),t.block_start=t.strstart,E(t.strm)}function V(t,A){t.pending_buf[t.pending++]=A}function K(t,A){t.pending_buf[t.pending++]=A>>>8&255,t.pending_buf[t.pending++]=255&A}function H(t,A){var k,a,r=t.max_chain_length,p=t.strstart,N=t.prev_length,F=t.nice_match,S=t.strstart>t.w_size-Y?t.strstart-(t.w_size-Y):0,L=t.window,q=t.w_mask,P=t.prev,G=t.strstart+M,st=L[p+N-1],et=L[p+N];t.prev_length>=t.good_match&&(r>>=2),F>t.lookahead&&(F=t.lookahead);do if(L[(k=A)+N]===et&&L[k+N-1]===st&&L[k]===L[p]&&L[++k]===L[p+1]){p+=2,k++;do;while(L[++p]===L[++k]&&L[++p]===L[++k]&&L[++p]===L[++k]&&L[++p]===L[++k]&&L[++p]===L[++k]&&L[++p]===L[++k]&&L[++p]===L[++k]&&L[++p]===L[++k]&&p<G);if(a=M-(G-p),p=G-M,N<a){if(t.match_start=A,F<=(N=a))break;st=L[p+N-1],et=L[p+N]}}while((A=P[A&q])>S&&--r!=0);return N<=t.lookahead?N:t.lookahead}function lt(t){var A,k,a,r,p,N,F,S,L,q,P=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=P+(P-Y)){for(l.arraySet(t.window,t.window,P,P,0),t.match_start-=P,t.strstart-=P,t.block_start-=P,A=k=t.hash_size;a=t.head[--A],t.head[A]=P<=a?a-P:0,--k;);for(A=k=P;a=t.prev[--A],t.prev[A]=P<=a?a-P:0,--k;);r+=P}if(t.strm.avail_in===0)break;if(N=t.strm,F=t.window,S=t.strstart+t.lookahead,L=r,q=void 0,q=N.avail_in,L<q&&(q=L),k=q===0?0:(N.avail_in-=q,l.arraySet(F,N.input,N.next_in,q,S),N.state.wrap===1?N.adler=d(N.adler,F,q,S):N.state.wrap===2&&(N.adler=b(N.adler,F,q,S)),N.next_in+=q,N.total_in+=q,q),t.lookahead+=k,t.lookahead+t.insert>=O)for(p=t.strstart-t.insert,t.ins_h=t.window[p],t.ins_h=(t.ins_h<<t.hash_shift^t.window[p+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[p+O-1])&t.hash_mask,t.prev[p&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=p,p++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<Y&&t.strm.avail_in!==0)}function ft(t,A){for(var k,a;;){if(t.lookahead<Y){if(lt(t),t.lookahead<Y&&A===m)return e;if(t.lookahead===0)break}if(k=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,k=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),k!==0&&t.strstart-k<=t.w_size-Y&&(t.match_length=H(t,k)),t.match_length>=O)if(a=i._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,k=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(I(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<O-1?t.strstart:O-1,A===y?(I(t,!0),t.strm.avail_out===0?Q:W):t.last_lit&&(I(t,!1),t.strm.avail_out===0)?e:U}function rt(t,A){for(var k,a,r;;){if(t.lookahead<Y){if(lt(t),t.lookahead<Y&&A===m)return e;if(t.lookahead===0)break}if(k=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,k=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,k!==0&&t.prev_length<t.max_lazy_match&&t.strstart-k<=t.w_size-Y&&(t.match_length=H(t,k),t.match_length<=5&&(t.strategy===1||t.match_length===O&&4096<t.strstart-t.match_start)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-O,a=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,k=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=O-1,t.strstart++,a&&(I(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((a=i._tr_tally(t,0,t.window[t.strstart-1]))&&I(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,A===y?(I(t,!0),t.strm.avail_out===0?Q:W):t.last_lit&&(I(t,!1),t.strm.avail_out===0)?e:U}function it(t,A,k,a,r){this.good_length=t,this.max_lazy=A,this.nice_length=k,this.max_chain=a,this.func=r}function dt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=f,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*D),this.dyn_dtree=new l.Buf16(2*(2*C+1)),this.bl_tree=new l.Buf16(2*(2*T+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(j+1),this.heap=new l.Buf16(2*z+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*z+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(t){var A;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(A=t.state).pending=0,A.pending_out=0,A.wrap<0&&(A.wrap=-A.wrap),A.status=A.wrap?g:B,t.adler=A.wrap===2?0:1,A.last_flush=m,i._tr_init(A),s):tt(t,u)}function mt(t){var A=ct(t);return A===s&&function(k){k.window_size=2*k.w_size,J(k.head),k.max_lazy_match=h[k.level].max_lazy,k.good_match=h[k.level].good_length,k.nice_match=h[k.level].nice_length,k.max_chain_length=h[k.level].max_chain,k.strstart=0,k.block_start=0,k.lookahead=0,k.insert=0,k.match_length=k.prev_length=O-1,k.match_available=0,k.ins_h=0}(t.state),A}function R(t,A,k,a,r,p){if(!t)return u;var N=1;if(A===n&&(A=6),a<0?(N=0,a=-a):15<a&&(N=2,a-=16),r<1||v<r||k!==f||a<8||15<a||A<0||9<A||p<0||c<p)return tt(t,u);a===8&&(a=9);var F=new dt;return(t.state=F).strm=t,F.wrap=N,F.gzhead=null,F.w_bits=a,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=r+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+O-1)/O),F.window=new l.Buf8(2*F.w_size),F.head=new l.Buf16(F.hash_size),F.prev=new l.Buf16(F.w_size),F.lit_bufsize=1<<r+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new l.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=A,F.strategy=p,F.method=k,mt(t)}h=[new it(0,0,0,0,function(t,A){var k=65535;for(k>t.pending_buf_size-5&&(k=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),t.lookahead===0&&A===m)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+k;if((t.strstart===0||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,I(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Y&&(I(t,!1),t.strm.avail_out===0))return e}return t.insert=0,A===y?(I(t,!0),t.strm.avail_out===0?Q:W):(t.strstart>t.block_start&&(I(t,!1),t.strm.avail_out),e)}),new it(4,4,8,4,ft),new it(4,5,16,8,ft),new it(4,6,32,32,ft),new it(4,4,16,16,rt),new it(8,16,32,32,rt),new it(8,16,128,128,rt),new it(8,32,128,256,rt),new it(32,128,258,1024,rt),new it(32,258,258,4096,rt)],x.deflateInit=function(t,A){return R(t,A,f,15,8,0)},x.deflateInit2=R,x.deflateReset=mt,x.deflateResetKeep=ct,x.deflateSetHeader=function(t,A){return t&&t.state?t.state.wrap!==2?u:(t.state.gzhead=A,s):u},x.deflate=function(t,A){var k,a,r,p;if(!t||!t.state||5<A||A<0)return t?tt(t,u):u;if(a=t.state,!t.output||!t.input&&t.avail_in!==0||a.status===666&&A!==y)return tt(t,t.avail_out===0?-5:u);if(a.strm=t,k=a.last_flush,a.last_flush=A,a.status===g)if(a.wrap===2)t.adler=0,V(a,31),V(a,139),V(a,8),a.gzhead?(V(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),V(a,255&a.gzhead.time),V(a,a.gzhead.time>>8&255),V(a,a.gzhead.time>>16&255),V(a,a.gzhead.time>>24&255),V(a,a.level===9?2:2<=a.strategy||a.level<2?4:0),V(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(V(a,255&a.gzhead.extra.length),V(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=b(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(V(a,0),V(a,0),V(a,0),V(a,0),V(a,0),V(a,a.level===9?2:2<=a.strategy||a.level<2?4:0),V(a,3),a.status=B);else{var N=f+(a.w_bits-8<<4)<<8;N|=(2<=a.strategy||a.level<2?0:a.level<6?1:a.level===6?2:3)<<6,a.strstart!==0&&(N|=32),N+=31-N%31,a.status=B,K(a,N),a.strstart!==0&&(K(a,t.adler>>>16),K(a,65535&t.adler)),t.adler=1}if(a.status===69)if(a.gzhead.extra){for(r=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>r&&(t.adler=b(t.adler,a.pending_buf,a.pending-r,r)),E(t),r=a.pending,a.pending!==a.pending_buf_size));)V(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>r&&(t.adler=b(t.adler,a.pending_buf,a.pending-r,r)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(a.status===73)if(a.gzhead.name){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(t.adler=b(t.adler,a.pending_buf,a.pending-r,r)),E(t),r=a.pending,a.pending===a.pending_buf_size)){p=1;break}p=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,V(a,p)}while(p!==0);a.gzhead.hcrc&&a.pending>r&&(t.adler=b(t.adler,a.pending_buf,a.pending-r,r)),p===0&&(a.gzindex=0,a.status=91)}else a.status=91;if(a.status===91)if(a.gzhead.comment){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(t.adler=b(t.adler,a.pending_buf,a.pending-r,r)),E(t),r=a.pending,a.pending===a.pending_buf_size)){p=1;break}p=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,V(a,p)}while(p!==0);a.gzhead.hcrc&&a.pending>r&&(t.adler=b(t.adler,a.pending_buf,a.pending-r,r)),p===0&&(a.status=103)}else a.status=103;if(a.status===103&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&E(t),a.pending+2<=a.pending_buf_size&&(V(a,255&t.adler),V(a,t.adler>>8&255),t.adler=0,a.status=B)):a.status=B),a.pending!==0){if(E(t),t.avail_out===0)return a.last_flush=-1,s}else if(t.avail_in===0&&$(A)<=$(k)&&A!==y)return tt(t,-5);if(a.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||a.lookahead!==0||A!==m&&a.status!==666){var F=a.strategy===2?function(S,L){for(var q;;){if(S.lookahead===0&&(lt(S),S.lookahead===0)){if(L===m)return e;break}if(S.match_length=0,q=i._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,q&&(I(S,!1),S.strm.avail_out===0))return e}return S.insert=0,L===y?(I(S,!0),S.strm.avail_out===0?Q:W):S.last_lit&&(I(S,!1),S.strm.avail_out===0)?e:U}(a,A):a.strategy===3?function(S,L){for(var q,P,G,st,et=S.window;;){if(S.lookahead<=M){if(lt(S),S.lookahead<=M&&L===m)return e;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=O&&0<S.strstart&&(P=et[G=S.strstart-1])===et[++G]&&P===et[++G]&&P===et[++G]){st=S.strstart+M;do;while(P===et[++G]&&P===et[++G]&&P===et[++G]&&P===et[++G]&&P===et[++G]&&P===et[++G]&&P===et[++G]&&P===et[++G]&&G<st);S.match_length=M-(st-G),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=O?(q=i._tr_tally(S,1,S.match_length-O),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(q=i._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),q&&(I(S,!1),S.strm.avail_out===0))return e}return S.insert=0,L===y?(I(S,!0),S.strm.avail_out===0?Q:W):S.last_lit&&(I(S,!1),S.strm.avail_out===0)?e:U}(a,A):h[a.level].func(a,A);if(F!==Q&&F!==W||(a.status=666),F===e||F===Q)return t.avail_out===0&&(a.last_flush=-1),s;if(F===U&&(A===1?i._tr_align(a):A!==5&&(i._tr_stored_block(a,0,0,!1),A===3&&(J(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),E(t),t.avail_out===0))return a.last_flush=-1,s}return A!==y?s:a.wrap<=0?1:(a.wrap===2?(V(a,255&t.adler),V(a,t.adler>>8&255),V(a,t.adler>>16&255),V(a,t.adler>>24&255),V(a,255&t.total_in),V(a,t.total_in>>8&255),V(a,t.total_in>>16&255),V(a,t.total_in>>24&255)):(K(a,t.adler>>>16),K(a,65535&t.adler)),E(t),0<a.wrap&&(a.wrap=-a.wrap),a.pending!==0?s:1)},x.deflateEnd=function(t){var A;return t&&t.state?(A=t.state.status)!==g&&A!==69&&A!==73&&A!==91&&A!==103&&A!==B&&A!==666?tt(t,u):(t.state=null,A===B?tt(t,-3):s):u},x.deflateSetDictionary=function(t,A){var k,a,r,p,N,F,S,L,q=A.length;if(!t||!t.state||(p=(k=t.state).wrap)===2||p===1&&k.status!==g||k.lookahead)return u;for(p===1&&(t.adler=d(t.adler,A,q,0)),k.wrap=0,q>=k.w_size&&(p===0&&(J(k.head),k.strstart=0,k.block_start=0,k.insert=0),L=new l.Buf8(k.w_size),l.arraySet(L,A,q-k.w_size,k.w_size,0),A=L,q=k.w_size),N=t.avail_in,F=t.next_in,S=t.input,t.avail_in=q,t.next_in=0,t.input=A,lt(k);k.lookahead>=O;){for(a=k.strstart,r=k.lookahead-(O-1);k.ins_h=(k.ins_h<<k.hash_shift^k.window[a+O-1])&k.hash_mask,k.prev[a&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=a,a++,--r;);k.strstart=a,k.lookahead=O-1,lt(k)}return k.strstart+=k.lookahead,k.block_start=k.strstart,k.insert=k.lookahead,k.lookahead=0,k.match_length=k.prev_length=O-1,k.match_available=0,t.next_in=F,t.input=S,t.avail_in=N,k.wrap=p,s},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(_,Z,x){Z.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(_,Z,x){Z.exports=function(h,l){var i,d,b,w,m,y,s,u,n,c,o,f,v,z,C,T,D,j,O,M,Y,g,B,e,U;i=h.state,d=h.next_in,e=h.input,b=d+(h.avail_in-5),w=h.next_out,U=h.output,m=w-(l-h.avail_out),y=w+(h.avail_out-257),s=i.dmax,u=i.wsize,n=i.whave,c=i.wnext,o=i.window,f=i.hold,v=i.bits,z=i.lencode,C=i.distcode,T=(1<<i.lenbits)-1,D=(1<<i.distbits)-1;t:do{v<15&&(f+=e[d++]<<v,v+=8,f+=e[d++]<<v,v+=8),j=z[f&T];e:for(;;){if(f>>>=O=j>>>24,v-=O,(O=j>>>16&255)===0)U[w++]=65535&j;else{if(!(16&O)){if(!(64&O)){j=z[(65535&j)+(f&(1<<O)-1)];continue e}if(32&O){i.mode=12;break t}h.msg="invalid literal/length code",i.mode=30;break t}M=65535&j,(O&=15)&&(v<O&&(f+=e[d++]<<v,v+=8),M+=f&(1<<O)-1,f>>>=O,v-=O),v<15&&(f+=e[d++]<<v,v+=8,f+=e[d++]<<v,v+=8),j=C[f&D];r:for(;;){if(f>>>=O=j>>>24,v-=O,!(16&(O=j>>>16&255))){if(!(64&O)){j=C[(65535&j)+(f&(1<<O)-1)];continue r}h.msg="invalid distance code",i.mode=30;break t}if(Y=65535&j,v<(O&=15)&&(f+=e[d++]<<v,(v+=8)<O&&(f+=e[d++]<<v,v+=8)),s<(Y+=f&(1<<O)-1)){h.msg="invalid distance too far back",i.mode=30;break t}if(f>>>=O,v-=O,(O=w-m)<Y){if(n<(O=Y-O)&&i.sane){h.msg="invalid distance too far back",i.mode=30;break t}if(B=o,(g=0)===c){if(g+=u-O,O<M){for(M-=O;U[w++]=o[g++],--O;);g=w-Y,B=U}}else if(c<O){if(g+=u+c-O,(O-=c)<M){for(M-=O;U[w++]=o[g++],--O;);if(g=0,c<M){for(M-=O=c;U[w++]=o[g++],--O;);g=w-Y,B=U}}}else if(g+=c-O,O<M){for(M-=O;U[w++]=o[g++],--O;);g=w-Y,B=U}for(;2<M;)U[w++]=B[g++],U[w++]=B[g++],U[w++]=B[g++],M-=3;M&&(U[w++]=B[g++],1<M&&(U[w++]=B[g++]))}else{for(g=w-Y;U[w++]=U[g++],U[w++]=U[g++],U[w++]=U[g++],2<(M-=3););M&&(U[w++]=U[g++],1<M&&(U[w++]=U[g++]))}break}}break}}while(d<b&&w<y);d-=M=v>>3,f&=(1<<(v-=M<<3))-1,h.next_in=d,h.next_out=w,h.avail_in=d<b?b-d+5:5-(d-b),h.avail_out=w<y?y-w+257:257-(w-y),i.hold=f,i.bits=v}},{}],49:[function(_,Z,x){var h=_("../utils/common"),l=_("./adler32"),i=_("./crc32"),d=_("./inffast"),b=_("./inftrees"),w=1,m=2,y=0,s=-2,u=1,n=852,c=592;function o(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(g){var B;return g&&g.state?(B=g.state,g.total_in=g.total_out=B.total=0,g.msg="",B.wrap&&(g.adler=1&B.wrap),B.mode=u,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new h.Buf32(n),B.distcode=B.distdyn=new h.Buf32(c),B.sane=1,B.back=-1,y):s}function z(g){var B;return g&&g.state?((B=g.state).wsize=0,B.whave=0,B.wnext=0,v(g)):s}function C(g,B){var e,U;return g&&g.state?(U=g.state,B<0?(e=0,B=-B):(e=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?s:(U.window!==null&&U.wbits!==B&&(U.window=null),U.wrap=e,U.wbits=B,z(g))):s}function T(g,B){var e,U;return g?(U=new f,(g.state=U).window=null,(e=C(g,B))!==y&&(g.state=null),e):s}var D,j,O=!0;function M(g){if(O){var B;for(D=new h.Buf32(512),j=new h.Buf32(32),B=0;B<144;)g.lens[B++]=8;for(;B<256;)g.lens[B++]=9;for(;B<280;)g.lens[B++]=7;for(;B<288;)g.lens[B++]=8;for(b(w,g.lens,0,288,D,0,g.work,{bits:9}),B=0;B<32;)g.lens[B++]=5;b(m,g.lens,0,32,j,0,g.work,{bits:5}),O=!1}g.lencode=D,g.lenbits=9,g.distcode=j,g.distbits=5}function Y(g,B,e,U){var Q,W=g.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new h.Buf8(W.wsize)),U>=W.wsize?(h.arraySet(W.window,B,e-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(U<(Q=W.wsize-W.wnext)&&(Q=U),h.arraySet(W.window,B,e-U,Q,W.wnext),(U-=Q)?(h.arraySet(W.window,B,e-U,U,0),W.wnext=U,W.whave=W.wsize):(W.wnext+=Q,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=Q))),0}x.inflateReset=z,x.inflateReset2=C,x.inflateResetKeep=v,x.inflateInit=function(g){return T(g,15)},x.inflateInit2=T,x.inflate=function(g,B){var e,U,Q,W,tt,$,J,E,I,V,K,H,lt,ft,rt,it,dt,ct,mt,R,t,A,k,a,r=0,p=new h.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return s;(e=g.state).mode===12&&(e.mode=13),tt=g.next_out,Q=g.output,J=g.avail_out,W=g.next_in,U=g.input,$=g.avail_in,E=e.hold,I=e.bits,V=$,K=J,A=y;t:for(;;)switch(e.mode){case u:if(e.wrap===0){e.mode=13;break}for(;I<16;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(2&e.wrap&&E===35615){p[e.check=0]=255&E,p[1]=E>>>8&255,e.check=i(e.check,p,2,0),I=E=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&E)<<8)+(E>>8))%31){g.msg="incorrect header check",e.mode=30;break}if((15&E)!=8){g.msg="unknown compression method",e.mode=30;break}if(I-=4,t=8+(15&(E>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){g.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,g.adler=e.check=1,e.mode=512&E?10:12,I=E=0;break;case 2:for(;I<16;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(e.flags=E,(255&e.flags)!=8){g.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){g.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=E>>8&1),512&e.flags&&(p[0]=255&E,p[1]=E>>>8&255,e.check=i(e.check,p,2,0)),I=E=0,e.mode=3;case 3:for(;I<32;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}e.head&&(e.head.time=E),512&e.flags&&(p[0]=255&E,p[1]=E>>>8&255,p[2]=E>>>16&255,p[3]=E>>>24&255,e.check=i(e.check,p,4,0)),I=E=0,e.mode=4;case 4:for(;I<16;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}e.head&&(e.head.xflags=255&E,e.head.os=E>>8),512&e.flags&&(p[0]=255&E,p[1]=E>>>8&255,e.check=i(e.check,p,2,0)),I=E=0,e.mode=5;case 5:if(1024&e.flags){for(;I<16;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}e.length=E,e.head&&(e.head.extra_len=E),512&e.flags&&(p[0]=255&E,p[1]=E>>>8&255,e.check=i(e.check,p,2,0)),I=E=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&($<(H=e.length)&&(H=$),H&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),h.arraySet(e.head.extra,U,W,H,t)),512&e.flags&&(e.check=i(e.check,U,H,W)),$-=H,W+=H,e.length-=H),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if($===0)break t;for(H=0;t=U[W+H++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&H<$;);if(512&e.flags&&(e.check=i(e.check,U,H,W)),$-=H,W+=H,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if($===0)break t;for(H=0;t=U[W+H++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&H<$;);if(512&e.flags&&(e.check=i(e.check,U,H,W)),$-=H,W+=H,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;I<16;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(E!==(65535&e.check)){g.msg="header crc mismatch",e.mode=30;break}I=E=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),g.adler=e.check=0,e.mode=12;break;case 10:for(;I<32;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}g.adler=e.check=o(E),I=E=0,e.mode=11;case 11:if(e.havedict===0)return g.next_out=tt,g.avail_out=J,g.next_in=W,g.avail_in=$,e.hold=E,e.bits=I,2;g.adler=e.check=1,e.mode=12;case 12:if(B===5||B===6)break t;case 13:if(e.last){E>>>=7&I,I-=7&I,e.mode=27;break}for(;I<3;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}switch(e.last=1&E,I-=1,3&(E>>>=1)){case 0:e.mode=14;break;case 1:if(M(e),e.mode=20,B!==6)break;E>>>=2,I-=2;break t;case 2:e.mode=17;break;case 3:g.msg="invalid block type",e.mode=30}E>>>=2,I-=2;break;case 14:for(E>>>=7&I,I-=7&I;I<32;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if((65535&E)!=(E>>>16^65535)){g.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&E,I=E=0,e.mode=15,B===6)break t;case 15:e.mode=16;case 16:if(H=e.length){if($<H&&(H=$),J<H&&(H=J),H===0)break t;h.arraySet(Q,U,W,H,tt),$-=H,W+=H,J-=H,tt+=H,e.length-=H;break}e.mode=12;break;case 17:for(;I<14;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(e.nlen=257+(31&E),E>>>=5,I-=5,e.ndist=1+(31&E),E>>>=5,I-=5,e.ncode=4+(15&E),E>>>=4,I-=4,286<e.nlen||30<e.ndist){g.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;I<3;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}e.lens[N[e.have++]]=7&E,E>>>=3,I-=3}for(;e.have<19;)e.lens[N[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,k={bits:e.lenbits},A=b(0,e.lens,0,19,e.lencode,0,e.work,k),e.lenbits=k.bits,A){g.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;it=(r=e.lencode[E&(1<<e.lenbits)-1])>>>16&255,dt=65535&r,!((rt=r>>>24)<=I);){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(dt<16)E>>>=rt,I-=rt,e.lens[e.have++]=dt;else{if(dt===16){for(a=rt+2;I<a;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(E>>>=rt,I-=rt,e.have===0){g.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],H=3+(3&E),E>>>=2,I-=2}else if(dt===17){for(a=rt+3;I<a;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}I-=rt,t=0,H=3+(7&(E>>>=rt)),E>>>=3,I-=3}else{for(a=rt+7;I<a;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}I-=rt,t=0,H=11+(127&(E>>>=rt)),E>>>=7,I-=7}if(e.have+H>e.nlen+e.ndist){g.msg="invalid bit length repeat",e.mode=30;break}for(;H--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){g.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,k={bits:e.lenbits},A=b(w,e.lens,0,e.nlen,e.lencode,0,e.work,k),e.lenbits=k.bits,A){g.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,k={bits:e.distbits},A=b(m,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,k),e.distbits=k.bits,A){g.msg="invalid distances set",e.mode=30;break}if(e.mode=20,B===6)break t;case 20:e.mode=21;case 21:if(6<=$&&258<=J){g.next_out=tt,g.avail_out=J,g.next_in=W,g.avail_in=$,e.hold=E,e.bits=I,d(g,K),tt=g.next_out,Q=g.output,J=g.avail_out,W=g.next_in,U=g.input,$=g.avail_in,E=e.hold,I=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;it=(r=e.lencode[E&(1<<e.lenbits)-1])>>>16&255,dt=65535&r,!((rt=r>>>24)<=I);){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(it&&!(240&it)){for(ct=rt,mt=it,R=dt;it=(r=e.lencode[R+((E&(1<<ct+mt)-1)>>ct)])>>>16&255,dt=65535&r,!(ct+(rt=r>>>24)<=I);){if($===0)break t;$--,E+=U[W++]<<I,I+=8}E>>>=ct,I-=ct,e.back+=ct}if(E>>>=rt,I-=rt,e.back+=rt,e.length=dt,it===0){e.mode=26;break}if(32&it){e.back=-1,e.mode=12;break}if(64&it){g.msg="invalid literal/length code",e.mode=30;break}e.extra=15&it,e.mode=22;case 22:if(e.extra){for(a=e.extra;I<a;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}e.length+=E&(1<<e.extra)-1,E>>>=e.extra,I-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;it=(r=e.distcode[E&(1<<e.distbits)-1])>>>16&255,dt=65535&r,!((rt=r>>>24)<=I);){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(!(240&it)){for(ct=rt,mt=it,R=dt;it=(r=e.distcode[R+((E&(1<<ct+mt)-1)>>ct)])>>>16&255,dt=65535&r,!(ct+(rt=r>>>24)<=I);){if($===0)break t;$--,E+=U[W++]<<I,I+=8}E>>>=ct,I-=ct,e.back+=ct}if(E>>>=rt,I-=rt,e.back+=rt,64&it){g.msg="invalid distance code",e.mode=30;break}e.offset=dt,e.extra=15&it,e.mode=24;case 24:if(e.extra){for(a=e.extra;I<a;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}e.offset+=E&(1<<e.extra)-1,E>>>=e.extra,I-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){g.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(J===0)break t;if(H=K-J,e.offset>H){if((H=e.offset-H)>e.whave&&e.sane){g.msg="invalid distance too far back",e.mode=30;break}lt=H>e.wnext?(H-=e.wnext,e.wsize-H):e.wnext-H,H>e.length&&(H=e.length),ft=e.window}else ft=Q,lt=tt-e.offset,H=e.length;for(J<H&&(H=J),J-=H,e.length-=H;Q[tt++]=ft[lt++],--H;);e.length===0&&(e.mode=21);break;case 26:if(J===0)break t;Q[tt++]=e.length,J--,e.mode=21;break;case 27:if(e.wrap){for(;I<32;){if($===0)break t;$--,E|=U[W++]<<I,I+=8}if(K-=J,g.total_out+=K,e.total+=K,K&&(g.adler=e.check=e.flags?i(e.check,Q,K,tt-K):l(e.check,Q,K,tt-K)),K=J,(e.flags?E:o(E))!==e.check){g.msg="incorrect data check",e.mode=30;break}I=E=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;I<32;){if($===0)break t;$--,E+=U[W++]<<I,I+=8}if(E!==(4294967295&e.total)){g.msg="incorrect length check",e.mode=30;break}I=E=0}e.mode=29;case 29:A=1;break t;case 30:A=-3;break t;case 31:return-4;case 32:default:return s}return g.next_out=tt,g.avail_out=J,g.next_in=W,g.avail_in=$,e.hold=E,e.bits=I,(e.wsize||K!==g.avail_out&&e.mode<30&&(e.mode<27||B!==4))&&Y(g,g.output,g.next_out,K-g.avail_out)?(e.mode=31,-4):(V-=g.avail_in,K-=g.avail_out,g.total_in+=V,g.total_out+=K,e.total+=K,e.wrap&&K&&(g.adler=e.check=e.flags?i(e.check,Q,K,g.next_out-K):l(e.check,Q,K,g.next_out-K)),g.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(V==0&&K===0||B===4)&&A===y&&(A=-5),A)},x.inflateEnd=function(g){if(!g||!g.state)return s;var B=g.state;return B.window&&(B.window=null),g.state=null,y},x.inflateGetHeader=function(g,B){var e;return g&&g.state&&2&(e=g.state).wrap?((e.head=B).done=!1,y):s},x.inflateSetDictionary=function(g,B){var e,U=B.length;return g&&g.state?(e=g.state).wrap!==0&&e.mode!==11?s:e.mode===11&&l(1,B,U,0)!==e.check?-3:Y(g,B,U,U)?(e.mode=31,-4):(e.havedict=1,y):s},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(_,Z,x){var h=_("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Z.exports=function(w,m,y,s,u,n,c,o){var f,v,z,C,T,D,j,O,M,Y=o.bits,g=0,B=0,e=0,U=0,Q=0,W=0,tt=0,$=0,J=0,E=0,I=null,V=0,K=new h.Buf16(16),H=new h.Buf16(16),lt=null,ft=0;for(g=0;g<=15;g++)K[g]=0;for(B=0;B<s;B++)K[m[y+B]]++;for(Q=Y,U=15;1<=U&&K[U]===0;U--);if(U<Q&&(Q=U),U===0)return u[n++]=20971520,u[n++]=20971520,o.bits=1,0;for(e=1;e<U&&K[e]===0;e++);for(Q<e&&(Q=e),g=$=1;g<=15;g++)if($<<=1,($-=K[g])<0)return-1;if(0<$&&(w===0||U!==1))return-1;for(H[1]=0,g=1;g<15;g++)H[g+1]=H[g]+K[g];for(B=0;B<s;B++)m[y+B]!==0&&(c[H[m[y+B]]++]=B);if(D=w===0?(I=lt=c,19):w===1?(I=l,V-=257,lt=i,ft-=257,256):(I=d,lt=b,-1),g=e,T=n,tt=B=E=0,z=-1,C=(J=1<<(W=Q))-1,w===1&&852<J||w===2&&592<J)return 1;for(;;){for(j=g-tt,M=c[B]<D?(O=0,c[B]):c[B]>D?(O=lt[ft+c[B]],I[V+c[B]]):(O=96,0),f=1<<g-tt,e=v=1<<W;u[T+(E>>tt)+(v-=f)]=j<<24|O<<16|M|0,v!==0;);for(f=1<<g-1;E&f;)f>>=1;if(f!==0?(E&=f-1,E+=f):E=0,B++,--K[g]==0){if(g===U)break;g=m[y+c[B]]}if(Q<g&&(E&C)!==z){for(tt===0&&(tt=Q),T+=e,$=1<<(W=g-tt);W+tt<U&&!(($-=K[W+tt])<=0);)W++,$<<=1;if(J+=1<<W,w===1&&852<J||w===2&&592<J)return 1;u[z=E&C]=Q<<24|W<<16|T-n|0}}return E!==0&&(u[T+E]=g-tt<<24|64<<16|0),o.bits=Q,0}},{"../utils/common":41}],51:[function(_,Z,x){Z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(_,Z,x){var h=_("../utils/common"),l=0,i=1;function d(r){for(var p=r.length;0<=--p;)r[p]=0}var b=0,w=29,m=256,y=m+1+w,s=30,u=19,n=2*y+1,c=15,o=16,f=7,v=256,z=16,C=17,T=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(y+2));d(Y);var g=new Array(2*s);d(g);var B=new Array(512);d(B);var e=new Array(256);d(e);var U=new Array(w);d(U);var Q,W,tt,$=new Array(s);function J(r,p,N,F,S){this.static_tree=r,this.extra_bits=p,this.extra_base=N,this.elems=F,this.max_length=S,this.has_stree=r&&r.length}function E(r,p){this.dyn_tree=r,this.max_code=0,this.stat_desc=p}function I(r){return r<256?B[r]:B[256+(r>>>7)]}function V(r,p){r.pending_buf[r.pending++]=255&p,r.pending_buf[r.pending++]=p>>>8&255}function K(r,p,N){r.bi_valid>o-N?(r.bi_buf|=p<<r.bi_valid&65535,V(r,r.bi_buf),r.bi_buf=p>>o-r.bi_valid,r.bi_valid+=N-o):(r.bi_buf|=p<<r.bi_valid&65535,r.bi_valid+=N)}function H(r,p,N){K(r,N[2*p],N[2*p+1])}function lt(r,p){for(var N=0;N|=1&r,r>>>=1,N<<=1,0<--p;);return N>>>1}function ft(r,p,N){var F,S,L=new Array(c+1),q=0;for(F=1;F<=c;F++)L[F]=q=q+N[F-1]<<1;for(S=0;S<=p;S++){var P=r[2*S+1];P!==0&&(r[2*S]=lt(L[P]++,P))}}function rt(r){var p;for(p=0;p<y;p++)r.dyn_ltree[2*p]=0;for(p=0;p<s;p++)r.dyn_dtree[2*p]=0;for(p=0;p<u;p++)r.bl_tree[2*p]=0;r.dyn_ltree[2*v]=1,r.opt_len=r.static_len=0,r.last_lit=r.matches=0}function it(r){8<r.bi_valid?V(r,r.bi_buf):0<r.bi_valid&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0}function dt(r,p,N,F){var S=2*p,L=2*N;return r[S]<r[L]||r[S]===r[L]&&F[p]<=F[N]}function ct(r,p,N){for(var F=r.heap[N],S=N<<1;S<=r.heap_len&&(S<r.heap_len&&dt(p,r.heap[S+1],r.heap[S],r.depth)&&S++,!dt(p,F,r.heap[S],r.depth));)r.heap[N]=r.heap[S],N=S,S<<=1;r.heap[N]=F}function mt(r,p,N){var F,S,L,q,P=0;if(r.last_lit!==0)for(;F=r.pending_buf[r.d_buf+2*P]<<8|r.pending_buf[r.d_buf+2*P+1],S=r.pending_buf[r.l_buf+P],P++,F===0?H(r,S,p):(H(r,(L=e[S])+m+1,p),(q=D[L])!==0&&K(r,S-=U[L],q),H(r,L=I(--F),N),(q=j[L])!==0&&K(r,F-=$[L],q)),P<r.last_lit;);H(r,v,p)}function R(r,p){var N,F,S,L=p.dyn_tree,q=p.stat_desc.static_tree,P=p.stat_desc.has_stree,G=p.stat_desc.elems,st=-1;for(r.heap_len=0,r.heap_max=n,N=0;N<G;N++)L[2*N]!==0?(r.heap[++r.heap_len]=st=N,r.depth[N]=0):L[2*N+1]=0;for(;r.heap_len<2;)L[2*(S=r.heap[++r.heap_len]=st<2?++st:0)]=1,r.depth[S]=0,r.opt_len--,P&&(r.static_len-=q[2*S+1]);for(p.max_code=st,N=r.heap_len>>1;1<=N;N--)ct(r,L,N);for(S=G;N=r.heap[1],r.heap[1]=r.heap[r.heap_len--],ct(r,L,1),F=r.heap[1],r.heap[--r.heap_max]=N,r.heap[--r.heap_max]=F,L[2*S]=L[2*N]+L[2*F],r.depth[S]=(r.depth[N]>=r.depth[F]?r.depth[N]:r.depth[F])+1,L[2*N+1]=L[2*F+1]=S,r.heap[1]=S++,ct(r,L,1),2<=r.heap_len;);r.heap[--r.heap_max]=r.heap[1],function(et,pt){var yt,gt,wt,ut,St,Et,_t=pt.dyn_tree,It=pt.max_code,Dt=pt.stat_desc.static_tree,Bt=pt.stat_desc.has_stree,Tt=pt.stat_desc.extra_bits,Rt=pt.stat_desc.extra_base,xt=pt.stat_desc.max_length,Ct=0;for(ut=0;ut<=c;ut++)et.bl_count[ut]=0;for(_t[2*et.heap[et.heap_max]+1]=0,yt=et.heap_max+1;yt<n;yt++)xt<(ut=_t[2*_t[2*(gt=et.heap[yt])+1]+1]+1)&&(ut=xt,Ct++),_t[2*gt+1]=ut,It<gt||(et.bl_count[ut]++,St=0,Rt<=gt&&(St=Tt[gt-Rt]),Et=_t[2*gt],et.opt_len+=Et*(ut+St),Bt&&(et.static_len+=Et*(Dt[2*gt+1]+St)));if(Ct!==0){do{for(ut=xt-1;et.bl_count[ut]===0;)ut--;et.bl_count[ut]--,et.bl_count[ut+1]+=2,et.bl_count[xt]--,Ct-=2}while(0<Ct);for(ut=xt;ut!==0;ut--)for(gt=et.bl_count[ut];gt!==0;)It<(wt=et.heap[--yt])||(_t[2*wt+1]!==ut&&(et.opt_len+=(ut-_t[2*wt+1])*_t[2*wt],_t[2*wt+1]=ut),gt--)}}(r,p),ft(L,st,r.bl_count)}function t(r,p,N){var F,S,L=-1,q=p[1],P=0,G=7,st=4;for(q===0&&(G=138,st=3),p[2*(N+1)+1]=65535,F=0;F<=N;F++)S=q,q=p[2*(F+1)+1],++P<G&&S===q||(P<st?r.bl_tree[2*S]+=P:S!==0?(S!==L&&r.bl_tree[2*S]++,r.bl_tree[2*z]++):P<=10?r.bl_tree[2*C]++:r.bl_tree[2*T]++,L=S,st=(P=0)===q?(G=138,3):S===q?(G=6,3):(G=7,4))}function A(r,p,N){var F,S,L=-1,q=p[1],P=0,G=7,st=4;for(q===0&&(G=138,st=3),F=0;F<=N;F++)if(S=q,q=p[2*(F+1)+1],!(++P<G&&S===q)){if(P<st)for(;H(r,S,r.bl_tree),--P!=0;);else S!==0?(S!==L&&(H(r,S,r.bl_tree),P--),H(r,z,r.bl_tree),K(r,P-3,2)):P<=10?(H(r,C,r.bl_tree),K(r,P-3,3)):(H(r,T,r.bl_tree),K(r,P-11,7));L=S,st=(P=0)===q?(G=138,3):S===q?(G=6,3):(G=7,4)}}d($);var k=!1;function a(r,p,N,F){K(r,(b<<1)+(F?1:0),3),function(S,L,q,P){it(S),P&&(V(S,q),V(S,~q)),h.arraySet(S.pending_buf,S.window,L,q,S.pending),S.pending+=q}(r,p,N,!0)}x._tr_init=function(r){k||(function(){var p,N,F,S,L,q=new Array(c+1);for(S=F=0;S<w-1;S++)for(U[S]=F,p=0;p<1<<D[S];p++)e[F++]=S;for(e[F-1]=S,S=L=0;S<16;S++)for($[S]=L,p=0;p<1<<j[S];p++)B[L++]=S;for(L>>=7;S<s;S++)for($[S]=L<<7,p=0;p<1<<j[S]-7;p++)B[256+L++]=S;for(N=0;N<=c;N++)q[N]=0;for(p=0;p<=143;)Y[2*p+1]=8,p++,q[8]++;for(;p<=255;)Y[2*p+1]=9,p++,q[9]++;for(;p<=279;)Y[2*p+1]=7,p++,q[7]++;for(;p<=287;)Y[2*p+1]=8,p++,q[8]++;for(ft(Y,y+1,q),p=0;p<s;p++)g[2*p+1]=5,g[2*p]=lt(p,5);Q=new J(Y,D,m+1,y,c),W=new J(g,j,0,s,c),tt=new J(new Array(0),O,0,u,f)}(),k=!0),r.l_desc=new E(r.dyn_ltree,Q),r.d_desc=new E(r.dyn_dtree,W),r.bl_desc=new E(r.bl_tree,tt),r.bi_buf=0,r.bi_valid=0,rt(r)},x._tr_stored_block=a,x._tr_flush_block=function(r,p,N,F){var S,L,q=0;0<r.level?(r.strm.data_type===2&&(r.strm.data_type=function(P){var G,st=4093624447;for(G=0;G<=31;G++,st>>>=1)if(1&st&&P.dyn_ltree[2*G]!==0)return l;if(P.dyn_ltree[18]!==0||P.dyn_ltree[20]!==0||P.dyn_ltree[26]!==0)return i;for(G=32;G<m;G++)if(P.dyn_ltree[2*G]!==0)return i;return l}(r)),R(r,r.l_desc),R(r,r.d_desc),q=function(P){var G;for(t(P,P.dyn_ltree,P.l_desc.max_code),t(P,P.dyn_dtree,P.d_desc.max_code),R(P,P.bl_desc),G=u-1;3<=G&&P.bl_tree[2*M[G]+1]===0;G--);return P.opt_len+=3*(G+1)+5+5+4,G}(r),S=r.opt_len+3+7>>>3,(L=r.static_len+3+7>>>3)<=S&&(S=L)):S=L=N+5,N+4<=S&&p!==-1?a(r,p,N,F):r.strategy===4||L===S?(K(r,2+(F?1:0),3),mt(r,Y,g)):(K(r,4+(F?1:0),3),function(P,G,st,et){var pt;for(K(P,G-257,5),K(P,st-1,5),K(P,et-4,4),pt=0;pt<et;pt++)K(P,P.bl_tree[2*M[pt]+1],3);A(P,P.dyn_ltree,G-1),A(P,P.dyn_dtree,st-1)}(r,r.l_desc.max_code+1,r.d_desc.max_code+1,q+1),mt(r,r.dyn_ltree,r.dyn_dtree)),rt(r),F&&it(r)},x._tr_tally=function(r,p,N){return r.pending_buf[r.d_buf+2*r.last_lit]=p>>>8&255,r.pending_buf[r.d_buf+2*r.last_lit+1]=255&p,r.pending_buf[r.l_buf+r.last_lit]=255&N,r.last_lit++,p===0?r.dyn_ltree[2*N]++:(r.matches++,p--,r.dyn_ltree[2*(e[N]+m+1)]++,r.dyn_dtree[2*I(p)]++),r.last_lit===r.lit_bufsize-1},x._tr_align=function(r){K(r,2,3),H(r,v,Y),function(p){p.bi_valid===16?(V(p,p.bi_buf),p.bi_buf=0,p.bi_valid=0):8<=p.bi_valid&&(p.pending_buf[p.pending++]=255&p.bi_buf,p.bi_buf>>=8,p.bi_valid-=8)}(r)}},{"../utils/common":41}],53:[function(_,Z,x){Z.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(_,Z,x){(function(h){(function(l,i){if(!l.setImmediate){var d,b,w,m,y=1,s={},u=!1,n=l.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(l);c=c&&c.setTimeout?c:l,d={}.toString.call(l.process)==="[object process]"?function(z){process.nextTick(function(){f(z)})}:function(){if(l.postMessage&&!l.importScripts){var z=!0,C=l.onmessage;return l.onmessage=function(){z=!1},l.postMessage("","*"),l.onmessage=C,z}}()?(m="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",v,!1):l.attachEvent("onmessage",v),function(z){l.postMessage(m+z,"*")}):l.MessageChannel?((w=new MessageChannel).port1.onmessage=function(z){f(z.data)},function(z){w.port2.postMessage(z)}):n&&"onreadystatechange"in n.createElement("script")?(b=n.documentElement,function(z){var C=n.createElement("script");C.onreadystatechange=function(){f(z),C.onreadystatechange=null,b.removeChild(C),C=null},b.appendChild(C)}):function(z){setTimeout(f,0,z)},c.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var C=new Array(arguments.length-1),T=0;T<C.length;T++)C[T]=arguments[T+1];var D={callback:z,args:C};return s[y]=D,d(y),y++},c.clearImmediate=o}function o(z){delete s[z]}function f(z){if(u)setTimeout(f,0,z);else{var C=s[z];if(C){u=!0;try{(function(T){var D=T.callback,j=T.args;switch(j.length){case 0:D();break;case 1:D(j[0]);break;case 2:D(j[0],j[1]);break;case 3:D(j[0],j[1],j[2]);break;default:D.apply(i,j)}})(C)}finally{o(z),u=!1}}}}function v(z){z.source===l&&typeof z.data=="string"&&z.data.indexOf(m)===0&&f(+z.data.slice(m.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ot);var $t=Ot.exports;const Mt=jt($t),Nt={}.VITE_PUBLIC_BASE_URL||"https://academics-5bf1.onrender.com",kt=()=>Nt?Nt.replace(/\/$/,""):typeof window<"u"?window.location.origin:"";function Vt(){const[at]=ht.useState(()=>{const R=localStorage.getItem("auth");return R?JSON.parse(R):null}),[ot,_]=ht.useState([]),[Z,x]=ht.useState([]),[h,l]=ht.useState(!0),[i,d]=ht.useState(!1),[b,w]=ht.useState(!1),[m,y]=ht.useState([]),[s,u]=ht.useState(null),[n,c]=ht.useState(!1),[o,f]=ht.useState(!1),[v,z]=ht.useState("all"),[C,T]=ht.useState(""),[D,j]=ht.useState(""),[O,M]=ht.useState(!1),[Y,g]=ht.useState("active"),[B,e]=ht.useState(null),U=async()=>{await E(),T("Refreshed successfully"),setTimeout(()=>T(""),2e3)},{isPulling:Q,isRefreshing:W,pullDistance:tt,containerRef:$,threshold:J}=Zt(U,{enabled:!0,threshold:80});ht.useEffect(()=>{(at==null?void 0:at.role)==="staff"?E():l(!1)},[at]),Ft({dispatch_request:()=>{console.log(" Dispatch request notification triggered refresh"),E()},marksheet_dispatch:()=>{console.log(" Marksheet dispatch notification triggered refresh"),E()},marksheet_approval:()=>{console.log(" Marksheet approval notification triggered refresh"),E()}}),Pt(()=>E());const E=async()=>{if(at){l(!0);try{const R=(at==null?void 0:at._id)||(at==null?void 0:at.id)||localStorage.getItem("userId"),t=await bt.get("/api/marksheets?staffId=".concat(R,"&status=verified_by_staff,dispatch_requested,approved_by_hod,rejected_by_hod"));if(t.success){const a=r=>(r==null?void 0:r.status)==="rescheduled_by_hod"?{...r,status:"dispatch_requested",dispatchRequest:{...r.dispatchRequest||{},hodResponse:null}}:r;_((t.marksheets||[]).map(a))}else _([]);let A={success:!1,marksheets:[]};try{if(A=await bt.get("/api/marksheets?staffId=".concat(R,"&status=dispatched")),A.success){const a=r=>(r==null?void 0:r.status)==="rescheduled_by_hod"?{...r,status:"dispatch_requested",dispatchRequest:{...r.dispatchRequest||{},hodResponse:null}}:r;x((A.marksheets||[]).map(a))}else x([])}catch(a){console.error("Error fetching dispatched marksheets:",a),x([])}const k=[...t.success?t.marksheets:[],...A!=null&&A.success?A.marksheets:[]];if(k&&k.length>0){const a=k.map(N=>({id:N.examinationId,name:N.examinationName,createdAt:N.createdAt})),p=Array.from(new Map(a.map(N=>[N.id,N])).values()).sort((N,F)=>new Date(F.createdAt)-new Date(N.createdAt))[0];e((p==null?void 0:p.id)||null)}else e(null)}catch(R){console.error("Error fetching marksheets:",R),_([]),e(null)}finally{l(!1)}}},I=async()=>{M(!0);try{await E()}finally{M(!1)}},V=ht.useCallback(async R=>{try{return await bt.post("/api/marksheets?action=request-dispatch",{marksheetId:R,staffId:at._id||at.id})}catch(t){return{success:!1,error:t.message}}},[at]),K=ht.useCallback(async R=>{T(""),j(""),y(t=>Array.from(new Set([...t,R])));try{const t=await V(R);t!=null&&t.success?(T("Dispatch request submitted for HOD approval."),_(A=>A.map(k=>k._id===R?{...k,status:"dispatch_requested",dispatchRequest:{...k.dispatchRequest||{},requestedAt:new Date().toISOString(),requestedBy:(at==null?void 0:at._id)||(at==null?void 0:at.id),hodResponse:null,hodComments:null,scheduledDispatchDate:null}}:k))):j((t==null?void 0:t.error)||"Failed to request dispatch")}catch(t){console.error(t),j("Unexpected error while requesting dispatch")}finally{y(t=>t.filter(A=>A!==R)),E()}},[V,at,E]),H=async()=>{const R=ot.filter(t=>t.status==="verified_by_staff");if(R.length!==0){T(""),j(""),d(!0);try{const t=[];for(const a of R){const r=await V(a._id);t.push(r)}const A=t.filter(a=>a==null?void 0:a.success).length,k=t.length-A;A>0&&T("Submitted ".concat(A," dispatch request").concat(A>1?"s":""," for approval.")),k>0&&j("Failed to submit ".concat(k," request").concat(k>1?"s":"",". Please try again."))}finally{d(!1),E()}}},lt=ht.useCallback(async R=>{if(R!=null&&R._id){T(""),j(""),u(R._id);try{const t=kt(),A=t?"".concat(t,"/api/generate-pdf?marksheetId=").concat(R._id,"&t=").concat(Date.now()):"",k=t?"".concat(t,"/api/generate-pdf?marksheetId=").concat(R._id,"&format=jpeg&t=").concat(Date.now()):"",a=await bt.post("".concat(t,"/api/whatsapp-dispatch?action=send-marksheet"),{marksheetId:R._id,marksheetPdfUrl:A,marksheetImageUrl:k});if(!a||!a.success){const r=a&&(a.details||a.error)||"Failed to dispatch marksheet";throw r.includes("Authenticate")||r.includes("authentication")?new Error("WhatsApp API authentication failed. Please verify EVOLUTION_API_KEY in .env file. See EVOLUTION_API_SETUP.md"):a&&a.setupGuide?new Error("".concat(r,". ").concat(a.setupGuide)):new Error(r)}T("Marksheet dispatched to parent via WhatsApp."),_(r=>r.map(p=>p._id===R._id?{...p,status:"dispatched"}:p)),x(r=>r.map(p=>p._id===R._id?{...p,status:"dispatched"}:p)),await E()}catch(t){console.error(t),j(t.message||"Unable to dispatch marksheet.")}finally{u(null)}}},[E]),ft=async()=>{var t;const R=ot.filter(A=>A.status==="approved_by_hod");if(R.length!==0){T(""),j(""),c(!0);try{const A=kt(),k=[];for(const p of R)try{const N=A?"".concat(A,"/api/generate-pdf?marksheetId=").concat(p._id,"&t=").concat(Date.now()):"",F=A?"".concat(A,"/api/generate-pdf?marksheetId=").concat(p._id,"&format=jpeg&t=").concat(Date.now()):"";let S=null;try{S=await bt.post("".concat(A,"/api/whatsapp-dispatch?action=send-marksheet"),{marksheetId:p._id,marksheetPdfUrl:N,marksheetImageUrl:F})}catch(L){const q=L&&(((t=L.data)==null?void 0:t.error)||L.data||L.message)||String(L);k.push({success:!1,id:p._id,error:q});continue}S&&S.success?(k.push({success:!0,id:p._id}),_(L=>L.map(q=>q._id===p._id?{...q,status:"dispatched"}:q))):k.push({success:!1,id:p._id,error:(S==null?void 0:S.error)||"Unknown API response"})}catch(N){k.push({success:!1,id:p._id,error:(N==null?void 0:N.message)||String(N)})}const a=k.filter(p=>p.success).length,r=k.length-a;a>0&&T("Successfully sent ".concat(a," marksheet").concat(a>1?"s":""," via WhatsApp.")),r>0&&j("Failed to send ".concat(r," marksheet").concat(r>1?"s":"",". Please try sending them individually."))}catch(A){console.error(A),j("Unexpected error while sending marksheets via WhatsApp.")}finally{c(!1),await E()}}},rt=ht.useMemo(()=>{const R=Y==="active"?ot:Z;return[{id:"all",label:"All",count:R.length},{id:"verified_by_staff",label:"Ready",count:R.filter(t=>t.status==="verified_by_staff").length},{id:"dispatch_requested",label:"Pending",count:R.filter(t=>t.status==="dispatch_requested").length},{id:"approved_by_hod",label:"Approved",count:R.filter(t=>t.status==="approved_by_hod").length},{id:"rejected_by_hod",label:"Rejected",count:R.filter(t=>t.status==="rejected_by_hod").length},{id:"dispatched",label:"Dispatched",count:R.filter(t=>t.status==="dispatched").length}]},[ot,Z,Y]),it=ht.useMemo(()=>{let R=Y==="active"?ot:Z;return Y==="history"&&B&&(R=R.filter(A=>A.examinationId===B)),(v==="all"?R:R.filter(A=>A.status===v)).sort((A,k)=>{var p,N;const a=(((p=A.studentDetails)==null?void 0:p.regNumber)||"").toString().toLowerCase(),r=(((N=k.studentDetails)==null?void 0:N.regNumber)||"").toString().toLowerCase();return a.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"})})},[ot,Z,v,Y,B]),dt=ht.useMemo(()=>ot.filter(R=>R.status==="approved_by_hod").length,[ot]),ct={verified_by_staff:"bg-blue-100 text-blue-800",dispatch_requested:"bg-yellow-100 text-yellow-800",approved_by_hod:"bg-green-100 text-green-800",rejected_by_hod:"bg-red-100 text-red-800",dispatched:"bg-purple-100 text-purple-800"},mt={verified_by_staff:"",dispatch_requested:"",approved_by_hod:"",rejected_by_hod:"",dispatched:""};return!at||at.role!=="staff"?X("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:nt("div",{className:"glass-card p-8 rounded-3xl text-center",children:[X("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),X("p",{className:"text-gray-600",children:"Only staff members can manage dispatch requests."})]})}):nt("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[X(Wt,{isPulling:Q,isRefreshing:W,pullDistance:tt,threshold:J}),X("div",{ref:$,className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:nt("div",{className:"max-w-6xl mx-auto",children:[nt("div",{className:"text-center mb-8",children:[X("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-black text-gray-900 mb-4",children:"Dispatch Requests"}),nt("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:["Submit and track WhatsApp dispatch requests for verified marksheets.",X("br",{}),"Request approval, send reports, and manage dispatch status for your students."]})]}),X("div",{className:"glass-card p-8 rounded-3xl mb-8",children:h?nt("div",{className:"text-center py-12",children:[X("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),X("p",{className:"text-gray-600",children:"Loading marksheets..."})]}):nt(vt,{children:[nt("div",{className:"bg-blue-50 p-4 rounded-xl mb-6 text-blue-800",children:[X("strong",{children:"Tip:"})," Request dispatch after verifying marksheets. Once the HOD approves, you can send the report directly to parents via WhatsApp."]}),nt("div",{className:"flex items-center gap-2 mb-6 border-b border-gray-200",children:[nt("button",{onClick:()=>{g("active"),z("all")},className:"px-4 py-3 font-semibold text-sm border-b-2 transition-colors ".concat(Y==="active"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Active (",ot.length,")"]}),nt("button",{onClick:()=>{g("history"),z("all")},className:"px-4 py-3 font-semibold text-sm border-b-2 transition-colors ".concat(Y==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Dispatched History (",Z.length,")"]})]}),Y==="active"&&ot.length===0||Y==="history"&&Z.length===0?nt("div",{className:"text-center py-12",children:[X("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:X("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),X("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No marksheets available"}),X("p",{className:"text-gray-600",children:Y==="active"?"Import and verify marksheets to begin requesting dispatch approvals.":"No dispatched marksheets yet."})]}):nt(vt,{children:[X("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-6",children:Y==="active"&&nt(vt,{children:[X("div",{className:"flex flex-wrap items-center gap-2",children:rt.map(R=>nt("button",{onClick:()=>z(R.id),className:"px-3 py-2 rounded-full text-xs sm:text-sm font-medium border transition-colors duration-200 whitespace-nowrap ".concat(v===R.id?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:border-yellow-400"),children:[R.label,X("span",{className:"ml-1 inline-flex items-center justify-center px-1.5 py-0.5 rounded-full text-xs font-semibold ".concat(v===R.id?"bg-white/25 text-white":"bg-gray-100 text-gray-700"),children:R.count})]},R.id))}),X("div",{className:"ml-auto",children:X(Lt,{isLoading:O,onClick:I})})]})}),(C||D)&&nt("div",{className:"mt-0 mb-3 space-y-2",children:[C&&X("div",{className:"rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",children:C}),D&&X("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:D})]}),X("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 mb-3",children:Y==="active"&&nt("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[X("button",{onClick:H,disabled:i||ot.every(R=>R.status!=="verified_by_staff"),className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(i||ot.every(R=>R.status!=="verified_by_staff")?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"),children:i?"Requesting...":" Request All"}),X("button",{onClick:ft,disabled:n||ot.every(R=>R.status!=="approved_by_hod"),className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(n||ot.every(R=>R.status!=="approved_by_hod")?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 transition-colors"),children:n?nt(vt,{children:[X("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):X(vt,{children:" Send All"})}),X("button",{onClick:async()=>{var t,A;const R=ot.filter(k=>k.status==="approved_by_hod");if(!(!R||R.length===0)){T(""),j(""),f(!0);try{const k=new Mt,a=Array.from(new Set(R.map(P=>P.examinationName||"exam"))),r=Array.from(new Set(R.map(P=>{var G;return((G=P.studentDetails)==null?void 0:G.department)||"dept"}))),p=Array.from(new Set(R.map(P=>{var G;return((G=P.studentDetails)==null?void 0:G.year)||"year"}))),N=Array.from(new Set(R.map(P=>{var G;return((G=P.studentDetails)==null?void 0:G.section)||"section"})));let F="marksheets_"+Date.now();if(a.length===1&&r.length===1&&p.length===1&&N.length===1){const P=a[0].replace(/\s+/g,"_"),G=String(r[0]).replace(/\s+/g,"_"),st=String(p[0]).replace(/\s+/g,"_"),et=String(N[0]).replace(/\s+/g,"_");F="".concat(P,"-").concat(G,"-").concat(st,"-").concat(et)}else a.length===1&&r.length===1&&p.length===1?F="".concat(a[0].replace(/\s+/g,"_"),"-").concat(r[0],"-").concat(p[0]):a.length===1&&(F="".concat(a[0].replace(/\s+/g,"_")));for(const P of R)try{const G=kt(),st=Date.now(),et=G?"".concat(G,"/api/generate-pdf?marksheetId=").concat(P._id,"&t=").concat(st):"/api/generate-pdf?marksheetId=".concat(P._id,"&t=").concat(st);try{const pt=await bt.get(et,{responseType:"arrayBuffer",timeout:15e3}),yt="".concat(((t=P.studentDetails)==null?void 0:t.regNumber)||((A=P.studentDetails)==null?void 0:A.name)||P._id,"_").concat((P.marksheetId||"").toString()||"",".pdf").replace(/[^a-zA-Z0-9_\-\.]/g,"_");k.file(yt,pt)}catch(pt){console.warn("Failed to fetch PDF for",P._id,pt);continue}}catch(G){console.error("Error fetching PDF for marksheet",P._id,G)}const S=await k.generateAsync({type:"blob"}),L=document.createElement("a"),q=URL.createObjectURL(S);L.href=q,L.download="".concat(F,".zip"),document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(q),T("Prepared ".concat(R.length," marksheet").concat(R.length>1?"s":""," in ").concat(F,".zip"))}catch(k){console.error("Download all error:",k),j("Failed to generate ZIP. Try again.")}finally{f(!1)}}},disabled:o||dt===0,"aria-disabled":o||dt===0,title:o?"Preparing ZIP...":dt===0?"Disabled until HOD approval (no approved marksheets).":"Download all approved marksheets as ZIP",className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(o||dt===0?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 transition-colors"),children:o?"Preparing ZIP...":" Download All (ZIP)"}),X("button",{onClick:async()=>{const R=ot;if(!(!R||R.length===0)){T(""),j(""),w(!0);try{const t=[];for(const a of R)try{const r=await bt.put("/api/marksheets",{marksheetId:a._id,regenerateSignatures:!0,recomputeResults:!0});r&&r.success?t.push({success:!0,id:a._id}):t.push({success:!1,id:a._id,error:(r==null?void 0:r.error)||(r==null?void 0:r.details)})}catch(r){t.push({success:!1,id:a._id,error:r.message})}const A=t.filter(a=>a.success).length,k=t.length-A;A>0&&T("Regenerated ".concat(A," marksheet").concat(A>1?"s":"",".")),k>0&&j("Failed to regenerate ".concat(k," marksheet").concat(k>1?"s":"","."))}finally{w(!1),await E()}}},disabled:b||ot.length===0,className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 rounded-lg font-semibold whitespace-nowrap ".concat(b||ot.length===0?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-yellow-500 text-white hover:bg-yellow-600 transition-colors"),children:b?"Regenerating...":" Regenerate All"})]})}),X("div",{className:"space-y-4",children:it.map(R=>{var A,k,a,r,p,N;const t=[];return R.status==="verified_by_staff"&&t.push({label:"Request",icon:"",className:"border-blue-300 text-blue-600 hover:border-blue-500 hover:bg-blue-50",onClick:()=>K(R._id)}),R.status==="approved_by_hod"&&t.push({label:"Download",icon:"",className:"border-amber-300 text-amber-600 hover:border-amber-500 hover:bg-amber-50",onClick:async()=>{const F=Date.now(),S=kt(),L=S?"".concat(S,"/api/generate-pdf?marksheetId=").concat(R._id,"&t=").concat(F):"/api/generate-pdf?marksheetId=".concat(R._id,"&t=").concat(F);window.open(L,"_blank");try{await bt.put("/api/marksheets",{marksheetId:R._id,status:"dispatched"}),_(q=>q.map(P=>P._id===R._id?{...P,status:"dispatched"}:P))}catch(q){console.error("Error marking marksheet as dispatched:",q)}}},{label:"Send",icon:"",className:"border-green-300 text-green-600 hover:border-green-500 hover:bg-green-50",onClick:()=>lt(R)}),R.status==="rejected_by_hod"&&t.push({label:"Review",icon:"",className:"border-red-300 text-red-600 hover:border-red-500 hover:bg-red-50",onClick:()=>navigate("/marksheets/".concat(R._id))}),R.status==="dispatched"&&t.push({label:"Download",icon:"",className:"border-amber-300 text-amber-600 hover:border-amber-500 hover:bg-amber-50",onClick:()=>window.open("/api/generate-pdf?marksheetId=".concat(R._id),"_blank")},{label:"Re-send",icon:"",className:"border-green-300 text-green-600 hover:border-green-500 hover:bg-green-50",onClick:()=>lt(R)}),X(Ut,{actions:t,children:nt("div",{className:"bg-white",children:[nt("div",{className:"p-4 sm:p-6 pb-3 sm:pb-4",children:[nt("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[nt("div",{className:"flex-1 min-w-0",children:[X("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1 break-words",children:(A=R.studentDetails)==null?void 0:A.name}),nt("p",{className:"text-xs sm:text-sm text-gray-600",children:[(k=R.studentDetails)==null?void 0:k.regNumber,"  ",qt(R.studentDetails)]})]}),nt("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-semibold uppercase tracking-wide flex items-center gap-0.5 sm:gap-1 flex-shrink-0 whitespace-nowrap ".concat(ct[R.status]||"bg-gray-100 text-gray-700"),children:[X("span",{className:"text-xs sm:text-sm",children:mt[R.status]||""}),X("span",{className:"text-xs",children:(R.status||"").replace(/_/g," ")})]})]}),nt("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[nt("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 sm:gap-6 text-xs sm:text-sm flex-1",children:[nt("div",{children:[X("p",{className:"text-gray-500 mb-1 font-medium",children:"Parent:"}),X("p",{className:"font-medium text-gray-900 truncate",children:((a=R.studentDetails)==null?void 0:a.parentPhoneNumber)||""})]}),nt("div",{children:[X("p",{className:"text-gray-500 mb-1 font-medium",children:"Requested:"}),X("p",{className:"font-medium text-gray-900",children:(r=R.dispatchRequest)!=null&&r.requestedAt?new Date(R.dispatchRequest.requestedAt).toLocaleDateString():""})]}),nt("div",{children:[X("p",{className:"text-gray-500 mb-1 font-medium",children:"HOD Decision:"}),X("p",{className:"font-medium text-gray-900",children:(p=R.dispatchRequest)!=null&&p.hodResponse?R.dispatchRequest.hodResponse.toUpperCase():""})]})]}),nt("div",{className:"hidden sm:block w-full md:w-auto md:flex-shrink-0",children:[R.status==="verified_by_staff"&&X("button",{onClick:()=>K(R._id),disabled:m.includes(R._id),className:"w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(m.includes(R._id)?"bg-blue-300 cursor-wait":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"),children:m.includes(R._id)?"Requesting":"Request Dispatch"}),R.status==="approved_by_hod"&&X("button",{onClick:()=>lt(R),disabled:s===R._id,className:"w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(s===R._id?"bg-green-300 cursor-wait":"bg-green-600 hover:bg-green-700 focus:ring-green-500"),children:s===R._id?"Sending":"Send via WhatsApp"}),R.status==="approved_by_hod"&&X("button",{onClick:async F=>{F.preventDefault();const S=Date.now(),L=kt(),q=L?"".concat(L,"/api/generate-pdf?marksheetId=").concat(R._id,"&t=").concat(S):"/api/generate-pdf?marksheetId=".concat(R._id,"&t=").concat(S);window.open(q,"_blank");try{await bt.put("/api/marksheets",{marksheetId:R._id,status:"dispatched"}),_(P=>P.map(G=>G._id===R._id?{...G,status:"dispatched"}:G))}catch(P){console.error("Error marking marksheet as dispatched:",P)}},className:"mt-2 block w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-yellow-600 border border-yellow-300 bg-white hover:bg-yellow-50 hover:border-yellow-400 text-center text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1",children:"Download PDF"}),R.status==="rejected_by_hod"&&X("a",{href:"/marksheets/".concat(R._id),className:"block w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-red-600 border border-red-200 bg-white hover:bg-red-50 text-center text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:"Review Marksheet"}),R.status==="dispatched"&&nt(vt,{children:[X("button",{onClick:()=>lt(R),disabled:s===R._id,className:"w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(s===R._id?"bg-green-300 cursor-wait":"bg-green-600 hover:bg-green-700 focus:ring-green-500"),children:s===R._id?"Sending":" Re-send"}),X("a",{href:"/api/generate-pdf?marksheetId=".concat(R._id),target:"_blank",rel:"noreferrer",className:"mt-2 block w-full md:px-6 px-3 sm:px-4 py-2 rounded-lg font-medium text-yellow-600 border border-yellow-300 bg-white hover:bg-yellow-50 hover:border-yellow-400 text-center text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1",children:"Download PDF"})]})]})]}),((N=R.dispatchRequest)==null?void 0:N.hodComments)&&nt("div",{className:"mt-4 bg-gray-50 border border-dashed border-gray-200 rounded-lg p-3",children:[X("p",{className:"text-xs text-gray-500 mb-1 font-medium",children:"HOD Comments:"}),X("p",{className:"text-gray-700 text-xs sm:text-sm",children:R.dispatchRequest.hodComments})]})]}),X("div",{className:"sm:hidden p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-t border-blue-100",children:nt("p",{className:"text-xs text-center text-gray-600 flex items-center justify-center gap-2",children:[X("span",{children:""}),X("span",{className:"font-medium",children:"Swipe left for actions"})]})})]})},R._id)})})]})]})})]})})]})}function qt(at={}){const ot=(at.year||"").toString(),_=(at.section||"").toString();return!ot&&!_?"":_?ot?ot.includes("-")?ot:"".concat(ot,"-").concat(_):_:ot}export{Vt as default};
